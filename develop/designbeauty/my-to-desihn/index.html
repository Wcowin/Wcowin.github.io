
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="çŸ¥è¶³ä¸”ä¸Šè¿›ï¼Œæ¸©æŸ”ä¸”åšå®š">
      
      
        <meta name="author" content="ç‹ç§‘æ–‡(Wcowin)">
      
      
        <link rel="canonical" href="http://wcowin.work/develop/designbeauty/my-to-desihn/">
      
      
        <link rel="prev" href="../db1/">
      
      
        <link rel="next" href="../../1024code/">
      
      
      <link rel="icon" href="https://i.stardots.io/wcowin/1750090373988.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>æˆ‘å¯¹è®¾è®¡çš„ä¸€äº›çœ‹æ³• - Wcowin's Blog</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra2.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/stylesheets/link.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/stylesheets/customize.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/stylesheets/ziti.css">
    
      <link rel="stylesheet" href="https://fontsapi.zeoseven.com/292/main/result.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-29HZMNR0KG"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-29HZMNR0KG",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-29HZMNR0KG",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#some-of-my-thoughts-on-design" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href="../../.." title="Wcowin&#39;s Blog" class="md-header__button md-logo" aria-label="Wcowin's Blog" data-md-component="logo">
      
  <img src="https://pica.zhimg.com/80/v2-74ecd899c7c4cc0258930eaff239a21b_1440w.webp" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Wcowin's Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              æˆ‘å¯¹è®¾è®¡çš„ä¸€äº›çœ‹æ³•
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="å…³é—­è‡ªåŠ¨æ¨¡å¼"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="å…³é—­è‡ªåŠ¨æ¨¡å¼" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="åˆ‡æ¢è‡³å¤œé—´æ¨¡å¼"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="åˆ‡æ¢è‡³å¤œé—´æ¨¡å¼" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="åˆ‡æ¢è‡³æ—¥é—´æ¨¡å¼"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="åˆ‡æ¢è‡³æ—¥é—´æ¨¡å¼" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="é€‰æ‹©å½“å‰è¯­è¨€">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M160 0c17.7 0 32 14.3 32 32v32h128c17.7 0 32 14.3 32 32s-14.3 32-32 32h-9.6l-8.4 23.1c-16.4 45.2-41.1 86.5-72.2 122 14.2 8.8 29 16.6 44.4 23.5l50.4 22.4 62.2-140c5.1-11.6 16.6-19 29.2-19s24.1 7.4 29.2 19l128 288c7.2 16.2-.1 35.1-16.2 42.2s-35.1-.1-42.2-16.2l-20-45H337.3l-20 45c-7.2 16.2-26.1 23.4-42.2 16.2s-23.4-26.1-16.2-42.2l39.8-89.5-50.4-22.4c-23-10.2-45-22.4-65.8-36.4-21.3 17.2-44.6 32.2-69.5 44.7l-34.7 17.2c-15.8 7.9-35 1.5-42.9-14.3s-1.5-35 14.3-42.9l34.5-17.3c16.3-8.2 31.8-17.7 46.4-28.3-13.8-12.7-26.8-26.4-38.9-40.9l-10.1-12.2c-11.3-13.6-9.5-33.8 4.1-45.1s33.8-9.5 45.1 4.1l10.2 12.2c11.5 13.9 24.1 26.8 37.4 38.7 27.5-30.4 49.2-66.1 63.5-105.4l.5-1.2H32.1C14.3 128 0 113.7 0 96s14.3-32 32-32h96V32c0-17.7 14.3-32 32-32m256 270.8L365.7 384h100.6z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="javascript:translateTo('chinese_simplified');" hreflang="zh" class="md-select__link">
              ä¸­æ–‡
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="javascript:translateTo('english');" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="javascript:translateTo('korean');" hreflang="ko" class="md-select__link">
              í•œêµ­ì–´
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="javascript:translateTo('japanese');" hreflang="ja" class="md-select__link">
              æ—¥æœ¬èª
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="åˆ†äº«" aria-label="åˆ†äº«" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="æ¸…ç©ºå½“å‰å†…å®¹" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Wcowin/Wcowin.github.io" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Wcowin.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="æ ‡ç­¾" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/indexblog/" class="md-tabs__link">
          
  
  
    
  
  æŠ€æœ¯

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  å¼€å‘

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../relax/" class="md-tabs__link">
          
  
  
    
  
  é—²èŠ

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../trip/" class="md-tabs__link">
          
  
  
    
  
  æ—…è¡Œ

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../tag/" class="md-tabs__link">
        
  
  
    
  
  æ ‡ç­¾

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../waline/" class="md-tabs__link">
        
  
  
    
  
  ç•™è¨€æ¿

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../link/" class="md-tabs__link">
          
  
  
    
  
  æœ‹å‹

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/" class="md-tabs__link">
          
  
  
    
  
  åšå®¢

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../about/geren/" class="md-tabs__link">
          
  
  
    
  
  å…³äº

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://wcowin.work/Mkdocs-Wcowin/" class="md-tabs__link">
        
  
  
    
  
  Mkdocsä¸­æ–‡æ•™ç¨‹

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="https://www.travellings.cn/go.html" class="md-tabs__link">
        
  
  
    
  
  å¼€å¾€

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Wcowin&#39;s Blog" class="md-nav__button md-logo" aria-label="Wcowin's Blog" data-md-component="logo">
      
  <img src="https://pica.zhimg.com/80/v2-74ecd899c7c4cc0258930eaff239a21b_1440w.webp" alt="logo">

    </a>
    Wcowin's Blog
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Wcowin/Wcowin.github.io" title="å‰å¾€ä»“åº“" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Wcowin.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../blog/indexblog/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    æŠ€æœ¯
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    å¼€å‘
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            å¼€å‘
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deepseek/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DeepSeek:ä»å…¥é—¨åˆ°ç²¾é€š
    
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="æœ€è¿‘æ·»åŠ ">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    MCP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            MCP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://mcp-docs.cn/introduction" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MCPä¸­æ–‡æ–‡æ¡£
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AI/mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What is MCP
    
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="æœ€è¿‘æ·»åŠ ">
    </span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AIå·¥å…·
    
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="æœ€è¿‘æ·»åŠ ">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ChatGPT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å¦‚ä½•æ³¨å†ŒChatGPT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mydevice/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    æˆ‘çš„è®¾å¤‡
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Markdown
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Markdown
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Markdown/markdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MarkdownæŒ‡å—
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Markdown/MWeb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MWeb Pro
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../git/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git å®ç”¨æŠ€å·§
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_9" >
        
          
          <label class="md-nav__link" for="__nav_2_9" id="__nav_2_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    æˆ‘çš„é¡¹ç›®/ä½œå“
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            æˆ‘çš„é¡¹ç›®/ä½œå“
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mywork/mkdocs-wcowin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wcowin for MkDocsä¸»é¢˜
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mywork/mkdocsplugin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mkdocsç›¸å…³æ’ä»¶
    
  </span>
  
    
  
  
    <span class="md-status md-status--new" title="æœ€è¿‘æ·»åŠ ">
    </span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mywork/muplayer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ç®€å•çš„ JavaScript éŸ³ä¹æ’­æ”¾å™¨
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mywork/face-recognition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    äººè„¸è¯†åˆ«ç³»ç»Ÿ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mywork/email/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ç”¨AirScriptè„šæœ¬ç»™å¥³/ç”·æœ‹å‹å‘é€æ¯æ—¥æ—©å®‰é‚®ä»¶(æç®€ç‰ˆæœ¬)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mywork/face_compare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    åŸºäºè®¯é£äººè„¸ç®—æ³•è¿›è¡Œäººè„¸æ¯”å¯¹
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mywork/opencv/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    åŸºäºç™¾åº¦APIå’Œopencvçš„æ™ºèƒ½è½¦ç‰Œè¯†åˆ«ç¨‹åº
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mywork/aizhiwu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    åˆ©ç”¨ç™¾åº¦APIè¿›è¡Œæ¤ç‰©è¯†åˆ«
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mywork/design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ç©çš„è®¾è®¡
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_10" checked>
        
          
          <label class="md-nav__link" for="__nav_2_10" id="__nav_2_10_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    è®¾è®¡ç¾å­¦
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_10_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_10">
            <span class="md-nav__icon md-icon"></span>
            è®¾è®¡ç¾å­¦
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../db1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å”Â·è¯ºæ›¼â€”æƒ…æ„Ÿè®¾è®¡çš„ä¸‰ä¸ªå±‚æ¬¡
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    æˆ‘å¯¹è®¾è®¡çš„ä¸€äº›è§‚ç‚¹
    
  </span>
  

      </a>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1024code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1024code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lighthouse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    åˆ©ç”¨Lighthouseæµ‹è¯•ç½‘ç«™æ€§èƒ½
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Github/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What is Github
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vercel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å¦‚ä½•å°† github pages è¿ç§»åˆ° vercel ä¸Šæ‰˜ç®¡
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../fenxiang/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å¤§å‚ä»¬çš„è‰¯å¿ƒè½¯ä»¶ï½
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Mac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å†™ç»™æ‰€æœ‰ Mac ç”¨æˆ·çš„æ‘¸é±¼æŒ‡åŒ—
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kanyuanma/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    çœ‹æºç æ‰æ‡‚
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../relax/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    é—²èŠ
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../trip/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    æ—…è¡Œ
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    æ ‡ç­¾
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../waline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ç•™è¨€æ¿
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../link/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    æœ‹å‹
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../blog/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    åšå®¢
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
      
        
        
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
  
    <a href="../../../about/geren/" class="md-nav__link">
      
  
  
  <span class="md-ellipsis">
    å…³äº
    
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://wcowin.work/Mkdocs-Wcowin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Mkdocsä¸­æ–‡æ•™ç¨‹
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://www.travellings.cn/go.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    å¼€å¾€
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <nav class="md-tags" >
    
      
      
      
        <a href="../../../tag/#tag:è®¾è®¡ç¾å­¦" class="md-tag">è®¾è®¡ç¾å­¦</a>
      
    
  </nav>


  
  


<h1 id="some-of-my-thoughts-on-design">Some of my thoughts on design<a class="headerlink" href="#some-of-my-thoughts-on-design" title="Permanent link">&para;</a></h1>
<div class="admonition info">
<p class="admonition-title">ğŸ’¾ AIæ™ºèƒ½æ‘˜è¦ (GLM-4)</p>
<p>è®¾è®¡åº”ç®€æ´ç²¾ç‚¼ï¼Œè¿½æ±‚ä¼˜é›…ç¾æ„Ÿï¼Œä»¥ç”¨æˆ·ä½“éªŒä¸ºæ ¸å¿ƒï¼Œæ³¨é‡ç»†èŠ‚ï¼Œé¼“åŠ±åˆ›æ–°ï¼Œå¹¶å¼•å‘æƒ…æ„Ÿå…±é¸£ï¼Œä¼ é€’å“ç‰Œæ•…äº‹ã€‚</p>
</div>
<div class="admonition tip">
<p class="admonition-title">ğŸ“– é˜…è¯»ä¿¡æ¯</p>
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3z"/></svg></span>é˜…è¯»æ—¶é—´ï¼š<strong>1</strong> åˆ†é’Ÿ | <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm6.78 1a.7.7 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38z"/></svg></span>ä¸­æ–‡å­—ç¬¦ï¼š<strong>398</strong></p>
</div>
<center>
<font size=5>  
<b>å¸å¼•äººçš„äº‹ç‰©æ€»è®©äººå¿ƒæƒ…æ„‰æ‚¦  å¹¶åè¿‡æ¥ä¿ƒè¿›ä»–ä»¬çš„æ€ç»´æ›´å…·åˆ›æ„</b> </font></center>

<ol>
<li>
<p>ç®€æ´ä¸ç²¾ç‚¼ï¼šç®€æ´ã€ç²¾ç‚¼å’Œç²¾ç¡®çš„è¡¨è¾¾ã€‚å»é™¤ä¸å¿…è¦çš„å…ƒç´ ï¼Œä½¿è®¾è®¡æ›´åŠ ç®€æ´æ˜äº†ã€‚å…³æ³¨æ ¸å¿ƒåŠŸèƒ½å’Œä¿¡æ¯ï¼Œé¿å…è¿‡åº¦è®¾è®¡å’Œå†—ä½™ã€‚</p>
</li>
<li>
<p>ä¼˜é›…ä¸ç¾æ„Ÿï¼šè¿½æ±‚ä¼˜é›…å’Œç¾æ„Ÿçš„è®¾è®¡ã€‚æ³¨é‡çº¿æ¡çš„æµç•…æ€§å’Œè§†è§‰ä¸Šçš„å¹³è¡¡ã€‚é€šè¿‡ç²¾å¿ƒçš„æ’ç‰ˆã€å¯¹æ¯”å’Œæ¯”ä¾‹ï¼Œåˆ›é€ å‡ºä»¤äººæ„‰æ‚¦çš„è§†è§‰æ•ˆæœã€‚</p>
</li>
<li>
<p>ç”¨æˆ·ä½“éªŒè‡³ä¸Šï¼šä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒ,å…³æ³¨ç”¨æˆ·éœ€æ±‚å’Œè¡Œä¸ºæ¨¡å¼ï¼Œåˆ›é€ å‡ºç®€å•ç›´è§‚ã€æ˜“äºä½¿ç”¨çš„äº§å“å’Œç•Œé¢ã€‚é€šè¿‡å‡å°‘å¤æ‚æ€§å’Œæä¾›æ— ç¼çš„äº¤äº’ä½“éªŒï¼Œä½¿ç”¨æˆ·ä¸äº§å“ä¹‹é—´çš„äº’åŠ¨æ›´åŠ è‡ªç„¶æµç•…ã€‚</p>
</li>
<li>
<p>å¼ºè°ƒç»†èŠ‚ï¼šä»å­—ä½“é€‰æ‹©åˆ°é¢œè‰²æ­é…ï¼Œä»å›¾æ ‡è®¾è®¡åˆ°åŠ¨ç”»æ•ˆæœï¼Œéƒ½éœ€è¦ç»è¿‡ç²¾å¿ƒçš„è€ƒè™‘å’ŒæŠŠæ§ã€‚ç»†èŠ‚çš„å…³æ³¨ä½¿å¾—äº§å“çš„æ•´ä½“è´¨æ„Ÿæ›´å‡ºè‰²ã€‚</p>
</li>
<li>
<p>åˆ›æ–°ä¸çªç ´ï¼šé¼“åŠ±åˆ›æ–°å’Œçªç ´ä¼ ç»Ÿè§‚å¿µçš„æ€ç»´æ–¹å¼ã€‚å°†ä¸åŒçš„å…ƒç´ èåˆåœ¨ä¸€èµ·ï¼Œåˆ›é€ å‡ºç‹¬ç‰¹çš„è®¾è®¡è§£å†³æ–¹æ¡ˆã€‚åœ¨è®¾è®¡ä¸­å¯»æ‰¾çªç ´ç‚¹ï¼Œæä¾›æ–°é¢–è€Œå¯Œæœ‰åˆ›æ„çš„ä½“éªŒã€‚</p>
</li>
<li>
<p>æ•…äº‹æ€§ä¸æƒ…æ„Ÿå…±é¸£ï¼šæƒ…æ„Ÿå…±é¸£å’Œæ•…äº‹æ€§çš„ä½“éªŒã€‚è®¾è®¡æ¥ä¼ é€’äº§å“çš„èƒŒåæ•…äº‹å’Œå“ç‰Œçš„ä»·å€¼è§‚ã€‚é€šè¿‡ç®€å•è€Œæœ‰åŠ›çš„è®¾è®¡è¯­è¨€ï¼Œæ¿€å‘ç”¨æˆ·çš„æƒ…æ„Ÿå…±é¸£å’Œå¯¹äº§å“çš„è®¤åŒã€‚</p>
</li>
</ol>
<p>ã€âš¡å•Šï¼è®¾è®¡ï¼Œæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿâš¡ã€‘ </p>
<!-- <iframe src="//player.bilibili.com/player.html?aid=941663394&bvid=BV1pW4y1a7Zu&cid=824513742&p=1" scrolling="no" border="1" frameborder="no" framespacing="0" allowfullscreen="true" style="width: 640px; height: 430px; max-width: 100%"> </iframe> -->
<iframe width="560" height="315" src="//player.bilibili.com/player.html?aid=941663394&bvid=BV1pW4y1a7Zu&cid=824513742&p=1" title="YouTube video player" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<style>
.related-posts {
  margin-top: 1.5rem;
  padding-top: 0.75rem;
  border-top: 1px solid rgba(0,0,0,0.1);
  max-height: none !important; /* é˜²æ­¢Safarié”™è¯¯è®¡ç®—é«˜åº¦ */
  overflow: visible !important; /* é˜²æ­¢å†…å®¹è¢«æˆªæ–­ */
}
.related-posts h3 {
  margin-top: 0;
  margin-bottom: 0.5rem;
  font-size: 1.2rem;
  font-weight: 500;
  line-height: 1.3;
}
.related-posts ul {
  margin: 0 0 0.5rem 0 !important; /* å¼ºåˆ¶è¦†ç›–å¯èƒ½çš„å†²çªæ ·å¼ */
  padding-left: 1.5rem;
  list-style-position: outside;
}
.related-posts li {
  margin-bottom: 0.25rem;
  line-height: 1.4;
}
/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme="slate"] .related-posts {
  border-top-color: rgba(255,255,255,0.1);
}
/* Safariç‰¹å®šä¿®å¤ */
@supports (-webkit-hyphens:none) {
  .related-posts {
    display: block;
    position: relative;
    height: auto !important;
  }
  .related-posts ul {
    position: static;
  }
}
</style>
<div class="related-posts">
<h3>ğŸ“š ç›¸å…³æ–‡ç« æ¨è</h3>
<ul>
<li><a href="/develop/designbeauty/db1/">å”Â·è¯ºæ›¼â€”æƒ…æ„Ÿè®¾è®¡çš„ä¸‰ä¸ªå±‚æ¬¡</a></li>
</ul>
</div>

<!-- Twikoo è¯„è®ºç³»ç»Ÿ -->
<div class="twikoo-container" style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid rgba(0,0,0,0.1);">
    <h3 style="margin-bottom: 1rem; font-size: 1.2rem; font-weight: 500;">ğŸ’¬ è¯„è®º</h3>
    <div id="tcomment" class="loading" style="min-height: 200px;">
        <p style="text-align: center; color: #666; padding: 2rem;">è¯„è®ºç³»ç»ŸåŠ è½½ä¸­...</p>
    </div>
</div>

<style>
.twikoo-container {
    max-width: 100%;
}

/* æš—è‰²æ¨¡å¼é€‚é… */
[data-md-color-scheme="slate"] .twikoo-container {
    border-top-color: rgba(255,255,255,0.1);
}

/* åŠ è½½çŠ¶æ€æ ·å¼ */
#tcomment.loading {
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.02);
    border-radius: 8px;
}

[data-md-color-scheme="slate"] #tcomment.loading {
    background: rgba(255,255,255,0.05);
}
</style>

<script>
(function() {
    // é˜²æ­¢é‡å¤åŠ è½½
    if (window.twikooLoaded) {
        return;
    }

    function loadTwikoo() {
        // æ£€æŸ¥æ˜¯å¦å·²ç»åŠ è½½è¿‡ Twikoo
        if (window.twikoo) {
            initTwikoo();
            return;
        }

        const script = document.createElement('script');
        script.src = 'https://registry.npmmirror.com/twikoo/1.6.44/files/dist/twikoo.min.js';
        script.onload = function() {
            console.log('Twikoo è„šæœ¬åŠ è½½æˆåŠŸ');
            initTwikoo();
        };
        script.onerror = function() {
            console.error('Twikoo è„šæœ¬åŠ è½½å¤±è´¥');
            const commentEl = document.getElementById('tcomment');
            if (commentEl) {
                commentEl.classList.remove('loading');
                commentEl.innerHTML = '<p style="text-align: center; color: #f56565; padding: 2rem;">è¯„è®ºç³»ç»ŸåŠ è½½å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</p>';
            }
        };
        document.head.appendChild(script);
    }

    function initTwikoo() {
        const commentEl = document.getElementById('tcomment');
        if (!commentEl) {
            console.warn('è¯„è®ºå®¹å™¨æœªæ‰¾åˆ°');
            return;
        }

        commentEl.classList.remove('loading');

        try {
            twikoo.init({
                envId: 'https://superb-salamander-e730b6.netlify.app/.netlify/functions/twikoo',
                el: '#tcomment',
                lang: 'zh-CN',
                path: location.pathname,
                onCommentLoaded: function () {
                    console.log('è¯„è®ºåŠ è½½å®Œæˆ');
                },
                onError: function(err) {
                    console.error('Twikoo åˆå§‹åŒ–å¤±è´¥:', err);
                    commentEl.innerHTML = '<p style="text-align: center; color: #f56565; padding: 2rem;">è¯„è®ºç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥</p>';
                }
            });
            window.twikooLoaded = true;
        } catch (error) {
            console.error('Twikoo åˆå§‹åŒ–å¼‚å¸¸:', error);
            commentEl.innerHTML = '<p style="text-align: center; color: #f56565; padding: 2rem;">è¯„è®ºç³»ç»Ÿåˆå§‹åŒ–å¼‚å¸¸</p>';
        }
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadTwikoo);
    } else {
        loadTwikoo();
    }
})();
</script>







  
  


  <aside class="md-source-file">
    
    
    
    
      
  <span class="md-source-file__fact">
    
      
  <span class="md-icon" title="è´¡çŒ®è€…">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33s1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2"/></svg>
  </span>
  <span>GitHub</span>

    
    <nav>
      
        <a href="https://github.com/Wcowin" class="md-author" title="@Wcowin">
          
          <img src="https://avatars.githubusercontent.com/u/99159173?v=4&size=72" alt="Wcowin">
        </a>
      
      
      
    </nav>
  </span>

    
  </aside>

<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine feedback configuration -->

  


<!-- Determine whether to show feedback -->


<!-- Was this page helpful? -->

  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        æ­¤é¡µé¢æœ‰å¸®åŠ©å—ï¼Ÿ
      </legend>
      <div class="md-feedback__inner">

        <!-- Feedback ratings -->
        <div class="md-feedback__list">
          
            <button
              class="md-feedback__icon md-icon"
              type="submit"
              title="This page was helpful"
              data-md-value="1"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg>
            </button>
          
            <button
              class="md-feedback__icon md-icon"
              type="submit"
              title="This page could be improved"
              data-md-value="0"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg>
            </button>
          
        </div>

        <!-- Feedback rating notes (shown after submission) -->
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              

              <!-- Determine title -->
              
                
              

              <!-- Replace {url} and {title} placeholders in note -->
              è°¢è°¢ä½ çš„åé¦ˆï¼
            </div>
          
            <div data-md-value="0" hidden>
              

              <!-- Determine title -->
              
                
              

              <!-- Replace {url} and {title} placeholders in note -->
              Thanks for your feedback! Help us improve this page by using our <a href="https://marketingplatform.google.com/about/analytics/" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  å›åˆ°é¡µé¢é¡¶éƒ¨
</button>
        
      </main>
      
        <!-- ç¡®ä¿è¯­è¨€é€‰æ‹©å™¨ä¸è¢«ç¿»è¯‘çš„æ ·å¼ -->
<style>
  /* ç¡®ä¿è¯­è¨€é€‰æ‹©å™¨ä¸è¢«ç¿»è¯‘ */
  .md-select,
  .md-header__option,
  .md-header__option *,
  [data-md-component="select"],
  [data-md-component="select"] *,
  .md-select__inner,
  .md-select__list,
  .md-select__item,
  .md-select__link,
  .md-header__button[for="__select"],
  .md-header__button[for="__select"] *,
  .md-header__source,
  .md-header__source * {
    translate: no !important;
  }
  
  /* ä¸ºè¯­è¨€é€‰æ‹©å™¨æ·»åŠ é¢å¤–çš„ä¿æŠ¤ */
  [data-md-component="header"] .md-header__option,
  [data-md-component="header"] .md-select {
    translate: no !important;
  }
</style>

<!-- Footer -->
<footer class="md-footer">
  <!-- Link to previous and/or next page -->
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="é¡µè„š" >
        <!-- Link to previous page -->
        
          
          <a href="../db1/" class="md-footer__link md-footer__link--prev" aria-label="ä¸Šä¸€é¡µ: å”Â·è¯ºæ›¼â€”æƒ…æ„Ÿè®¾è®¡çš„ä¸‰ä¸ªå±‚æ¬¡">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">ä¸Šä¸€é¡µ</span>
              <div class="md-ellipsis">å”Â·è¯ºæ›¼â€”æƒ…æ„Ÿè®¾è®¡çš„ä¸‰ä¸ªå±‚æ¬¡</div>
            </div>
          </a>
        

        <!-- Link to next page -->
        
          
          <a href="../../1024code/" class="md-footer__link md-footer__link--next" aria-label="ä¸‹ä¸€é¡µ: 1024code">
            <div class="md-footer__title">
              <span class="md-footer__direction">ä¸‹ä¸€é¡µ</span>
              <div class="md-ellipsis">1024code</div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  

  <!-- Footer content -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="footer-wrapper">
        <!-- Desktop layout -->
        <div class="footer-content">
          <div class="footer-visit-count">
            <div class="footer-item">
              <span>æœ¬ç«™è®¿é—®é‡ï¼š</span>
              <span id="finicount_views" class="footer-highlight">åŠ è½½ä¸­...</span>
            </div>
            <div class="footer-item">
              <a href="https://icp.gov.moe/?keyword=20230640" target="_blank" rel="noopener" class="icp-link">èŒICPå¤‡20230640å·</a>
            </div>
            <div class="footer-item runtime-info">
              <span>æœ¬ç«™å·²ç»è¿è¡Œ</span>
              <span id="box1" class="footer-highlight">è®¡ç®—ä¸­...</span>
            </div>
          </div>
        </div>

        <!-- Mobile layout -->
        <div class="footer-visit-count-mobile">
          <span>æœ¬ç«™è®¿é—®é‡ï¼š</span>
          <span id="finicount_views_mobile" class="footer-highlight">åŠ è½½ä¸­...</span>
          |
          <a href="https://icp.gov.moe/?keyword=20230640" target="_blank" rel="noopener" class="icp-link">èŒICPå¤‡20230640å·</a>
          <span class="runtime-info">
            <span>æœ¬ç«™å·²ç»è¿è¡Œ</span>
            <span id="box1_mobile" class="footer-highlight">è®¡ç®—ä¸­...</span>
          </span>
        </div>

        <!-- Copyright and social media -->
        <div class="footer-bottom-section">
          <div class="md-footer-copyright">
            <p>Copyright Â© 2022-2025 Wcowin</p>
            <p>Made with <a href="https://squidfunk.github.io/mkdocs-material/" class="mkdocs-link">Material for MkDocs</a></p>
          </div>
          
            <div class="footer-social">
              <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://pic1.zhimg.com/80/v2-8ad8e415b3eb139134b0373ff95c6846_1440w.webp" target="_blank" rel="noopener" title="pic1.zhimg.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154m-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4m-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2M563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4m-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6m107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://t.me/Wcowin" target="_blank" rel="noopener" title="t.me" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M256 8a248 248 0 1 0 0 496 248 248 0 1 0 0-496m115 168.7c-3.7 39.2-19.9 134.4-28.1 178.3-3.5 18.6-10.3 24.8-16.9 25.4-14.4 1.3-25.3-9.5-39.3-18.7-21.8-14.3-34.2-23.2-55.3-37.2-24.5-16.1-8.6-25 5.3-39.5 3.7-3.8 67.1-61.5 68.3-66.7.2-.7.3-3.1-1.2-4.4s-3.6-.8-5.1-.5c-2.2.5-37.1 23.5-104.6 69.1-9.9 6.8-18.9 10.1-26.9 9.9-8.9-.2-25.9-5-38.6-9.1-15.5-5-27.9-7.7-26.8-16.3.6-4.5 6.7-9 18.4-13.7 72.3-31.5 120.5-52.3 144.6-62.3 68.9-28.6 83.2-33.6 92.5-33.8 2.1 0 6.6.5 9.6 2.9 2 1.7 3.2 4.1 3.5 6.7.5 3.2.6 6.5.4 9.8z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/wcowin_" target="_blank" rel="noopener" title="Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/Wcowin" target="_blank" rel="noopener" title="Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://space.bilibili.com/1407028951/lists/4566631?type=series" target="_blank" rel="noopener" title="space.bilibili.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92c-26.4-.8-48.2-9.8-65.3-27.2S.7 396.5 0 368.2V169.8c.8-26 9.7-47.6 26.7-65.7C43.8 87.8 65.5 78.8 92 78h29.4L96 52.2c-5.7-5.7-8.6-13-8.6-21.8S90.3 14.3 96 8.6 109 0 117.9 0s16.1 2.9 21.9 8.6L213.1 78h88l74.5-69.4C381.7 2.9 389.2 0 398 0s16.1 2.9 21.9 8.6c5.7 5.7 8.6 13 8.6 21.8s-2.9 16.1-8.6 21.8L394.6 78h29.3c26.4.8 48 9.8 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96c-9.6.4-17.4 3.7-23.6 9.8-6.1 6.1-9.4 13.9-9.8 23.5v194.4c0 9.2 3.3 17 9.8 23.5s14.4 9.8 23.6 9.8h320.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></svg>
    </a>
  
    
    
    
    
    <a href="https://blog.csdn.net/m0_63203517?spm=1000.2115.3001.5343" target="_blank" rel="noopener" title="CSDN" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M0 64C0 28.7 28.7 0 64 0h149.5c17 0 33.3 6.7 45.3 18.7l106.5 106.6c12 12 18.7 28.3 18.7 45.3V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64zm208-5.5V152c0 13.3 10.7 24 24 24h93.5zm-53.8 237.1c8.6-10.1 7.5-25.2-2.6-33.8s-25.2-7.5-33.8 2.6l-48 56c-7.7 9-7.7 22.2 0 31.2l48 56c8.6 10.1 23.8 11.2 33.8 2.6s11.2-23.8 2.6-33.8L119.6 336zm112-31.2c-8.6-10.1-23.8-11.2-33.8-2.6s-11.2 23.8-2.6 33.8l34.6 40.4-34.6 40.4c-8.6 10.1-7.5 25.2 2.6 33.8s25.2 7.5 33.8-2.6l48-56c7.7-9 7.7-22.2 0-31.2z"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<wangkewen821@gmail.com>" target="_blank" rel="noopener" title="Email" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M61.4 64C27.5 64 0 91.5 0 125.4c0 .9 0 1.7.1 2.6H0v256c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V128h-.1c0-.9.1-1.7.1-2.6 0-33.9-27.5-61.4-61.4-61.4zM464 192.3V384c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192.3l154.8 117.4c31.4 23.9 74.9 23.9 106.4 0zM48 125.4c0-7.4 6-13.4 13.4-13.4h389.2c7.4 0 13.4 6 13.4 13.4 0 4.2-2 8.2-5.3 10.7L280.2 271.5c-14.3 10.8-34.1 10.8-48.4 0L53.3 136.1c-3.3-2.5-5.3-6.5-5.3-10.7"/></svg>
    </a>
  
</div>
            </div>
          
        </div>
      </div>

      <!-- GLM-4-Flash æ™ºèƒ½ç¿»è¯‘ç³»ç»Ÿ - ä¸MkDocs Alternateé›†æˆç‰ˆ -->
      <script>
      (function() {
        'use strict';
        
        // é˜²æ­¢é‡å¤åˆå§‹åŒ–
        if (window.glmTranslateInitialized) return;
        
        // GLM-4-Flash é…ç½® - ä¼˜åŒ–æ€§èƒ½å’Œç¨³å®šæ€§
        const GLM_CONFIG = {
          endpoint: 'https://open.bigmodel.cn/api/paas/v4/chat/completions',
          model: 'glm-4-flash',
          maxRetries: 3,
          timeout: 8000,
          batchSize: 15,
          batchDelay: 50,
          maxConcurrent: 6,
          apiKey: '46ad7781e9fa44cb9b31d11a9696da89.GCUpkep25U5Y6vBg'
        };
        
        // ä¸MkDocsé…ç½®åŒæ­¥çš„è¯­è¨€æ˜ å°„
        const LANGUAGE_MAP = {
          'chinese_simplified': 'ä¸­æ–‡',
          'english': 'English', 
          'korean': 'í•œêµ­ì–´',
          'japanese': 'æ—¥æœ¬èª'
        };
        
        // è¯­è¨€ä»£ç åˆ°ISOä»£ç çš„æ˜ å°„ (ç”¨äºMkDocs alternate)
        const LANG_TO_ISO = {
          'chinese_simplified': 'zh',
          'english': 'en',
          'korean': 'ko', 
          'japanese': 'ja'
        };
        
        // ä¸“ä¸šæœ¯è¯­è¯å…¸ - æå‡ç¿»è¯‘è´¨é‡
        const TECHNICAL_TERMS = {
          'chinese_simplified': {
            'API': 'API',
            'JavaScript': 'JavaScript',
            'TypeScript': 'TypeScript',
            'React': 'React',
            'Vue': 'Vue',
            'Node.js': 'Node.js',
            'GitHub': 'GitHub',
            'Docker': 'Docker',
            'Kubernetes': 'Kubernetes',
            'DevOps': 'DevOps',
            'CI/CD': 'CI/CD',
            'Material Design': 'Material Design',
            'MkDocs': 'MkDocs',
            'Markdown': 'Markdown',
            'äººå·¥æ™ºèƒ½': 'AI',
            'æœºå™¨å­¦ä¹ ': 'Machine Learning',
            'æ·±åº¦å­¦ä¹ ': 'Deep Learning',
            'æ•°æ®åº“': 'Database',
            'å‰ç«¯': 'Frontend',
            'åç«¯': 'Backend',
            'å…¨æ ˆ': 'Full Stack'
          },
          'english': {
            'API': 'API',
            'JavaScript': 'JavaScript',
            'TypeScript': 'TypeScript',
            'React': 'React',
            'Vue': 'Vue',
            'Node.js': 'Node.js',
            'GitHub': 'GitHub',
            'Docker': 'Docker',
            'Kubernetes': 'Kubernetes',
            'DevOps': 'DevOps',
            'CI/CD': 'CI/CD',
            'Material Design': 'Material Design',
            'MkDocs': 'MkDocs',
            'Markdown': 'Markdown',
            'AI': 'Artificial Intelligence',
            'Machine Learning': 'Machine Learning',
            'Deep Learning': 'Deep Learning',
            'Database': 'Database',
            'Frontend': 'Frontend',
            'Backend': 'Backend',
            'Full Stack': 'Full Stack'
          },
          'korean': {
            'API': 'API',
            'JavaScript': 'JavaScript',
            'TypeScript': 'TypeScript',
            'React': 'React',
            'Vue': 'Vue',
            'Node.js': 'Node.js',
            'GitHub': 'GitHub',
            'Docker': 'Docker',
            'Kubernetes': 'Kubernetes',
            'DevOps': 'DevOps',
            'CI/CD': 'CI/CD',
            'Material Design': 'Material Design',
            'MkDocs': 'MkDocs',
            'Markdown': 'Markdown',
            'AI': 'ì¸ê³µì§€ëŠ¥',
            'Machine Learning': 'ë¨¸ì‹ ëŸ¬ë‹',
            'Deep Learning': 'ë”¥ëŸ¬ë‹',
            'Database': 'ë°ì´í„°ë² ì´ìŠ¤',
            'Frontend': 'í”„ë¡ íŠ¸ì—”ë“œ',
            'Backend': 'ë°±ì—”ë“œ',
            'Full Stack': 'í’€ìŠ¤íƒ'
          },
          'japanese': {
            'API': 'API',
            'JavaScript': 'JavaScript',
            'TypeScript': 'TypeScript',
            'React': 'React',
            'Vue': 'Vue',
            'Node.js': 'Node.js',
            'GitHub': 'GitHub',
            'Docker': 'Docker',
            'Kubernetes': 'Kubernetes',
            'DevOps': 'DevOps',
            'CI/CD': 'CI/CD',
            'Material Design': 'Material Design',
            'MkDocs': 'MkDocs',
            'Markdown': 'Markdown',
            'AI': 'äººå·¥çŸ¥èƒ½',
            'Machine Learning': 'æ©Ÿæ¢°å­¦ç¿’',
            'Deep Learning': 'ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°',
            'Database': 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹',
            'Frontend': 'ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰',
            'Backend': 'ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰',
            'Full Stack': 'ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯'
          }
        };
        
        // å…¨å±€çŠ¶æ€ç®¡ç†
        let currentLanguage = 'chinese_simplified';
        let originalTexts = new Map();
        let translationCache = new Map();
        let isTranslating = false;
        let activeRequests = 0;
        let lastUrl = window.location.href;
        let pageTranslationStates = new Map();
        let globalTranslationPreference = null;
        let navigationDialogShown = false; // é˜²æ­¢å¯¼èˆªå¼¹çª—é‡å¤æ˜¾ç¤º
        
        // ç¿»è¯‘ä¸­æ–­æ§åˆ¶
        let translationAbortController = null;
        let shouldCancelTranslation = false;
        
        // ç¿»è¯‘ä¸­æ–­å‡½æ•° - è¿”å›Promiseç¡®ä¿ä¸­æ–­å®Œæˆ
        function cancelCurrentTranslation(reason = 'ç”¨æˆ·å–æ¶ˆ') {
          return new Promise((resolve) => {
            console.log(`ğŸ›‘ ä¸­æ–­ç¿»è¯‘: ${reason}`);
            
            // è®¾ç½®ä¸­æ–­æ ‡å¿—
            shouldCancelTranslation = true;
            
            // ä¸­æ–­AbortController
            if (translationAbortController) {
              translationAbortController.abort();
              translationAbortController = null;
            }
            
            // ä¸­æ–­Web Workers
            if (TranslationWorkerManager && TranslationWorkerManager.workers) {
              TranslationWorkerManager.workers.forEach(({ worker }) => {
                try {
                  worker.terminate();
                } catch (e) {
                  console.warn('ä¸­æ–­Workerå¤±è´¥:', e);
                }
              });
              // é‡æ–°åˆå§‹åŒ–Workers
              setTimeout(() => {
                try {
                  TranslationWorkerManager.init();
                } catch (e) {
                  console.warn('é‡æ–°åˆå§‹åŒ–Workerså¤±è´¥:', e);
                }
              }, 100);
            }
            
            // å¦‚æœæ˜¯å› ä¸ºç”¨æˆ·åˆ‡æ¢åˆ°ä¸­æ–‡è€Œä¸­æ–­ï¼Œç«‹å³æ¢å¤åŸæ–‡
            if (reason.includes('ç”¨æˆ·åˆ‡æ¢åˆ°ä¸­æ–‡') || reason.includes('ç”¨æˆ·æ‰‹åŠ¨ä¸­æ–­')) {
              console.log('ğŸ”„ ä¸­æ–­æ—¶ç«‹å³æ¢å¤åŸæ–‡');
              
              // å°è¯•ä½¿ç”¨åŸå§‹æ–‡æœ¬æ˜ å°„æ¢å¤
              if (originalTexts.size > 0) {
                let restoredCount = 0;
                originalTexts.forEach((originalText, node) => {
                  if (node && node.parentNode && originalText && document.contains(node)) {
                    try {
                      node.textContent = originalText;
                      // æ¸…ç†ç¿»è¯‘æ ‡è®°
                      node.removeAttribute('data-translated');
                      node.removeAttribute('data-original-text');
                      node.removeAttribute('data-target-lang');
                      restoredCount++;
                    } catch (e) {
                      console.warn('æ¢å¤å•ä¸ªèŠ‚ç‚¹å¤±è´¥:', e);
                    }
                  }
                });
                console.log(`âœ… ä¸­æ–­æ—¶æ¢å¤äº† ${restoredCount}/${originalTexts.size} ä¸ªæ–‡æœ¬èŠ‚ç‚¹`);
              }
              
              // æ¸…ç†æ‰€æœ‰å‰©ä½™çš„ç¿»è¯‘æ ‡è®°
              const translatedElements = document.querySelectorAll('[data-translated]');
              if (translatedElements.length > 0) {
                let cleanedCount = 0;
                translatedElements.forEach(element => {
                  try {
                    const originalText = element.getAttribute('data-original-text');
                    if (originalText) {
                      element.textContent = originalText;
                      cleanedCount++;
                    }
                    element.removeAttribute('data-translated');
                    element.removeAttribute('data-original-text');
                    element.removeAttribute('data-target-lang');
                  } catch (e) {
                    console.warn('æ¸…ç†å•ä¸ªå…ƒç´ å¤±è´¥:', e);
                  }
                });
                console.log(`ğŸ§¹ ä¸­æ–­æ—¶æ¸…ç†äº† ${cleanedCount} ä¸ªç¿»è¯‘æ ‡è®°`);
              }
            }
            
            // æ¸…é™¤çŠ¶æ€æ˜¾ç¤º
            const existingStatus = document.getElementById('translate-status');
            if (existingStatus) {
              existingStatus.remove();
            }
            
            // é‡ç½®ç¿»è¯‘çŠ¶æ€
            isTranslating = false;
            activeRequests = 0;
            
            console.log('âœ… ç¿»è¯‘å·²ä¸­æ–­');
            
            // ç¡®ä¿çŠ¶æ€é‡ç½®å®Œæˆåå†ç»§ç»­
            setTimeout(resolve, 50);
          });
        }
        let contextCache = new Map();
        let semanticCache = new Map();
        
        // ç¿»è¯‘è´¨é‡åˆ†æå™¨
        const TranslationQualityAnalyzer = {
          // è®¡ç®—æ–‡æœ¬ç›¸ä¼¼åº¦
          calculateSimilarity: function(text1, text2) {
            const words1 = text1.toLowerCase().split(/\s+/);
            const words2 = text2.toLowerCase().split(/\s+/);
            const allWords = new Set([...words1, ...words2]);
            
            let matches = 0;
            for (const word of allWords) {
              if (words1.includes(word) && words2.includes(word)) {
                matches++;
              }
            }
            
            return matches / allWords.size;
          },
          
          // æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯­ä¹‰ç›¸ä¼¼çš„ç¿»è¯‘
          findSimilarTranslation: function(text, targetLang) {
            const cacheKey = `${targetLang}_semantic`;
            if (!semanticCache.has(cacheKey)) {
              return null;
            }
            
            const similarTranslations = semanticCache.get(cacheKey);
            for (const [originalText, translatedText] of similarTranslations) {
              const similarity = this.calculateSimilarity(text, originalText);
              if (similarity > 0.8) { // 80%ç›¸ä¼¼åº¦é˜ˆå€¼
                console.log(`ğŸ”„ æ‰¾åˆ°è¯­ä¹‰ç›¸ä¼¼ç¿»è¯‘ (ç›¸ä¼¼åº¦: ${(similarity * 100).toFixed(1)}%):`, originalText, '->', translatedText);
                return translatedText;
              }
            }
            
            return null;
          },
          
          // ä¿å­˜è¯­ä¹‰ç¿»è¯‘
          saveSimilarTranslation: function(originalText, translatedText, targetLang) {
            const cacheKey = `${targetLang}_semantic`;
            if (!semanticCache.has(cacheKey)) {
              semanticCache.set(cacheKey, new Map());
            }
            
            const similarTranslations = semanticCache.get(cacheKey);
            similarTranslations.set(originalText, translatedText);
            
            // é™åˆ¶è¯­ä¹‰ç¼“å­˜å¤§å°
            if (similarTranslations.size > 500) {
              const entries = Array.from(similarTranslations.entries());
              similarTranslations.clear();
              entries.slice(-400).forEach(([key, value]) => {
                similarTranslations.set(key, value);
              });
            }
          },
          
          // ä¸“ä¸šæœ¯è¯­æ›¿æ¢
          replaceTechnicalTerms: function(text, sourceLang, targetLang) {
            if (!TECHNICAL_TERMS[sourceLang] || !TECHNICAL_TERMS[targetLang]) {
              return text;
            }
            
            let processedText = text;
            const sourceTerms = TECHNICAL_TERMS[sourceLang];
            const targetTerms = TECHNICAL_TERMS[targetLang];
            
            // æ›¿æ¢ä¸“ä¸šæœ¯è¯­
            for (const [sourceTerm, standardTerm] of Object.entries(sourceTerms)) {
              if (targetTerms[standardTerm]) {
                const regex = new RegExp(`\\b${sourceTerm.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}\\b`, 'gi');
                processedText = processedText.replace(regex, targetTerms[standardTerm]);
              }
            }
            
            return processedText;
          }
        };
        
        // ç²¾ç¡®çš„å¿½ç•¥é€‰æ‹©å™¨ - é˜²æ­¢ç¿»è¯‘ç•Œé¢å…ƒç´ 
        const IGNORE_SELECTORS = [
          '.footer-highlight', '.md-footer-copyright', '.hljs', 'code', 'pre',
          'script', 'style', '[data-no-translate]', '.icp-link', '.runtime-info',
          // MkDocsç•Œé¢å…ƒç´ 
          '.md-header__option', '.md-select', '.md-select__inner', '.md-select__list',
          '.md-select__item', '.md-select__link', '.md-header__button[for="__select"]',
          '.md-header__source', '[data-md-component="palette"]', '[data-md-component="search"]',
          '[data-md-component="select"]', '[data-md-component="header"] .md-header__option',
          '.md-header__title', '[data-md-component="source"]', '.md-source',
          // é¡µè„šä¸“ç”¨é€‰æ‹©å™¨
          '.footer-visit-count', '.footer-visit-count-mobile', '.footer-social',
          '#finicount_views', '#finicount_views_mobile', '#box1', '#box1_mobile'
        ];
        
        // æ™ºèƒ½ç¼“å­˜ç®¡ç†
        const CACHE_MAX_SIZE = 2000;
        const CACHE_MAX_AGE = 14 * 24 * 60 * 60 * 1000; // 14å¤©è¿‡æœŸ
        const STORAGE_PREFIX = 'glm_translate_';
        
        // åˆå§‹åŒ–æŒä¹…åŒ–ç¼“å­˜
        function initPersistentCache() {
          try {
            console.log('ğŸš€ åˆå§‹åŒ–GLMç¿»è¯‘ç¼“å­˜ç³»ç»Ÿ...');
            
            // åŠ è½½ç¿»è¯‘ç¼“å­˜
            const cached = localStorage.getItem(STORAGE_PREFIX + 'cache');
            if (cached) {
              try {
                const parsedCache = JSON.parse(cached);
                if (parsedCache && typeof parsedCache === 'object') {
                  const now = Date.now();
                  
                  Object.entries(parsedCache).forEach(([key, value]) => {
                    if (key && typeof key === 'string') {
                      if (typeof value === 'object' && value.timestamp && value.text) {
                        if (now - value.timestamp < CACHE_MAX_AGE) {
                          translationCache.set(key, value.text);
                        }
                      } else if (typeof value === 'string') {
                        translationCache.set(key, value);
                      }
                    }
                  });
                  console.log(`ğŸ“¦ å·²åŠ è½½ ${translationCache.size} æ¡ç¿»è¯‘ç¼“å­˜`);
                }
              } catch (e) {
                console.warn('ç¼“å­˜è§£æå¤±è´¥:', e);
                localStorage.removeItem(STORAGE_PREFIX + 'cache');
              }
            }
            
            // æ¢å¤å…¨å±€ç¿»è¯‘åå¥½
            const savedPreference = localStorage.getItem(STORAGE_PREFIX + 'preference');
            if (savedPreference) {
              try {
                let preference = savedPreference;
                if (savedPreference.startsWith('"') && savedPreference.endsWith('"')) {
                  preference = JSON.parse(savedPreference);
                }
                
                if (preference && typeof preference === 'string' && LANGUAGE_MAP[preference]) {
                  globalTranslationPreference = preference;
                  console.log(`ğŸŒ å·²åŠ è½½å…¨å±€ç¿»è¯‘åå¥½: ${LANGUAGE_MAP[preference]}`);
                } else {
                  localStorage.removeItem(STORAGE_PREFIX + 'preference');
                }
              } catch (e) {
                console.warn('å…¨å±€åå¥½è§£æå¤±è´¥:', e);
                localStorage.removeItem(STORAGE_PREFIX + 'preference');
              }
            }
            
            // æ¢å¤é¡µé¢ç¿»è¯‘çŠ¶æ€
            const savedStates = localStorage.getItem(STORAGE_PREFIX + 'states');
            if (savedStates) {
              try {
                const states = JSON.parse(savedStates);
                if (states && typeof states === 'object') {
                  const now = Date.now();
                  let validStatesCount = 0;
                  
                  Object.entries(states).forEach(([url, state]) => {
                    if (url && state && typeof url === 'string' && 
                        state.language && state.timestamp && 
                        LANGUAGE_MAP[state.language]) {
                      if (now - state.timestamp < CACHE_MAX_AGE) {
                        pageTranslationStates.set(url, state);
                        validStatesCount++;
                      }
                    }
                  });
                  
                  console.log(`ğŸ“„ å·²åŠ è½½ ${validStatesCount} ä¸ªé¡µé¢ç¿»è¯‘çŠ¶æ€`);
                  
                  if (validStatesCount === 0 && Object.keys(states).length > 0) {
                    localStorage.removeItem(STORAGE_PREFIX + 'states');
                  }
                }
              } catch (e) {
                console.warn('é¡µé¢çŠ¶æ€è§£æå¤±è´¥:', e);
                localStorage.removeItem(STORAGE_PREFIX + 'states');
              }
            }
            
          } catch (error) {
            console.warn('ç¼“å­˜åˆå§‹åŒ–å¤±è´¥:', error);
            translationCache.clear();
            pageTranslationStates.clear();
            globalTranslationPreference = null;
            try {
              [STORAGE_PREFIX + 'cache', STORAGE_PREFIX + 'preference', STORAGE_PREFIX + 'states'].forEach(key => {
                localStorage.removeItem(key);
              });
            } catch (e) {
              console.warn('æ¸…ç†ç¼“å­˜å¤±è´¥:', e);
            }
          }
        }
        
        // ä¿å­˜æŒä¹…åŒ–ç¼“å­˜
        function savePersistentCache() {
          try {
            if (translationCache.size > CACHE_MAX_SIZE) {
              const entries = Array.from(translationCache.entries());
              translationCache.clear();
              const keepCount = Math.floor(CACHE_MAX_SIZE * 0.8);
              entries.slice(-keepCount).forEach(([key, value]) => {
                translationCache.set(key, value);
              });
              console.log(`ğŸ§¹ ç¼“å­˜å·²æ¸…ç†ï¼Œä¿ç•™ ${translationCache.size} æ¡è®°å½•`);
            }
            
            // ä¿å­˜ç¿»è¯‘ç¼“å­˜
            if (translationCache.size > 0) {
              const cacheObj = {};
              const now = Date.now();
              translationCache.forEach((value, key) => {
                if (key && value && typeof key === 'string' && typeof value === 'string') {
                  cacheObj[key] = { text: value, timestamp: now };
                }
              });
              
              if (Object.keys(cacheObj).length > 0) {
                localStorage.setItem(STORAGE_PREFIX + 'cache', JSON.stringify(cacheObj));
              }
            } else {
              localStorage.removeItem(STORAGE_PREFIX + 'cache');
            }
            
            // ä¿å­˜å…¨å±€ç¿»è¯‘åå¥½
            if (globalTranslationPreference && LANGUAGE_MAP[globalTranslationPreference]) {
              localStorage.setItem(STORAGE_PREFIX + 'preference', JSON.stringify(globalTranslationPreference));
            } else {
              localStorage.removeItem(STORAGE_PREFIX + 'preference');
            }
            
            // ä¿å­˜é¡µé¢ç¿»è¯‘çŠ¶æ€
            if (pageTranslationStates.size > 0) {
              const statesData = {};
              const now = Date.now();
              
              pageTranslationStates.forEach((state, url) => {
                if (url && state && typeof url === 'string' && 
                    state.language && LANGUAGE_MAP[state.language] &&
                    now - state.timestamp < CACHE_MAX_AGE) {
                  statesData[url] = state;
                }
              });
              
              if (Object.keys(statesData).length > 0) {
                localStorage.setItem(STORAGE_PREFIX + 'states', JSON.stringify(statesData));
              } else {
                localStorage.removeItem(STORAGE_PREFIX + 'states');
              }
            } else {
              localStorage.removeItem(STORAGE_PREFIX + 'states');
            }
            
          } catch (error) {
            if (error.name === 'QuotaExceededError') {
              console.warn('å­˜å‚¨ç©ºé—´ä¸è¶³ï¼Œæ‰§è¡Œæ¸…ç†æ“ä½œ');
              try {
                translationCache.clear();
                localStorage.removeItem(STORAGE_PREFIX + 'cache');
                
                const now = Date.now();
                const validStates = new Map();
                pageTranslationStates.forEach((state, url) => {
                  if (now - state.timestamp < CACHE_MAX_AGE / 2) {
                    validStates.set(url, state);
                  }
                });
                pageTranslationStates.clear();
                validStates.forEach((state, url) => pageTranslationStates.set(url, state));
                
                if (pageTranslationStates.size > 0) {
                  const statesData = Object.fromEntries(pageTranslationStates);
                  localStorage.setItem(STORAGE_PREFIX + 'states', JSON.stringify(statesData));
                } else {
                  localStorage.removeItem(STORAGE_PREFIX + 'states');
                }
                
                console.log('âœ… å­˜å‚¨ç©ºé—´æ¸…ç†å®Œæˆ');
              } catch (cleanupError) {
                console.warn('æ¸…ç†æ“ä½œå¤±è´¥:', cleanupError);
              }
            } else {
              console.warn('ç¼“å­˜ä¿å­˜å¤±è´¥:', error);
            }
          }
        }
        
        // æ™ºèƒ½æ–‡æœ¬æ£€æµ‹ - æå‡ç¿»è¯‘ç²¾åº¦ï¼Œå‡å°‘å¤±è´¥
        function shouldTranslateText(text) {
          if (!text || text.length < 2 || text.length > 800) return false;
          
          // å¿«é€Ÿè·³è¿‡æ˜æ˜¾ä¸éœ€è¦ç¿»è¯‘çš„å†…å®¹
          if (/^[\d\s\-_.,!?()\[\]{}:;"'`~#$%^&*+=|\\\/<>]+$/.test(text)) return false;
          
          // è·³è¿‡URLã€é‚®ç®±ã€æ—¥æœŸæ ¼å¼
          if (/^https?:\/\/|@.*\.|\d{4}-\d{2}-\d{2}|\d{1,2}[:\/]\d{1,2}/.test(text)) return false;
          
          // è·³è¿‡ç‰ˆæœ¬å·å’ŒæŠ€æœ¯æ ‡è¯†ç¬¦
          if (/^v?\d+\.\d+(\.\d+)?(-\w+)?$/.test(text)) return false;
          if (/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(text) && text.length < 30) return false;
          if (/^[A-Z_][A-Z0-9_]*$/.test(text)) return false; // å¸¸é‡å
          
          // è·³è¿‡å¸¸è§æŠ€æœ¯æœ¯è¯­å’Œç¼–ç¨‹æ ‡è¯†ç¬¦
          const technicalTerms = [
            'GitHub', 'API', 'JSON', 'HTML', 'CSS', 'JavaScript', 'Python', 'Material', 'MkDocs',
            'React', 'Vue', 'Docker', 'npm', 'yarn', 'webpack', 'TypeScript', 'Markdown',
            'Git', 'Linux', 'Windows', 'macOS', 'iOS', 'Android', 'Chrome', 'Firefox',
            'UTF-8', 'HTTP', 'HTTPS', 'URL', 'SEO', 'RSS', 'XML', 'YAML', 'OK', 'ERROR'
          ];
          
          if (technicalTerms.includes(text.trim())) return false;
          
          // è·³è¿‡çº¯è‹±æ–‡å•è¯ï¼ˆå¯èƒ½æ˜¯å·²ç»ç¿»è¯‘çš„å†…å®¹æˆ–ä¸“ä¸šæœ¯è¯­ï¼‰
          if (/^[a-zA-Z\s]+$/.test(text) && text.split(/\s+/).every(word => 
            word.length < 20 && !/[\u4e00-\u9fff]/.test(word)
          )) {
            // ä½†ä¿ç•™æ˜æ˜¾çš„ä¸­å¼è‹±æ–‡æˆ–éœ€è¦ç¿»è¯‘çš„çŸ­è¯­
            const commonChineseEnglish = ['Hello', 'Welcome', 'About', 'Contact', 'Home', 'Blog'];
            if (!commonChineseEnglish.some(term => text.includes(term)) && text.length < 50) {
              return false;
            }
          }
          
          // è·³è¿‡çº¯æ•°å­—å’Œç¬¦å·ç»„åˆ
          if (/^[\d\s\-+*/=().,]+$/.test(text)) return false;
          
          // è·³è¿‡æ–‡ä»¶è·¯å¾„å’Œä»£ç ç‰‡æ®µ
          if (/^[\w\-/.]+\.(js|css|html|py|md|txt|json|yml|yaml)$/i.test(text)) return false;
          if (/^import\s|^from\s|^class\s|^function\s|^const\s|^let\s|^var\s/.test(text)) return false;
          
          // æ£€æŸ¥æ˜¯å¦åŒ…å«ä¸­æ–‡å­—ç¬¦ï¼ˆä¸»è¦ç¿»è¯‘ç›®æ ‡ï¼‰
          const hasChinese = /[\u4e00-\u9fff]/.test(text);
          
          // åŒ…å«ä¸­æ–‡çš„å†…å®¹ä¼˜å…ˆç¿»è¯‘
          if (hasChinese) return true;
          
          // è‹±æ–‡å†…å®¹çš„è¿›ä¸€æ­¥ç­›é€‰
          if (/^[a-zA-Z\s\-'.,!?]+$/.test(text)) {
            // è·³è¿‡è¿‡çŸ­çš„è‹±æ–‡ï¼ˆå¯èƒ½æ˜¯æ ‡ç­¾æˆ–æŒ‰é’®ï¼‰
            if (text.length < 6) return false;
            
            // ä¿ç•™åŒ…å«å¤šä¸ªå•è¯çš„æœ‰æ„ä¹‰å¥å­
            const words = text.trim().split(/\s+/);
            if (words.length >= 3 && text.length >= 10) return true;
            
            // è·³è¿‡å…¶ä»–è‹±æ–‡å†…å®¹
            return false;
          }
          
          return true;
        }
        
        // ç¿»è¯‘è´¨é‡éªŒè¯å’Œæ¸…ç† - å¢å¼ºç‰ˆ
        function validateAndCleanTranslation(originalText, translatedText, targetLang) {
          let cleanedText = translatedText
            .replace(/^["'`]+|["'`]+$/g, '')
            .replace(/\n+/g, ' ')
            .replace(/^\s+|\s+$/g, '')
            .trim();
          
          if (!cleanedText || cleanedText.trim() === '') {
            console.warn('âŒ ç¿»è¯‘ç»“æœä¸ºç©º');
            return originalText;
          }
          
          // é•¿åº¦åˆç†æ€§æ£€æŸ¥ - æ›´ä¸¥æ ¼
          const lengthRatio = cleanedText.length / originalText.length;
          if (lengthRatio > 12 || lengthRatio < 0.05) {
            console.warn(`âŒ ç¿»è¯‘é•¿åº¦å¼‚å¸¸: åŸæ–‡${originalText.length}å­—ç¬¦, è¯‘æ–‡${cleanedText.length}å­—ç¬¦, æ¯”ä¾‹${lengthRatio.toFixed(2)}`);
            return originalText;
          }
          
          // æ£€æŸ¥æ˜¯å¦åŒ…å«æ˜æ˜¾çš„é”™è¯¯æ ‡è®°
          const errorPatterns = [
            /\[ç¿»è¯‘é”™è¯¯\]/i, /\[ERROR\]/i, /\[TRANSLATION[_\s]ERROR\]/i,
            /^(Sorry|æŠ±æ­‰|æ— æ³•ç¿»è¯‘|Cannot translate)/i,
            /^(I cannot|I'm unable|Unable to)/i,
            /^(ä½œä¸ºAI|ä½œä¸ºè¯­è¨€æ¨¡å‹|As an AI)/i,
            /\[æ³¨ï¼š/, /\[Note:/i, /\[æç¤ºï¼š/i,
            /^(Translation|ç¿»è¯‘)[:ï¼š]/i,
            /^(Here is|è¿™æ˜¯)/i
          ];
          
          for (const pattern of errorPatterns) {
            if (pattern.test(cleanedText)) {
              console.warn('âŒ æ£€æµ‹åˆ°ç¿»è¯‘é”™è¯¯æ ‡è®°ï¼Œè¿”å›åŸæ–‡');
              return originalText;
            }
          }
          
          // æ£€æŸ¥æ˜¯å¦åŒ…å«è¿‡å¤šåŸæ–‡å†…å®¹
          if (originalText.length > 10) {
            const originalWords = originalText.toLowerCase().split(/\s+/);
            const translatedWords = cleanedText.toLowerCase().split(/\s+/);
            let commonWords = 0;
            
            originalWords.forEach(word => {
              if (word.length > 2 && translatedWords.includes(word)) {
                commonWords++;
              }
            });
            
            const commonRatio = commonWords / Math.max(originalWords.length, 1);
            if (commonRatio > 0.7 && cleanedText.length < originalText.length * 1.3) {
              console.warn(`âŒ ç¿»è¯‘åŒ…å«è¿‡å¤šåŸæ–‡å†…å®¹ (${(commonRatio * 100).toFixed(1)}%)`);
              return originalText;
            }
          }
          
          // ç‰¹å®šè¯­è¨€çš„è´¨é‡æ£€æŸ¥
          if (targetLang === 'english') {
            // æ£€æŸ¥è‹±æ–‡ç¿»è¯‘è´¨é‡
            if (!/[a-zA-Z]/.test(cleanedText)) {
              console.warn('âŒ è‹±æ–‡ç¿»è¯‘ä¸åŒ…å«è‹±æ–‡å­—ç¬¦');
              return originalText;
            }
            
            // æ£€æŸ¥æ˜¯å¦è¿˜åŒ…å«å¤§é‡ä¸­æ–‡å­—ç¬¦
            const chineseChars = (cleanedText.match(/[\u4e00-\u9fff]/g) || []).length;
            if (chineseChars > cleanedText.length * 0.3) {
              console.warn('âŒ è‹±æ–‡ç¿»è¯‘åŒ…å«è¿‡å¤šä¸­æ–‡å­—ç¬¦');
              return originalText;
            }
          } else if (targetLang === 'korean') {
            // æ£€æŸ¥éŸ©æ–‡ç¿»è¯‘è´¨é‡
            if (!/[ã„±-ã…ê°€-í£]/.test(cleanedText)) {
              console.warn('âŒ éŸ©æ–‡ç¿»è¯‘ä¸åŒ…å«éŸ©æ–‡å­—ç¬¦');
              return originalText;
            }
          } else if (targetLang === 'japanese') {
            // æ£€æŸ¥æ—¥æ–‡ç¿»è¯‘è´¨é‡
            if (!/[ã²ã‚‰ãŒãªã‚«ã‚¿ã‚«ãƒŠä¸€-é¾¯]/.test(cleanedText)) {
              console.warn('âŒ æ—¥æ–‡ç¿»è¯‘ä¸åŒ…å«æ—¥æ–‡å­—ç¬¦');
              return originalText;
            }
          }
          
          // æ£€æŸ¥ç¿»è¯‘æ˜¯å¦åˆç† - é¿å…è¿‡äºç®€å•çš„é‡å¤
          if (cleanedText.length < 3 && originalText.length > 10) {
            console.warn('âŒ ç¿»è¯‘ç»“æœè¿‡äºç®€çŸ­');
            return originalText;
          }
          
          // æœ€ç»ˆéªŒè¯é€šè¿‡
          console.log(`âœ… ç¿»è¯‘è´¨é‡éªŒè¯é€šè¿‡: "${originalText.substring(0, 30)}..." -> "${cleanedText.substring(0, 30)}..."`);
          return cleanedText;
        }
        
        // é«˜è´¨é‡GLMç¿»è¯‘å‡½æ•° - å¢å¼ºç‰ˆï¼ˆæ”¯æŒä¸­æ–­ï¼‰
        async function translateWithGLM(text, targetLang, context = null) {
          // å‚æ•°éªŒè¯
          if (!text || typeof text !== 'string' || text.trim().length === 0) {
            console.warn('âŒ ç¿»è¯‘æ–‡æœ¬ä¸ºç©ºæˆ–æ— æ•ˆ');
            return text || '';
          }
          
          if (!targetLang || !LANGUAGE_MAP[targetLang]) {
            console.warn(`âŒ ç›®æ ‡è¯­è¨€æ— æ•ˆ: ${targetLang}`);
            return text;
          }
          
          // æ£€æŸ¥æ˜¯å¦åº”è¯¥ä¸­æ–­
          if (shouldCancelTranslation || translationAbortController?.signal?.aborted) {
            console.log('ğŸ›‘ ç¿»è¯‘è¯·æ±‚è¢«ä¸­æ–­');
            return text;
          }
          
          // é¦–å…ˆæ£€æŸ¥æ ‡å‡†ç¼“å­˜
          const cacheKey = `${text.trim()}_${targetLang}`;
          if (translationCache.has(cacheKey)) {
            return translationCache.get(cacheKey);
          }
          
          // æ£€æŸ¥è¯­ä¹‰ç›¸ä¼¼ç¿»è¯‘
          const similarTranslation = TranslationQualityAnalyzer.findSimilarTranslation(text, targetLang);
          if (similarTranslation) {
            translationCache.set(cacheKey, similarTranslation);
            return similarTranslation;
          }
          
          if (!shouldTranslateText(text)) {
            translationCache.set(cacheKey, text);
            return text;
          }
          
          // ä¸“ä¸šæœ¯è¯­é¢„å¤„ç†
          const processedText = TranslationQualityAnalyzer.replaceTechnicalTerms(text, 'chinese_simplified', targetLang);
          if (processedText !== text) {
            console.log(`ğŸ”§ ä¸“ä¸šæœ¯è¯­æ›¿æ¢: "${text}" -> "${processedText}"`);
            translationCache.set(cacheKey, processedText);
            return processedText;
          }
          
          while (activeRequests >= GLM_CONFIG.maxConcurrent) {
            // åœ¨ç­‰å¾…æ—¶ä¹Ÿæ£€æŸ¥ä¸­æ–­
            if (shouldCancelTranslation || translationAbortController?.signal?.aborted) {
              console.log('ğŸ›‘ ç­‰å¾…æœŸé—´ç¿»è¯‘è¢«ä¸­æ–­');
              return text;
            }
            await new Promise(resolve => setTimeout(resolve, 10));
          }
          
          activeRequests++;
          
          const targetLanguage = LANGUAGE_MAP[targetLang] || targetLang;
          const textLength = text.length;
          
          // æ„å»ºä¸Šä¸‹æ–‡æ„ŸçŸ¥çš„æç¤ºè¯
          let prompt;
          let contextInfo = '';
          
          if (context && context.previousText) {
            contextInfo = `\nä¸Šä¸‹æ–‡ï¼šå‰æ–‡æåˆ°"${context.previousText}"`;
          }
          
          if (targetLang === 'english') {
            prompt = textLength < 30 
              ? `Translate to natural English: "${text}"`
              : `Translate this Chinese text to natural, fluent English. Consider the context and maintain consistency with technical terms.${contextInfo}\n\nText to translate: ${text}`;
          } else if (targetLang === 'korean') {
            prompt = textLength < 30
              ? `ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´ë¡œ ë²ˆì—­: "${text}"`
              : `ë‹¤ìŒ ì¤‘êµ­ì–´ í…ìŠ¤íŠ¸ë¥¼ ìì—°ìŠ¤ëŸ½ê³  ìœ ì°½í•œ í•œêµ­ì–´ë¡œ ë²ˆì—­í•´ì£¼ì„¸ìš”. ë§¥ë½ì„ ê³ ë ¤í•˜ê³  ì „ë¬¸ ìš©ì–´ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•´ì£¼ì„¸ìš”.${contextInfo}\n\në²ˆì—­í•  í…ìŠ¤íŠ¸: ${text}`;
          } else if (targetLang === 'japanese') {
            prompt = textLength < 30
              ? `è‡ªç„¶ãªæ—¥æœ¬èªã«ç¿»è¨³: "${text}"`
              : `ä»¥ä¸‹ã®ä¸­å›½èªãƒ†ã‚­ã‚¹ãƒˆã‚’è‡ªç„¶ã§æµæš¢ãªæ—¥æœ¬èªã«ç¿»è¨³ã—ã¦ãã ã•ã„ã€‚æ–‡è„ˆã‚’è€ƒæ…®ã—ã€å°‚é–€ç”¨èªã®ä¸€è²«æ€§ã‚’ä¿ã£ã¦ãã ã•ã„ã€‚${contextInfo}\n\nç¿»è¨³ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆï¼š${text}`;
          } else {
            prompt = `è¯·å°†ä»¥ä¸‹ä¸­æ–‡ç¿»è¯‘ä¸ºè‡ªç„¶æµç•…çš„${targetLanguage}ã€‚è€ƒè™‘ä¸Šä¸‹æ–‡ï¼Œä¿æŒä¸“ä¸šæœ¯è¯­çš„ä¸€è‡´æ€§ã€‚${contextInfo}\n\nå¾…ç¿»è¯‘æ–‡æœ¬ï¼š${text}`;
          }
          
          // æ™ºèƒ½é‡è¯•æœºåˆ¶ï¼ˆæ”¯æŒä¸­æ–­ï¼‰
          for (let attempt = 0; attempt < GLM_CONFIG.maxRetries; attempt++) {
            try {
              // æ£€æŸ¥ä¸­æ–­
              if (shouldCancelTranslation || translationAbortController?.signal?.aborted) {
                console.log('ğŸ›‘ ç¿»è¯‘é‡è¯•è¿‡ç¨‹ä¸­è¢«ä¸­æ–­');
                activeRequests--;
                return text;
              }
              
              // ä½¿ç”¨å…¨å±€ä¸­æ–­æ§åˆ¶å™¨ï¼Œå¦‚æœå­˜åœ¨çš„è¯
              const controller = translationAbortController || new AbortController();
              const timeoutId = setTimeout(() => controller.abort(), GLM_CONFIG.timeout);
              
              const requestBody = {
                model: GLM_CONFIG.model,
                messages: [{ role: 'user', content: prompt }],
                temperature: 0.1,
                max_tokens: Math.min(Math.max(textLength * 2, 50), 500),
                top_p: 0.95,
                frequency_penalty: 0.0,
                presence_penalty: 0.0,
                stream: false
              };
              
              const response = await fetch(GLM_CONFIG.endpoint, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                  'Authorization': `Bearer ${GLM_CONFIG.apiKey}`
                },
                body: JSON.stringify(requestBody),
                signal: controller.signal
              });
              
              clearTimeout(timeoutId);
              
              if (!response.ok) {
                const errorText = await response.text();
                throw new Error(`API error ${response.status}: ${errorText}`);
              }
              
              const data = await response.json();
              const translatedText = data.choices?.[0]?.message?.content?.trim();
              
              if (translatedText) {
                const cleanedText = validateAndCleanTranslation(text, translatedText, targetLang);
                
                if (cleanedText && cleanedText !== text) {
                  // ä¿å­˜åˆ°æ ‡å‡†ç¼“å­˜
                  translationCache.set(cacheKey, cleanedText);
                  
                  // ä¿å­˜åˆ°è¯­ä¹‰ç¼“å­˜
                  TranslationQualityAnalyzer.saveSimilarTranslation(text, cleanedText, targetLang);
                  
                  if (translationCache.size % 100 === 0) {
                    setTimeout(savePersistentCache, 1000);
                  }
                  
                  activeRequests--;
                  return cleanedText;
                }
              }
              
              throw new Error('ç©ºç¿»è¯‘ç»“æœ');
              
            } catch (error) {
              // å¦‚æœæ˜¯ä¸­æ–­é”™è¯¯ï¼Œç›´æ¥è¿”å›
              if (error.name === 'AbortError' || shouldCancelTranslation) {
                console.log('ğŸ›‘ ç¿»è¯‘APIè¯·æ±‚è¢«ä¸­æ–­');
                activeRequests--;
                return text;
              }
              
              console.warn(`ç¿»è¯‘å°è¯• ${attempt + 1}/${GLM_CONFIG.maxRetries} å¤±è´¥:`, error.message);
              
              if (attempt === GLM_CONFIG.maxRetries - 1) {
                activeRequests--;
                return text;
              }
              
              await new Promise(resolve => setTimeout(resolve, 500 * Math.pow(2, attempt)));
            }
          }
          
          activeRequests--;
          return text;
        }
        
        // Web Worker ç¿»è¯‘ç®¡ç†å™¨
        const TranslationWorkerManager = {
          workers: [],
          taskQueue: [],
          maxWorkers: Math.min(navigator.hardwareConcurrency || 4, 4),
          workerScript: null,
          
          // åˆå§‹åŒ– Worker
          init: function() {
            if (this.workers.length > 0) return;
            
            // åˆ›å»º Worker è„šæœ¬
            const workerCode = `
              let translationCache = new Map();
              let activeRequests = 0;
              const maxConcurrent = 2;
              
              const GLM_CONFIG = {
                endpoint: 'https://open.bigmodel.cn/api/paas/v4/chat/completions',
                model: 'glm-4-flash',
                maxRetries: 3,
                timeout: 8000,
                apiKey: '46ad7781e9fa44cb9b31d11a9696da89.GCUpkep25U5Y6vBg'
              };
              
              async function translateText(text, targetLang, context) {
                const cacheKey = \`\${text}_\${targetLang}\`;
                if (translationCache.has(cacheKey)) {
                  return translationCache.get(cacheKey);
                }
                
                while (activeRequests >= maxConcurrent) {
                  await new Promise(resolve => setTimeout(resolve, 10));
                }
                
                activeRequests++;
                
                try {
                  const controller = new AbortController();
                  const timeoutId = setTimeout(() => controller.abort(), GLM_CONFIG.timeout);
                  
                  let prompt;
                  const targetLanguageMap = {
                    'english': 'English',
                    'korean': 'í•œêµ­ì–´',
                    'japanese': 'æ—¥æœ¬èª'
                  };
                  
                  const targetLanguage = targetLanguageMap[targetLang] || targetLang;
                  let contextInfo = context ? \`\\nä¸Šä¸‹æ–‡ï¼šå‰æ–‡æåˆ°"\${context}"\` : '';
                  
                  if (targetLang === 'english') {
                    prompt = \`Translate this Chinese text to natural, fluent English. Consider the context and maintain consistency.\${contextInfo}\\n\\nText: \${text}\`;
                  } else if (targetLang === 'korean') {
                    prompt = \`ë‹¤ìŒ ì¤‘êµ­ì–´ í…ìŠ¤íŠ¸ë¥¼ ìì—°ìŠ¤ëŸ½ê³  ìœ ì°½í•œ í•œêµ­ì–´ë¡œ ë²ˆì—­í•´ì£¼ì„¸ìš”.\${contextInfo}\\n\\ní…ìŠ¤íŠ¸: \${text}\`;
                  } else if (targetLang === 'japanese') {
                    prompt = \`ä»¥ä¸‹ã®ä¸­å›½èªãƒ†ã‚­ã‚¹ãƒˆã‚’è‡ªç„¶ã§æµæš¢ãªæ—¥æœ¬èªã«ç¿»è¨³ã—ã¦ãã ã•ã„ã€‚\${contextInfo}\\n\\nãƒ†ã‚­ã‚¹ãƒˆï¼š\${text}\`;
                  }
                  
                  const response = await fetch(GLM_CONFIG.endpoint, {
                    method: 'POST',
                    headers: {
                      'Content-Type': 'application/json',
                      'Authorization': \`Bearer \${GLM_CONFIG.apiKey}\`
                    },
                    body: JSON.stringify({
                      model: GLM_CONFIG.model,
                      messages: [{ role: 'user', content: prompt }],
                      temperature: 0.1,
                      max_tokens: Math.min(Math.max(text.length * 2, 50), 500),
                      top_p: 0.95
                    }),
                    signal: controller.signal
                  });
                  
                  clearTimeout(timeoutId);
                  
                  if (response.ok) {
                    const data = await response.json();
                    const translated = data.choices?.[0]?.message?.content?.trim();
                    if (translated) {
                      translationCache.set(cacheKey, translated);
                      return translated;
                    }
                  }
                  
                  return text;
                } catch (error) {
                  return text;
                } finally {
                  activeRequests--;
                }
              }
              
              self.onmessage = async function(e) {
                const { id, text, targetLang, context } = e.data;
                try {
                  const result = await translateText(text, targetLang, context);
                  self.postMessage({ id, success: true, result });
                } catch (error) {
                  self.postMessage({ id, success: false, error: error.message, result: text });
                }
              };
            `;
            
            this.workerScript = new Blob([workerCode], { type: 'application/javascript' });
            
            // åˆ›å»º Workers
            for (let i = 0; i < this.maxWorkers; i++) {
              try {
                const workerUrl = URL.createObjectURL(this.workerScript);
                const worker = new Worker(workerUrl);
                worker.onmessage = (e) => this.handleWorkerMessage(e);
                worker.onerror = (error) => console.warn('Worker é”™è¯¯:', error);
                this.workers.push({
                  worker,
                  workerUrl, // ä¿å­˜URLå¼•ç”¨ä»¥ä¾¿æ¸…ç†
                  busy: false,
                  taskId: null
                });
              } catch (error) {
                console.warn('åˆ›å»º Worker å¤±è´¥:', error);
                break;
              }
            }
            
            console.log(`ğŸš€ åˆ›å»ºäº† ${this.workers.length} ä¸ªç¿»è¯‘ Workers`);
          },
          
          // å¤„ç† Worker æ¶ˆæ¯
          handleWorkerMessage: function(e) {
            const { id, success, result, error } = e.data;
            const task = this.taskQueue.find(t => t.id === id);
            
            if (task) {
              // æ ‡è®° Worker ä¸ºç©ºé—²
              const workerInfo = this.workers.find(w => w.taskId === id);
              if (workerInfo) {
                workerInfo.busy = false;
                workerInfo.taskId = null;
              }
              
              // ç§»é™¤ä»»åŠ¡
              const taskIndex = this.taskQueue.findIndex(t => t.id === id);
              if (taskIndex > -1) {
                this.taskQueue.splice(taskIndex, 1);
              }
              
              // æ‰§è¡Œå›è°ƒ
              if (success) {
                task.resolve(result);
              } else {
                console.warn('Worker ç¿»è¯‘å¤±è´¥:', error);
                task.resolve(result || task.text); // å¤±è´¥æ—¶è¿”å›åŸæ–‡
              }
              
              // å¤„ç†é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªä»»åŠ¡
              this.processQueue();
            }
          },
          
          // å¤„ç†ä»»åŠ¡é˜Ÿåˆ—
          processQueue: function() {
            const pendingTasks = this.taskQueue.filter(t => !t.assigned);
            const availableWorkers = this.workers.filter(w => !w.busy);
            
            const tasksToProcess = Math.min(pendingTasks.length, availableWorkers.length);
            
            for (let i = 0; i < tasksToProcess; i++) {
              const task = pendingTasks[i];
              const workerInfo = availableWorkers[i];
              
              task.assigned = true;
              workerInfo.busy = true;
              workerInfo.taskId = task.id;
              
              workerInfo.worker.postMessage({
                id: task.id,
                text: task.text,
                targetLang: task.targetLang,
                context: task.context
              });
            }
          },
          
          // ç¿»è¯‘ä»»åŠ¡
          translate: function(text, targetLang, context = null) {
            return new Promise((resolve) => {
              if (this.workers.length === 0) {
                // å¦‚æœæ²¡æœ‰ Workersï¼Œå›é€€åˆ°ä¸»çº¿ç¨‹
                translateWithGLM(text, targetLang, context ? { previousText: context } : null)
                  .then(resolve)
                  .catch(() => resolve(text));
                return;
              }
              
              const taskId = Date.now() + Math.random();
              
              this.taskQueue.push({
                id: taskId,
                text,
                targetLang,
                context,
                resolve,
                assigned: false
              });
              
              this.processQueue();
            });
          },
          
          // é”€æ¯ Workers
          destroy: function() {
            this.workers.forEach(({ worker, workerUrl }) => {
              try {
                worker.terminate();
              } catch (e) {
                console.warn('é”€æ¯Workerå¤±è´¥:', e);
              }
              
              // æ¸…ç†Worker URL
              if (workerUrl) {
                try {
                  URL.revokeObjectURL(workerUrl);
                } catch (e) {
                  console.warn('æ¸…ç†Worker URLå¤±è´¥:', e);
                }
              }
            });
            this.workers = [];
            this.taskQueue = [];
            
            // æ¸…ç†è„šæœ¬Blob
            if (this.workerScript) {
              this.workerScript = null;
            }
            
            console.log('ğŸ§¹ Web Workers å·²æ¸…ç†');
          }
        };
        
        // è™šæ‹Ÿæ»šåŠ¨ç¿»è¯‘ä¼˜åŒ–å™¨
        const VirtualScrollOptimizer = {
          visibleElements: new Set(),
          observer: null,
          pendingTranslations: new Map(),
          
          // åˆå§‹åŒ–è™šæ‹Ÿæ»šåŠ¨
          init: function() {
            if (this.observer) return;
            
            this.observer = new IntersectionObserver((entries) => {
              entries.forEach(entry => {
                const element = entry.target;
                
                if (entry.isIntersecting) {
                  // å…ƒç´ è¿›å…¥è§†å£
                  this.visibleElements.add(element);
                  
                  // æ£€æŸ¥æ˜¯å¦æœ‰å¾…å¤„ç†çš„ç¿»è¯‘
                  if (this.pendingTranslations.has(element)) {
                    const { text, targetLang, context } = this.pendingTranslations.get(element);
                    this.performTranslation(element, text, targetLang, context);
                    this.pendingTranslations.delete(element);
                  }
                } else {
                  // å…ƒç´ ç¦»å¼€è§†å£
                  this.visibleElements.delete(element);
                }
              });
            }, {
              rootMargin: '100px', // æå‰100pxå¼€å§‹åŠ è½½
              threshold: 0.1
            });
            
            console.log('ğŸ“± è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–å™¨å·²åˆå§‹åŒ–');
          },
          
          // è§‚å¯Ÿå…ƒç´ 
          observe: function(element) {
            if (this.observer && element) {
              this.observer.observe(element);
            }
          },
          
          // å–æ¶ˆè§‚å¯Ÿ
          unobserve: function(element) {
            if (this.observer && element) {
              this.observer.unobserve(element);
              this.visibleElements.delete(element);
              this.pendingTranslations.delete(element);
            }
          },
          
          // è°ƒåº¦ç¿»è¯‘ï¼ˆä¼˜å…ˆå¤„ç†å¯è§å…ƒç´ ï¼‰
          scheduleTranslation: function(element, text, targetLang, context = null) {
            if (this.visibleElements.has(element)) {
              // å¯è§å…ƒç´ ç«‹å³ç¿»è¯‘
              return this.performTranslation(element, text, targetLang, context);
            } else {
              // ä¸å¯è§å…ƒç´ å»¶è¿Ÿç¿»è¯‘
              this.pendingTranslations.set(element, { text, targetLang, context });
              return Promise.resolve(text);
            }
          },
          
          // æ‰§è¡Œç¿»è¯‘
          performTranslation: async function(element, text, targetLang, context) {
            try {
              const result = await TranslationWorkerManager.translate(text, targetLang, context);
              
              // æ£€æŸ¥å…ƒç´ æ˜¯å¦ä»ç„¶å­˜åœ¨ä¸”å¯è§
              if (element.isConnected && this.visibleElements.has(element)) {
                element.textContent = result;
                element.setAttribute('data-translated', 'true');
                element.setAttribute('data-original-text', text);
              }
              
              return result;
            } catch (error) {
              console.warn('è™šæ‹Ÿæ»šåŠ¨ç¿»è¯‘å¤±è´¥:', error);
              return text;
            }
          },
          
          // é”€æ¯
          destroy: function() {
            if (this.observer) {
              this.observer.disconnect();
              this.observer = null;
            }
            this.visibleElements.clear();
            this.pendingTranslations.clear();
          }
        };
        
        // å…ƒç´ å¿½ç•¥æ£€æŸ¥
        function shouldIgnoreElement(element) {
          if (!element || !element.tagName) return true;
          
          const tagName = element.tagName.toLowerCase();
          if (['script', 'style', 'noscript', 'iframe', 'svg', 'canvas'].includes(tagName)) {
            return true;
          }
          
          for (const selector of IGNORE_SELECTORS) {
            try {
              if (element.matches(selector)) return true;
            } catch (e) {}
          }
          
          if (element.hasAttribute('data-no-translate') || 
              element.hasAttribute('data-translated') ||
              element.contentEditable === 'true') {
            return true;
          }
          
          return false;
        }
        
        // è·å–å¯ç¿»è¯‘æ–‡æœ¬èŠ‚ç‚¹
        function getTextNodes(element) {
          const textNodes = [];
          
          const walker = document.createTreeWalker(
            element,
            NodeFilter.SHOW_TEXT,
            {
              acceptNode: (node) => {
                const text = node.textContent.trim();
                
                if (!text || text.length < 2) {
                  return NodeFilter.FILTER_REJECT;
                }
                
                if (shouldIgnoreElement(node.parentElement)) {
                  return NodeFilter.FILTER_REJECT;
                }
                
                if (!shouldTranslateText(text)) {
                  return NodeFilter.FILTER_REJECT;
                }
                
                return NodeFilter.FILTER_ACCEPT;
              }
            }
          );
          
          let node;
          while (node = walker.nextNode()) {
            textNodes.push({ 
              node, 
              text: node.textContent.trim()
            });
          }
          
          return textNodes;
        }
        
        // æ˜¾ç¤ºç¿»è¯‘çŠ¶æ€ - æ”¯æŒå¤šè¯­è¨€é€šçŸ¥å’Œè¿›åº¦å¯è§†åŒ–
        function showTranslateStatus(message, duration = 0, forceLanguage = null, progress = null) {
          // è·å–é€šçŸ¥æ–‡æœ¬çš„å¤šè¯­è¨€ç‰ˆæœ¬
          const getLocalizedMessage = (msg, lang) => {
            const translations = {
              'chinese_simplified': {
                'ä¸æ”¯æŒçš„è¯­è¨€': 'ä¸æ”¯æŒçš„è¯­è¨€',
                'ç¿»è¯‘è¿›è¡Œä¸­ï¼Œè¯·ç¨å€™': 'ç¿»è¯‘è¿›è¡Œä¸­ï¼Œè¯·ç¨å€™',
                'é¡µé¢æ— éœ€ç¿»è¯‘': 'é¡µé¢æ— éœ€ç¿»è¯‘',
                'æ²¡æœ‰æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å†…å®¹': 'æ²¡æœ‰æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å†…å®¹',
                'ç¿»è¯‘å¤±è´¥ï¼Œè¯·é‡è¯•': 'ç¿»è¯‘å¤±è´¥ï¼Œè¯·é‡è¯•',
                'å·²æ¢å¤ä¸­æ–‡': 'å·²æ¢å¤ä¸­æ–‡',
                'å·²æ¸…é™¤æ‰€æœ‰ç¿»è¯‘è®¾ç½®': 'å·²æ¸…é™¤æ‰€æœ‰ç¿»è¯‘è®¾ç½®',  
                'å·²æ¢å¤å½“å‰é¡µé¢ï¼Œå…¶ä»–é¡µé¢ä¿æŒç¿»è¯‘çŠ¶æ€': 'å·²æ¢å¤å½“å‰é¡µé¢ï¼Œå…¶ä»–é¡µé¢ä¿æŒç¿»è¯‘çŠ¶æ€',
                'ç¼“å­˜å·²æ¸…é™¤ï¼Œé‡ç½®ä¸ºä¸­æ–‡': 'ç¼“å­˜å·²æ¸…é™¤ï¼Œé‡ç½®ä¸ºä¸­æ–‡',
                'æ¸…é™¤ç¼“å­˜å¤±è´¥': 'æ¸…é™¤ç¼“å­˜å¤±è´¥'
              },
              'english': {
                'ä¸æ”¯æŒçš„è¯­è¨€': 'Unsupported language',
                'ç¿»è¯‘è¿›è¡Œä¸­ï¼Œè¯·ç¨å€™': 'Translation in progress, please wait',
                'é¡µé¢æ— éœ€ç¿»è¯‘': 'Page does not need translation',
                'æ²¡æœ‰æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å†…å®¹': 'No content found for translation',
                'ç¿»è¯‘å¤±è´¥ï¼Œè¯·é‡è¯•': 'Translation failed, please try again',
                'å·²æ¢å¤ä¸­æ–‡': 'Restored to Chinese',
                'å·²æ¸…é™¤æ‰€æœ‰ç¿»è¯‘è®¾ç½®': 'All translation settings cleared',
                'å·²æ¢å¤å½“å‰é¡µé¢ï¼Œå…¶ä»–é¡µé¢ä¿æŒç¿»è¯‘çŠ¶æ€': 'Current page restored, other pages keep translation',
                'ç¼“å­˜å·²æ¸…é™¤ï¼Œé‡ç½®ä¸ºä¸­æ–‡': 'Cache cleared, reset to Chinese',
                'æ¸…é™¤ç¼“å­˜å¤±è´¥': 'Failed to clear cache'
              },
              'korean': {
                'ä¸æ”¯æŒçš„è¯­è¨€': 'ì§€ì›ë˜ì§€ ì•ŠëŠ” ì–¸ì–´',
                'ç¿»è¯‘è¿›è¡Œä¸­ï¼Œè¯·ç¨å€™': 'ë²ˆì—­ ì§„í–‰ ì¤‘, ì ì‹œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”',
                'é¡µé¢æ— éœ€ç¿»è¯‘': 'í˜ì´ì§€ì— ë²ˆì—­ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤',
                'æ²¡æœ‰æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å†…å®¹': 'ë²ˆì—­í•  ë‚´ìš©ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤',
                'ç¿»è¯‘å¤±è´¥ï¼Œè¯·é‡è¯•': 'ë²ˆì—­ ì‹¤íŒ¨, ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”',
                'å·²æ¢å¤ä¸­æ–‡': 'ì¤‘êµ­ì–´ë¡œ ë³µì›ë¨',
                'å·²æ¸…é™¤æ‰€æœ‰ç¿»è¯‘è®¾ç½®': 'ëª¨ë“  ë²ˆì—­ ì„¤ì •ì´ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤',
                'å·²æ¢å¤å½“å‰é¡µé¢ï¼Œå…¶ä»–é¡µé¢ä¿æŒç¿»è¯‘çŠ¶æ€': 'í˜„ì¬ í˜ì´ì§€ ë³µì›, ë‹¤ë¥¸ í˜ì´ì§€ëŠ” ë²ˆì—­ ìƒíƒœ ìœ ì§€',
                'ç¼“å­˜å·²æ¸…é™¤ï¼Œé‡ç½®ä¸ºä¸­æ–‡': 'ìºì‹œ ì§€ì›Œì§, ì¤‘êµ­ì–´ë¡œ ì¬ì„¤ì •',
                'æ¸…é™¤ç¼“å­˜å¤±è´¥': 'ìºì‹œ ì§€ìš°ê¸° ì‹¤íŒ¨'
              },
              'japanese': {
                'ä¸æ”¯æŒçš„è¯­è¨€': 'ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„è¨€èª',
                'ç¿»è¯‘è¿›è¡Œä¸­ï¼Œè¯·ç¨å€™': 'ç¿»è¨³ä¸­ã§ã™ã€ãŠå¾…ã¡ãã ã•ã„',
                'é¡µé¢æ— éœ€ç¿»è¯‘': 'ãƒšãƒ¼ã‚¸ã¯ç¿»è¨³ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã›ã‚“',
                'æ²¡æœ‰æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å†…å®¹': 'ç¿»è¨³ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“',
                'ç¿»è¯‘å¤±è´¥ï¼Œè¯·é‡è¯•': 'ç¿»è¨³ã«å¤±æ•—ã—ã¾ã—ãŸã€å†è©¦è¡Œã—ã¦ãã ã•ã„',
                'å·²æ¢å¤ä¸­æ–‡': 'ä¸­å›½èªã«å¾©å…ƒã•ã‚Œã¾ã—ãŸ',
                'å·²æ¸…é™¤æ‰€æœ‰ç¿»è¯‘è®¾ç½®': 'ã™ã¹ã¦ã®ç¿»è¨³è¨­å®šã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ',
                'å·²æ¢å¤å½“å‰é¡µé¢ï¼Œå…¶ä»–é¡µé¢ä¿æŒç¿»è¯‘çŠ¶æ€': 'ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã‚’å¾©å…ƒã€ä»–ã®ãƒšãƒ¼ã‚¸ã¯ç¿»è¨³çŠ¶æ…‹ã‚’ç¶­æŒ',
                'ç¼“å­˜å·²æ¸…é™¤ï¼Œé‡ç½®ä¸ºä¸­æ–‡': 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã€ä¸­å›½èªã«ãƒªã‚»ãƒƒãƒˆ',
                'æ¸…é™¤ç¼“å­˜å¤±è´¥': 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢ã«å¤±æ•—'
              }
            };
            
            const langTranslations = translations[lang] || translations['chinese_simplified'];
            
            // å¤„ç†åŠ¨æ€æ¶ˆæ¯ï¼ˆåŒ…å«å˜é‡çš„æ¶ˆæ¯ï¼‰
            if (msg.includes('ç¿»è¯‘ä¸­...') || msg.includes('Translation...') || msg.includes('ë²ˆì—­ ì¤‘...') || msg.includes('ç¿»è¨³ä¸­...')) {
              // ä¿æŒè¿›åº¦æ¶ˆæ¯çš„åŸæ ·ï¼Œå› ä¸ºå®ƒä»¬åŒ…å«åŠ¨æ€å†…å®¹
              return msg;
            }
            
            if (msg.includes('ç¿»è¯‘å®Œæˆ') || msg.includes('Translation completed') || msg.includes('ë²ˆì—­ ì™„ë£Œ') || msg.includes('ç¿»è¨³å®Œäº†')) {
              // ä¿æŒå®Œæˆæ¶ˆæ¯çš„åŸæ ·ï¼Œå› ä¸ºå®ƒä»¬åŒ…å«ç»Ÿè®¡ä¿¡æ¯
              return msg;
            }
            
            if (msg.includes('âœ…') && lang !== 'chinese_simplified') {
              // å¤„ç†åŒ…å«ç›®æ ‡è¯­è¨€åç§°çš„æ¶ˆæ¯
              if (lang === 'english' && msg.includes('English')) return msg;
              if (lang === 'korean' && msg.includes('í•œêµ­ì–´')) return msg;
              if (lang === 'japanese' && msg.includes('æ—¥æœ¬èª')) return msg;
            }
            
            // æŸ¥æ‰¾å®Œå…¨åŒ¹é…çš„ç¿»è¯‘
            for (const [key, value] of Object.entries(langTranslations)) {
              if (msg === key) {
                return value;
              }
            }
            
            return msg; // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¿»è¯‘ï¼Œè¿”å›åŸæ–‡
          };
          
          // ç¡®å®šä½¿ç”¨çš„è¯­è¨€
          const displayLanguage = forceLanguage || currentLanguage || 'chinese_simplified';
          const localizedMessage = getLocalizedMessage(message, displayLanguage);
          
          let statusEl = document.getElementById('translate-status');
          
          // å¦‚æœå·²æœ‰çŠ¶æ€å…ƒç´ ï¼Œå…ˆç§»é™¤é¿å…å†²çª
          if (statusEl) {
            statusEl.remove();
            statusEl = null;
          }
          
          // åˆ›å»ºæ–°çš„çŠ¶æ€å…ƒç´ 
          if (!statusEl) {
            statusEl = document.createElement('div');
            statusEl.id = 'translate-status';
            statusEl.style.cssText = `
              position: fixed;
              top: 20px;
              right: 20px;
              background: rgba(0, 0, 0, 0.9);
              color: white;
              padding: 16px 20px;
              border-radius: 12px;
              font-size: 14px;
              z-index: 10000;
              transition: all 0.3s ease;
              backdrop-filter: blur(10px);
              border: 1px solid rgba(255, 255, 255, 0.2);
              box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
              min-width: 200px;
              max-width: 350px;
            `;
            document.body.appendChild(statusEl);
          }
          
          // åˆ›å»ºçŠ¶æ€å†…å®¹
          let statusContent = `<div style="display: flex; align-items: center; gap: 12px;">`;
          
          // æ·»åŠ å›¾æ ‡
          if (message.includes('ç¿»è¯‘ä¸­') || message.includes('Translation') || message.includes('ë²ˆì—­') || message.includes('ç¿»è¨³')) {
            statusContent += `<div class="translate-spinner" style="
              width: 20px;
              height: 20px;
              border: 2px solid rgba(255, 255, 255, 0.3);
              border-top: 2px solid white;
              border-radius: 50%;
              animation: translateSpin 1s linear infinite;
            "></div>`;
          } else if (message.includes('âœ…') || message.includes('å®Œæˆ') || message.includes('æˆåŠŸ')) {
            statusContent += `<span style="font-size: 18px;">âœ…</span>`;
          } else if (message.includes('âŒ') || message.includes('å¤±è´¥') || message.includes('é”™è¯¯')) {
            statusContent += `<span style="font-size: 18px;">âŒ</span>`;
          } else {
            statusContent += `<span style="font-size: 18px;">ğŸŒ</span>`;
          }
          
          statusContent += `<div style="flex: 1;">
            <div style="font-weight: 600; margin-bottom: 4px;">${localizedMessage}</div>`;
          
          // æ·»åŠ è¿›åº¦æ¡
          if (progress !== null && progress.current && progress.total) {
            const percentage = Math.round((progress.current / progress.total) * 100);
            statusContent += `
              <div style="margin-bottom: 6px;">
                <div style="
                  width: 100%;
                  height: 4px;
                  background: rgba(255, 255, 255, 0.2);
                  border-radius: 2px;
                  overflow: hidden;
                ">
                  <div style="
                    width: ${percentage}%;
                    height: 100%;
                    background: linear-gradient(90deg, #4CAF50, #8BC34A);
                    transition: width 0.3s ease;
                  "></div>
                </div>
              </div>
              <div style="
                font-size: 12px;
                color: rgba(255, 255, 255, 0.8);
                text-align: center;
              ">${progress.current}/${progress.total} (${percentage}%)</div>`;
          }
          
          statusContent += `</div></div>`;
          
          statusEl.innerHTML = statusContent;
          statusEl.style.opacity = '1';
          statusEl.style.transform = 'translateY(0)';
          
          // æ·»åŠ åŠ¨ç”»æ ·å¼
          if (!document.getElementById('translate-status-styles')) {
            const style = document.createElement('style');
            style.id = 'translate-status-styles';
            style.textContent = `
              @keyframes translateSpin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
              }
            `;
            document.head.appendChild(style);
          }
          
          if (duration > 0) {
            setTimeout(() => {
              statusEl.style.opacity = '0';
              statusEl.style.transform = 'translateY(-10px)';
              setTimeout(() => {
                if (statusEl.parentNode) {
                  statusEl.parentNode.removeChild(statusEl);
                }
              }, 300);
            }, duration);
          }
        }
        
        // å¿«æ·é”®ç®¡ç†å™¨
        const ShortcutManager = {
          shortcuts: new Map(),
          isInitialized: false,
          
          // åˆå§‹åŒ–å¿«æ·é”®
          init: function() {
            if (this.isInitialized) return;
            
            // å®šä¹‰å¿«æ·é”®
            this.shortcuts.set('Ctrl+Shift+T', () => this.showTranslationMenu());
            this.shortcuts.set('Ctrl+Shift+E', () => window.translateTo('english'));
            this.shortcuts.set('Ctrl+Shift+K', () => window.translateTo('korean'));
            this.shortcuts.set('Ctrl+Shift+J', () => window.translateTo('japanese'));
            this.shortcuts.set('Ctrl+Shift+C', () => window.translateTo('chinese_simplified'));
            this.shortcuts.set('Ctrl+Shift+R', () => window.clearTranslateCache());
            this.shortcuts.set('Ctrl+Shift+X', async () => {
              if (isTranslating) {
                await cancelCurrentTranslation('ç”¨æˆ·æ‰‹åŠ¨ä¸­æ–­');
                showTranslateStatus('ç¿»è¯‘å·²ä¸­æ–­', 2000);
              }
            });
            this.shortcuts.set('Escape', () => this.hideTranslationMenu());
            
            // ç›‘å¬é”®ç›˜äº‹ä»¶
            document.addEventListener('keydown', (e) => this.handleKeydown(e));
            
            this.isInitialized = true;
            console.log('âŒ¨ï¸ ç¿»è¯‘å¿«æ·é”®å·²åˆå§‹åŒ–');
            console.log('å¿«æ·é”®åˆ—è¡¨ï¼š');
            console.log('- Ctrl+Shift+T: æ˜¾ç¤ºç¿»è¯‘èœå•');
            console.log('- Ctrl+Shift+E: ç¿»è¯‘ä¸ºEnglish');
            console.log('- Ctrl+Shift+K: ç¿»è¯‘ä¸ºí•œêµ­ì–´');
            console.log('- Ctrl+Shift+J: ç¿»è¯‘ä¸ºæ—¥æœ¬èª');
            console.log('- Ctrl+Shift+C: æ¢å¤ä¸­æ–‡');
            console.log('- Ctrl+Shift+R: æ¸…é™¤ç¿»è¯‘ç¼“å­˜');
            console.log('- Ctrl+Shift+X: ä¸­æ–­å½“å‰ç¿»è¯‘');
          },
          
          // å¤„ç†é”®ç›˜äº‹ä»¶
          handleKeydown: function(e) {
            // å¿½ç•¥åœ¨è¾“å…¥æ¡†ä¸­çš„æŒ‰é”®
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.isContentEditable) {
              return;
            }
            
            const key = this.getKeyString(e);
            const handler = this.shortcuts.get(key);
            
            if (handler) {
              e.preventDefault();
              e.stopPropagation();
              handler();
            }
          },
          
          // è·å–æŒ‰é”®å­—ç¬¦ä¸²
          getKeyString: function(e) {
            const parts = [];
            
            if (e.ctrlKey) parts.push('Ctrl');
            if (e.shiftKey) parts.push('Shift');
            if (e.altKey) parts.push('Alt');
            if (e.metaKey) parts.push('Meta');
            
            if (e.key && e.key !== 'Control' && e.key !== 'Shift' && e.key !== 'Alt' && e.key !== 'Meta') {
              parts.push(e.key);
            }
            
            return parts.join('+');
          },
          
          // æ˜¾ç¤ºç¿»è¯‘èœå•
          showTranslationMenu: function() {
            let menu = document.getElementById('translation-shortcut-menu');
            
            if (menu) {
              menu.remove();
            }
            
            menu = document.createElement('div');
            menu.id = 'translation-shortcut-menu';
            menu.style.cssText = `
              position: fixed;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%);
              background: rgba(0, 0, 0, 0.95);
              color: white;
              border-radius: 16px;
              padding: 24px;
              font-size: 14px;
              z-index: 10001;
              backdrop-filter: blur(20px);
              border: 1px solid rgba(255, 255, 255, 0.2);
              box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
              min-width: 300px;
              animation: menuFadeIn 0.3s ease-out;
            `;
            
            // æ·»åŠ åŠ¨ç”»æ ·å¼
            if (!document.getElementById('shortcut-menu-styles')) {
              const style = document.createElement('style');
              style.id = 'shortcut-menu-styles';
              style.textContent = `
                @keyframes menuFadeIn {
                  from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); }
                  to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                }
                .menu-item {
                  display: flex;
                  justify-content: space-between;
                  align-items: center;
                  padding: 12px 16px;
                  border-radius: 8px;
                  cursor: pointer;
                  transition: all 0.2s ease;
                  margin: 4px 0;
                }
                .menu-item:hover {
                  background: rgba(255, 255, 255, 0.1);
                  transform: translateX(4px);
                }
                .menu-shortcut {
                  font-family: monospace;
                  background: rgba(255, 255, 255, 0.1);
                  padding: 4px 8px;
                  border-radius: 4px;
                  font-size: 12px;
                }
              `;
              document.head.appendChild(style);
            }
            
            const currentLang = window.getCurrentLanguageName();
            
            menu.innerHTML = `
              <div style="text-align: center; margin-bottom: 20px;">
                <h3 style="margin: 0 0 8px 0; font-size: 18px; font-weight: 700;">ğŸŒ ç¿»è¯‘å¿«æ·èœå•</h3>
                <p style="margin: 0; color: rgba(255, 255, 255, 0.7); font-size: 12px;">å½“å‰è¯­è¨€: ${currentLang}</p>
              </div>
              
              <div class="menu-item" onclick="window.translateTo('english'); this.parentElement.remove();">
                <span>ğŸ‡ºğŸ‡¸ ç¿»è¯‘ä¸º English</span>
                <span class="menu-shortcut">Ctrl+Shift+E</span>
              </div>
              
              <div class="menu-item" onclick="window.translateTo('korean'); this.parentElement.remove();">
                <span>ğŸ‡°ğŸ‡· ç¿»è¯‘ä¸º í•œêµ­ì–´</span>
                <span class="menu-shortcut">Ctrl+Shift+K</span>
              </div>
              
              <div class="menu-item" onclick="window.translateTo('japanese'); this.parentElement.remove();">
                <span>ğŸ‡¯ğŸ‡µ ç¿»è¯‘ä¸º æ—¥æœ¬èª</span>
                <span class="menu-shortcut">Ctrl+Shift+J</span>
              </div>
              
              <div class="menu-item" onclick="window.translateTo('chinese_simplified'); this.parentElement.remove();">
                <span>ğŸ‡¨ğŸ‡³ æ¢å¤ä¸­æ–‡</span>
                <span class="menu-shortcut">Ctrl+Shift+C</span>
              </div>
              
              <div style="border-top: 1px solid rgba(255, 255, 255, 0.1); margin: 12px 0; padding-top: 12px;">
                ${isTranslating ? `
                <div class="menu-item" onclick="(async () => { await cancelCurrentTranslation('ç”¨æˆ·æ‰‹åŠ¨ä¸­æ–­'); showTranslateStatus('ç¿»è¯‘å·²ä¸­æ–­', 2000); this.parentElement.parentElement.remove(); })();">
                  <span>â¹ï¸ ä¸­æ–­å½“å‰ç¿»è¯‘</span>
                  <span class="menu-shortcut">Ctrl+Shift+X</span>
                </div>
                ` : ''}
                <div class="menu-item" onclick="window.clearTranslateCache(); this.parentElement.parentElement.remove();">
                  <span>ğŸ—‘ï¸ æ¸…é™¤ç¿»è¯‘ç¼“å­˜</span>
                  <span class="menu-shortcut">Ctrl+Shift+R</span>
                </div>
              </div>
              
              <div style="text-align: center; margin-top: 16px;">
                <div style="font-size: 12px; color: rgba(255, 255, 255, 0.5);">
                  æŒ‰ ESC å…³é—­èœå•
                </div>
              </div>
            `;
            
            document.body.appendChild(menu);
            
            // ç‚¹å‡»å¤–éƒ¨å…³é—­
            setTimeout(() => {
              const closeOnClickOutside = (e) => {
                if (!menu.contains(e.target)) {
                  menu.remove();
                  document.removeEventListener('click', closeOnClickOutside);
                }
              };
              document.addEventListener('click', closeOnClickOutside);
            }, 100);
          },
          
          // éšè—ç¿»è¯‘èœå•
          hideTranslationMenu: function() {
            const menu = document.getElementById('translation-shortcut-menu');
            if (menu) {
              menu.remove();
            }
          }
        };
        
        // è·å–å½“å‰é¡µé¢æ ‡è¯†
        function getCurrentPageKey() {
          const url = new URL(window.location.href);
          return url.pathname + url.search;
        }
        
        // ä¿å­˜å½“å‰é¡µé¢çŠ¶æ€
        function saveCurrentPageState() {
          const pageKey = getCurrentPageKey();
          
          // ä¿æŒç°æœ‰çš„explicitæ ‡è®°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
          const existingState = pageTranslationStates.get(pageKey);
          const newState = {
            language: currentLanguage,
            timestamp: Date.now(),
            url: window.location.href
          };
          
          // å¦‚æœä¹‹å‰æœ‰explicitæ ‡è®°ï¼Œä¿ç•™å®ƒ
          if (existingState && existingState.explicit) {
            newState.explicit = true;
          }
          
          pageTranslationStates.set(pageKey, newState);
          savePersistentCache();
        }
        
        // é¡µé¢ç¿»è¯‘ä¸»å‡½æ•° - æ”¯æŒä¸­æ–­çš„å¢å¼ºç‰ˆ
        async function translatePage(targetLang, isAutoTranslate = false) {
          // å¦‚æœæ­£åœ¨ç¿»è¯‘ä¸”ç”¨æˆ·ä¸»åŠ¨åˆ‡æ¢åˆ°ä¸­æ–‡ï¼Œç«‹å³ä¸­æ–­å½“å‰ç¿»è¯‘
          if (isTranslating && targetLang === 'chinese_simplified' && !isAutoTranslate) {
            console.log('ğŸ›‘ ç”¨æˆ·åˆ‡æ¢åˆ°ä¸­æ–‡ï¼Œä¸­æ–­å½“å‰ç¿»è¯‘');
            await cancelCurrentTranslation('ç”¨æˆ·åˆ‡æ¢åˆ°ä¸­æ–‡');
          }
          
          // å¦‚æœæ­£åœ¨ç¿»è¯‘ä¸”ä¸æ˜¯è‡ªåŠ¨ç¿»è¯‘ï¼Œæ ¹æ®æƒ…å†µå¤„ç†
          if (isTranslating && !isAutoTranslate) {
            if (targetLang === 'chinese_simplified') {
              // å·²ç»åœ¨ä¸Šé¢å¤„ç†äº†ä¸­æ–­
            } else {
              console.log('ğŸ”„ ä¸­æ–­å¹¶åˆ‡æ¢ç¿»è¯‘è¯­è¨€');
              await cancelCurrentTranslation('åˆ‡æ¢ç¿»è¯‘è¯­è¨€');
            }
          } else if (isTranslating && isAutoTranslate) {
            console.log('â¸ï¸ ç¿»è¯‘è¿›è¡Œä¸­ï¼Œè·³è¿‡è‡ªåŠ¨ç¿»è¯‘è¯·æ±‚');
            return;
          }
          
          if (!targetLang || !LANGUAGE_MAP[targetLang]) {
            console.warn(`âŒ ä¸æ”¯æŒçš„è¯­è¨€: ${targetLang}`);
            showTranslateStatus('ä¸æ”¯æŒçš„è¯­è¨€', 2000);
            return;
          }
          
          // é‡ç½®ä¸­æ–­æ ‡å¿—
          shouldCancelTranslation = false;
          isTranslating = true;
          
          // åˆ›å»ºæ–°çš„AbortController
          translationAbortController = new AbortController();
          
          console.log(`ğŸ¯ å¼€å§‹ç¿»è¯‘é¡µé¢: ${LANGUAGE_MAP[currentLanguage]} -> ${LANGUAGE_MAP[targetLang]}`);
          
          try {
            // ä¸åœ¨è¿™é‡Œæ˜¾ç¤ºåˆå§‹ç¿»è¯‘çŠ¶æ€ï¼Œå› ä¸ºåé¢ä¼šæœ‰è¯¦ç»†çš„è¿›åº¦æ˜¾ç¤º
            
            if (targetLang === 'chinese_simplified') {
              // æ¢å¤ä¸­æ–‡ - å§‹ç»ˆæ¢å¤åˆ°åŸå§‹ä¸­æ–‡çŠ¶æ€
              console.log('ğŸ”„ æ¢å¤ä¸­æ–‡çŠ¶æ€');
              
              // ä¼˜å…ˆä½¿ç”¨åŸå§‹æ–‡æœ¬æ˜ å°„æ¢å¤
              if (originalTexts.size > 0) {
                let restoredCount = 0;
                originalTexts.forEach((originalText, node) => {
                  if (node && node.parentNode && originalText) {
                    try {
                      node.textContent = originalText;
                      restoredCount++;
                    } catch (e) {
                      console.warn('æ¢å¤å•ä¸ªèŠ‚ç‚¹å¤±è´¥:', e);
                    }
                  }
                });
                console.log(`âœ… å·²æ¢å¤ ${restoredCount}/${originalTexts.size} ä¸ªæ–‡æœ¬èŠ‚ç‚¹`);
              }
              
              // æ¸…ç†æ‰€æœ‰ç¿»è¯‘æ ‡è®° - ä½œä¸ºå¤‡ç”¨æ¢å¤æœºåˆ¶
              const translatedElements = document.querySelectorAll('[data-translated]');
              if (translatedElements.length > 0) {
                let cleanedCount = 0;
                translatedElements.forEach(element => {
                  try {
                    const originalText = element.getAttribute('data-original-text');
                    if (originalText) {
                      element.textContent = originalText;
                      cleanedCount++;
                    }
                    element.removeAttribute('data-translated');
                    element.removeAttribute('data-original-text');
                  } catch (e) {
                    console.warn('æ¸…ç†å•ä¸ªå…ƒç´ å¤±è´¥:', e);
                  }
                });
                console.log(`ğŸ§¹ æ¸…ç†äº† ${cleanedCount} ä¸ªç¿»è¯‘æ ‡è®°`);
              }
              
              currentLanguage = targetLang;
              
              // ä¿ç•™originalTextsç”¨äºåç»­ç¿»è¯‘
              console.log(`ğŸ“ ä¿ç•™ ${originalTexts.size} ä¸ªåŸå§‹æ–‡æœ¬æ˜ å°„ä¾›åç»­ä½¿ç”¨`);
              
              saveCurrentPageState();
              
              // æ¸…é™¤ä»»ä½•æ­£åœ¨æ˜¾ç¤ºçš„çŠ¶æ€
              const existingStatus = document.getElementById('translate-status');
              if (existingStatus) {
                existingStatus.remove();
              }
              
              showTranslateStatus('å·²æ¢å¤ä¸­æ–‡', 2000);
              return;
            }
            
            // ç¿»è¯‘åˆ°å…¶ä»–è¯­è¨€
            console.log('ğŸŒ å¼€å§‹ç¿»è¯‘åˆ°å…¶ä»–è¯­è¨€');
            
            // æ™ºèƒ½çŠ¶æ€æ£€æŸ¥å’Œé‡ç½®
            if (currentLanguage !== 'chinese_simplified') {
              console.log('ğŸ”„ å…ˆæ¢å¤ä¸­æ–‡çŠ¶æ€ä»¥è·å–æ­£ç¡®çš„åŸå§‹æ–‡æœ¬');
              
              // æ¢å¤ä¸­æ–‡
              if (originalTexts.size > 0) {
                let restoredCount = 0;
                originalTexts.forEach((originalText, node) => {
                  if (node && node.parentNode && originalText) {
                    try {
                      node.textContent = originalText;
                      restoredCount++;
                    } catch (e) {
                      console.warn('æ¢å¤å•ä¸ªèŠ‚ç‚¹å¤±è´¥:', e);
                    }
                  }
                });
                console.log(`âœ… æ¢å¤äº† ${restoredCount} ä¸ªæ–‡æœ¬èŠ‚ç‚¹`);
              }
              
              // æ¸…ç†ç¿»è¯‘æ ‡è®°
              const translatedElements = document.querySelectorAll('[data-translated]');
              if (translatedElements.length > 0) {
                translatedElements.forEach(element => {
                  try {
                    const originalText = element.getAttribute('data-original-text');
                    if (originalText) {
                      element.textContent = originalText;
                    }
                    element.removeAttribute('data-translated');
                    element.removeAttribute('data-original-text');
                  } catch (e) {
                    console.warn('æ¸…ç†å•ä¸ªå…ƒç´ å¤±è´¥:', e);
                  }
                });
              }
              
              currentLanguage = 'chinese_simplified';
              
              // ç­‰å¾…DOMæ›´æ–°
              await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            // è·å–å½“å‰é¡µé¢çš„æ–‡æœ¬èŠ‚ç‚¹
            const textNodeData = getTextNodes(document.body);
            
            // ç¡®ä¿åœ¨ç¿»è¯‘å¼€å§‹å‰å»ºç«‹å®Œæ•´çš„åŸå§‹æ–‡æœ¬æ˜ å°„
            console.log('ğŸ“ ç¡®ä¿åŸå§‹æ–‡æœ¬æ˜ å°„å®Œæ•´å»ºç«‹');
            
            // ä¸ºæ‰€æœ‰å¯ç¿»è¯‘çš„æ–‡æœ¬èŠ‚ç‚¹å»ºç«‹æ˜ å°„ï¼Œç¡®ä¿ä¸­æ–­æ—¶èƒ½æ­£ç¡®æ¢å¤
            let mappingUpdated = false;
            textNodeData.forEach(({ node, text }) => {
              if (text && text.length > 1 && text.trim()) {
                if (!originalTexts.has(node)) {
                  // è·å–èŠ‚ç‚¹çš„å½“å‰åŸå§‹æ–‡æœ¬ï¼ˆæœªç¿»è¯‘çŠ¶æ€ï¼‰
                  const currentText = node.textContent.trim();
                  if (currentText && currentText === text) {
                    originalTexts.set(node, text);
                    mappingUpdated = true;
                  }
                }
              }
            });
            
            if (mappingUpdated) {
              console.log(`ğŸ“ åŸå§‹æ–‡æœ¬æ˜ å°„å·²å®Œå–„ï¼Œæ€»è®¡ ${originalTexts.size} ä¸ªèŠ‚ç‚¹`);
            } else {
              console.log(`ğŸ“ åŸå§‹æ–‡æœ¬æ˜ å°„å·²å­˜åœ¨ï¼Œæ€»è®¡ ${originalTexts.size} ä¸ªèŠ‚ç‚¹`);
            }
            
            // å‡†å¤‡ç¿»è¯‘çš„æ–‡æœ¬ - ä½¿ç”¨åŸå§‹æ–‡æœ¬ç¡®ä¿è´¨é‡
            const textsToTranslate = [];
            textNodeData.forEach(({ node, text }) => {
              if (text && text.length > 1 && text.trim()) {
                // ä¼˜å…ˆä½¿ç”¨æ˜ å°„ä¸­çš„åŸå§‹æ–‡æœ¬ï¼Œç¡®ä¿ç¿»è¯‘è´¨é‡
                const originalText = originalTexts.get(node) || text;
                textsToTranslate.push({ node, text: originalText });
              }
            });
            
            if (textsToTranslate.length === 0) {
              console.log('âš ï¸ æ²¡æœ‰æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å†…å®¹');
              showTranslateStatus('æ²¡æœ‰æ‰¾åˆ°éœ€è¦ç¿»è¯‘çš„å†…å®¹', 2000);
              currentLanguage = targetLang;
              return;
            }
            
            console.log(`ğŸ“Š æ‰¾åˆ° ${textsToTranslate.length} ä¸ªæ–‡æœ¬èŠ‚ç‚¹éœ€è¦ç¿»è¯‘`);
            let translatedCount = 0;
            let skippedCount = 0;
            let failedCount = 0;
            
            // å¢å¼ºçš„åˆ†æ‰¹ç¿»è¯‘å¤„ç† - æ”¯æŒä¸­æ–­æ£€æŸ¥
            for (let i = 0; i < textsToTranslate.length; i += GLM_CONFIG.batchSize) {
              // æ£€æŸ¥æ˜¯å¦åº”è¯¥ä¸­æ–­ç¿»è¯‘
              if (shouldCancelTranslation || translationAbortController?.signal?.aborted) {
                console.log('ğŸ›‘ ç¿»è¯‘è¢«ä¸­æ–­ï¼Œåœæ­¢å¤„ç†');
                return;
              }
              
              const batch = textsToTranslate.slice(i, i + GLM_CONFIG.batchSize);
              
              const promises = batch.map(async ({ node, text }) => {
                try {
                  // å¢å¼ºçš„èŠ‚ç‚¹æœ‰æ•ˆæ€§æ£€æŸ¥
                  if (!node || !node.parentNode || !node.isConnected || !document.contains(node)) {
                    console.warn('âš ï¸ èŠ‚ç‚¹å·²å¤±æ•ˆï¼Œè·³è¿‡ç¿»è¯‘');
                    skippedCount++;
                    return { success: false, reason: 'invalid_node' };
                  }
                  
                  // å¢å¼ºçš„æ–‡æœ¬æœ‰æ•ˆæ€§æ£€æŸ¥
                  if (!text || !text.trim() || text.length < 2) {
                    skippedCount++;
                    return { success: false, reason: 'invalid_text' };
                  }
                  
                  // æ£€æŸ¥æ˜¯å¦åº”è¯¥è·³è¿‡ç¿»è¯‘
                  if (!shouldTranslateText(text)) {
                    skippedCount++;
                    return { success: false, reason: 'should_not_translate' };
                  }
                  
                  console.log(`ğŸ”„ ç¿»è¯‘æ–‡æœ¬: "${text.substring(0, 50)}${text.length > 50 ? '...' : ''}"`);
                  
                  const translatedText = await translateWithGLM(text, targetLang);
                  
                  // å¢å¼ºçš„ç¿»è¯‘ç»“æœéªŒè¯
                  if (translatedText && translatedText.trim() && translatedText !== text) {
                    // éªŒè¯ç¿»è¯‘è´¨é‡
                    const cleanedTranslation = validateAndCleanTranslation(text, translatedText, targetLang);
                    
                    if (cleanedTranslation !== text && node.isConnected && node.parentNode) {
                      // åŒé‡æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€ï¼Œç¡®ä¿å®‰å…¨æ›´æ–°
                      try {
                        node.textContent = cleanedTranslation;
                        node.setAttribute('data-translated', 'true');
                        node.setAttribute('data-original-text', text);
                        node.setAttribute('data-target-lang', targetLang);
                        translatedCount++;
                        return { success: true, original: text, translated: cleanedTranslation };
                      } catch (updateError) {
                        console.warn('âŒ æ›´æ–°èŠ‚ç‚¹å†…å®¹å¤±è´¥:', updateError);
                        skippedCount++; // æ”¹ä¸ºè·³è¿‡ï¼Œå› ä¸ºè¿™é€šå¸¸æ˜¯DOMå˜åŒ–å¯¼è‡´çš„
                        return { success: false, reason: 'update_failed', error: updateError };
                      }
                    } else if (cleanedTranslation === text) {
                      console.log('âšª ç¿»è¯‘ç»“æœä¸åŸæ–‡ç›¸åŒï¼Œå¯èƒ½æ— éœ€ç¿»è¯‘');
                      skippedCount++;
                      return { success: false, reason: 'same_as_original' };
                    } else {
                      console.warn('âŒ èŠ‚ç‚¹çŠ¶æ€å¼‚å¸¸ï¼Œè·³è¿‡æ›´æ–°');
                      skippedCount++; // æ”¹ä¸ºè·³è¿‡ï¼Œå› ä¸ºè¿™é€šå¸¸æ˜¯DOMçŠ¶æ€é—®é¢˜
                      return { success: false, reason: 'node_state_invalid' };
                    }
                  } else {
                    // ç¿»è¯‘ç»“æœæ— æ•ˆ - è¿™å¯èƒ½æ˜¯å› ä¸ºå†…å®¹ä¸éœ€è¦ç¿»è¯‘
                    console.log('âšª ç¿»è¯‘ç»“æœæ— æ•ˆæˆ–ä¸åŸæ–‡ç›¸åŒï¼Œè·³è¿‡');
                    skippedCount++;
                    return { success: false, reason: 'invalid_translation_result' };
                  }
                } catch (error) {
                  // åŒºåˆ†ä¸åŒç±»å‹çš„é”™è¯¯
                  if (error.name === 'AbortError' || shouldCancelTranslation) {
                    console.log('ğŸ›‘ ç¿»è¯‘è¢«ä¸­æ–­');
                    return { success: false, reason: 'translation_cancelled' };
                  } else if (error.message && error.message.includes('API')) {
                    console.warn('âš ï¸ APIè°ƒç”¨å¤±è´¥:', error.message);
                    failedCount++;
                    return { success: false, reason: 'api_error', error: error };
                  } else {
                    console.warn('âš ï¸ ç¿»è¯‘å¼‚å¸¸ï¼Œè·³è¿‡è¯¥é¡¹:', error.message || error);
                    skippedCount++; // å¤§å¤šæ•°å¼‚å¸¸æ”¹ä¸ºè·³è¿‡è€Œä¸æ˜¯å¤±è´¥
                    return { success: false, reason: 'translation_skipped', error: error };
                  }
                }
              });
              
              // ç­‰å¾…æ‰¹æ¬¡å®Œæˆå¹¶æ”¶é›†ç»“æœ
              const batchResults = await Promise.allSettled(promises);
              
              // åˆ†ææ‰¹æ¬¡ç»“æœ
              const successfulResults = batchResults.filter(result => 
                result.status === 'fulfilled' && result.value?.success
              );
              
              const failedResults = batchResults.filter(result => 
                result.status === 'rejected' || (result.status === 'fulfilled' && !result.value?.success)
              );
              
              if (failedResults.length > 0) {
                const failureReasons = failedResults.map(result => {
                  if (result.status === 'rejected') {
                    return `promise_rejected: ${result.reason}`;
                  } else {
                    return result.value?.reason || 'unknown';
                  }
                });
                console.log(`âš ï¸ æ‰¹æ¬¡ ${Math.floor(i / GLM_CONFIG.batchSize) + 1} å¤±è´¥ç»Ÿè®¡:`, failureReasons);
              }
              
              // æ›´æ–°è¿›åº¦ - ä¼˜åŒ–ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤º
              const progress = Math.round(((i + GLM_CONFIG.batchSize) / textsToTranslate.length) * 100);
              const currentProgress = Math.min(progress, 100);
              
              // è®¡ç®—æˆåŠŸç‡å’Œè¯¦ç»†ç»Ÿè®¡
              const totalProcessed = translatedCount + skippedCount + failedCount;
              const successRate = totalProcessed > 0 ? Math.round((translatedCount / totalProcessed) * 100) : 0;
              
              // ä¼˜åŒ–çš„çŠ¶æ€æ¶ˆæ¯
              let statusMessage = `ç¿»è¯‘ä¸­... ${currentProgress}%`;
              
              if (totalProcessed > 0) {
                if (translatedCount > 0) {
                  statusMessage += ` (âœ…${translatedCount}`;
                  if (skippedCount > 0) statusMessage += ` â­ï¸${skippedCount}`;
                  if (failedCount > 0) statusMessage += ` âŒ${failedCount}`;
                  statusMessage += `)`;
                } else if (skippedCount > 0 && failedCount === 0) {
                  // ç¿»è¯‘è¿›è¡Œä¸­æ—¶ï¼Œä¸è¦æ˜¾ç¤º"å†…å®¹å·²æ˜¯ç›®æ ‡è¯­è¨€"ï¼Œè€Œæ˜¯æ˜¾ç¤ºå¤„ç†çŠ¶æ€
                  statusMessage += ` (åˆ†æå†…å®¹...)`;
                } else if (failedCount > 0) {
                  statusMessage += ` (å¤„ç†ä¸­...)`;
                } else {
                  statusMessage += ` (å‡†å¤‡ä¸­...)`;
                }
              }
              
              // æ˜¾ç¤ºå¸¦è¿›åº¦æ¡çš„çŠ¶æ€ï¼ˆè®¾ç½®è¾ƒçŸ­çš„æ˜¾ç¤ºæ—¶é—´ï¼Œé¿å…ä¸å®Œæˆæ¶ˆæ¯å†²çªï¼‰
              const progressInfo = {
                current: Math.min(i + GLM_CONFIG.batchSize, textsToTranslate.length),
                total: textsToTranslate.length
              };
              
              // å¦‚æœä¸æ˜¯æœ€åä¸€æ‰¹ï¼Œæ˜¾ç¤ºè¿›åº¦ï¼›å¦‚æœæ˜¯æœ€åä¸€æ‰¹ï¼Œä¸æ˜¾ç¤ºé¿å…ä¸å®Œæˆæ¶ˆæ¯å†²çª
              if (i + GLM_CONFIG.batchSize < textsToTranslate.length) {
                showTranslateStatus(statusMessage, 0, null, progressInfo);
              }
              
              // æ‰¹æ¬¡é—´å»¶è¿Ÿï¼Œé¿å…APIé™åˆ¶
              if (i + GLM_CONFIG.batchSize < textsToTranslate.length) {
                await new Promise(resolve => setTimeout(resolve, GLM_CONFIG.batchDelay));
              }
            }
            
            currentLanguage = targetLang;
            console.log(`ğŸ¯ å½“å‰è¯­è¨€å·²æ›´æ–°ä¸º: ${LANGUAGE_MAP[targetLang]}`);
            
            try {
              saveCurrentPageState();
              savePersistentCache();
            } catch (saveError) {
              console.warn('âš ï¸ ä¿å­˜çŠ¶æ€å¤±è´¥:', saveError);
            }
            
            const totalProcessed = translatedCount + skippedCount + failedCount;
            
            // ç«‹å³æ¸…é™¤ä»»ä½•æ­£åœ¨æ˜¾ç¤ºçš„è¿›åº¦çŠ¶æ€
            const existingStatus = document.getElementById('translate-status');
            if (existingStatus) {
              existingStatus.remove();
            }
            
            if (totalProcessed === 0) {
              showTranslateStatus('é¡µé¢æ— éœ€ç¿»è¯‘', 2000);
            } else if (translatedCount === 0 && skippedCount > 0 && failedCount === 0) {
              // åªæœ‰è·³è¿‡ï¼Œæ²¡æœ‰å¤±è´¥ - è¯´æ˜å†…å®¹å·²ç»æ˜¯ç›®æ ‡è¯­è¨€
              showTranslateStatus(`é¡µé¢å†…å®¹å·²æ˜¯${LANGUAGE_MAP[targetLang]} âœ…`, 2500);
            } else if (translatedCount === 0 && failedCount > 0) {
              // æ²¡æœ‰æˆåŠŸç¿»è¯‘ï¼Œä½†æœ‰å¤±è´¥é¡¹ç›® - æ™ºèƒ½æ˜¾ç¤º
              const failureRatio = failedCount / totalProcessed;
              if (skippedCount > failedCount * 5) {
                // è·³è¿‡çš„è¿œå¤šäºå¤±è´¥çš„ï¼Œè¯´æ˜å¤§éƒ¨åˆ†å†…å®¹ä¸éœ€è¦ç¿»è¯‘
                showTranslateStatus(`é¡µé¢å†…å®¹å·²æ˜¯${LANGUAGE_MAP[targetLang]} âœ…`, 2500);
              } else if (failureRatio < 0.3) {
                // å¤±è´¥ç‡ä½äº30%ï¼Œè®¤ä¸ºç¿»è¯‘åŸºæœ¬æˆåŠŸ
                showTranslateStatus(`ç¿»è¯‘å®Œæˆ âœ…`, 2500);
              } else {
                // å¤±è´¥è¾ƒå¤šï¼Œæ˜¾ç¤ºå‹å¥½çš„å¤±è´¥æ¶ˆæ¯
                showTranslateStatus('éƒ¨åˆ†å†…å®¹ç¿»è¯‘å¤±è´¥ï¼Œè¯·é‡è¯•', 3000);
              }
            } else if (translatedCount > 0) {
              const successRate = Math.round((translatedCount / totalProcessed) * 100);
              let finalMessage = `ç¿»è¯‘å®Œæˆ! âœ…${translatedCount}`;
              
              if (skippedCount > 0) finalMessage += ` â­ï¸${skippedCount}`;
              if (failedCount > 0) finalMessage += ` âŒ${failedCount}`;
              
              if (successRate >= 90) {
                finalMessage += ` ğŸ‰`;
              } else if (successRate >= 70) {
                finalMessage += ` âœ¨`;
              } else if (failedCount > translatedCount) {
                finalMessage += ` âš ï¸`;
              }
              
              showTranslateStatus(finalMessage, 3000);
            } else {
              // å…œåº•æƒ…å†µ - åº”è¯¥å¾ˆå°‘è§¦å‘
              showTranslateStatus('ç¿»è¯‘å¤„ç†å®Œæˆ', 2000);
            }
            
            console.log(`âœ… ç¿»è¯‘å®Œæˆ - æˆåŠŸ: ${translatedCount}, è·³è¿‡: ${skippedCount}, å¤±è´¥: ${failedCount}`);
            
          } catch (error) {
            console.error('ğŸ’¥ ç¿»è¯‘è¿‡ç¨‹å‘ç”Ÿé”™è¯¯:', error);
            
            // æ¸…é™¤ä»»ä½•æ­£åœ¨æ˜¾ç¤ºçš„è¿›åº¦çŠ¶æ€
            const existingStatus = document.getElementById('translate-status'); 
            if (existingStatus) {
              existingStatus.remove();
            }
            
            showTranslateStatus('ç¿»è¯‘å¤±è´¥ï¼Œè¯·é‡è¯•', 3000);
            
            // é”™è¯¯æ—¶é‡ç½®ä¸ºä¸­æ–‡çŠ¶æ€
            if (originalTexts.size > 0) {
              originalTexts.forEach((originalText, node) => {
                if (node.parentNode) {
                  node.textContent = originalText;
                }
              });
            }
            currentLanguage = 'chinese_simplified';
          } finally {
            // é‡ç½®ç¿»è¯‘çŠ¶æ€å’Œä¸­æ–­æ§åˆ¶
            isTranslating = false;
            shouldCancelTranslation = false;
            translationAbortController = null;
          }
        }
        
        // åˆ›å»ºæ™ºèƒ½ç”¨æˆ·é€‰æ‹©å¼¹çª— - ä¿®å¤è¯­è¨€ä¸€è‡´æ€§å’Œé€»è¾‘
        function createTranslationChoiceDialog() {
          return new Promise((resolve) => {
            // è·å–å½“å‰çŠ¶æ€ä¿¡æ¯
            const hasGlobalPreference = globalTranslationPreference && 
                                      globalTranslationPreference !== 'chinese_simplified' &&
                                      LANGUAGE_MAP[globalTranslationPreference];
            
            const otherPageCount = Array.from(pageTranslationStates.values()).filter(state => 
              state.language && 
              state.language !== 'chinese_simplified' &&
              LANGUAGE_MAP[state.language] &&
              state.timestamp &&
              (Date.now() - state.timestamp < CACHE_MAX_AGE)
            ).length;
            
            // å¦‚æœæ²¡æœ‰å…¨å±€åå¥½ä¹Ÿæ²¡æœ‰å…¶ä»–é¡µé¢çŠ¶æ€ï¼Œç›´æ¥è¿”å›ä»…å½“å‰é¡µé¢
            if (!hasGlobalPreference && otherPageCount === 0) {
              resolve('currentPageOnly');
              return;
            }
            
            // åˆ›å»ºå¼¹çª—å®¹å™¨
            const dialog = document.createElement('div');
            dialog.style.cssText = `
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: rgba(0, 0, 0, 0.6);
              display: flex;
              justify-content: center;
              align-items: center;
              z-index: 10000;
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              backdrop-filter: blur(4px);
              animation: dialogBackdropFadeIn 0.3s ease-out;
            `;
            
            // åˆ›å»ºå¼¹çª—å†…å®¹
            const content = document.createElement('div');
            content.style.cssText = `
              background: white;
              border-radius: 16px;
              padding: 32px;
              max-width: 480px;
              width: 90%;
              box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
              text-align: center;
              animation: dialogContentFadeIn 0.4s ease-out;
              border: 1px solid rgba(0, 0, 0, 0.1);
            `;
            
            // æ·»åŠ åŠ¨ç”»æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
              @keyframes dialogBackdropFadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
              }
              @keyframes dialogContentFadeIn {
                from {
                  opacity: 0;
                  transform: scale(0.9) translateY(-20px);
                }
                to {
                  opacity: 1;
                  transform: scale(1) translateY(0);
                }
              }
              .dialog-button {
                transition: all 0.2s ease;
              }
              .dialog-button:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
              }
            `;
            document.head.appendChild(style);
            
            // æ ¹æ®å½“å‰è¯­è¨€è·å–å¼¹çª—æ–‡æœ¬ - ä¿®å¤è¯­è¨€ä¸€è‡´æ€§
            const getDialogTexts = (lang) => {
              const texts = {
                'chinese_simplified': {
                  title: 'ç¿»è¯‘è®¾ç½®é€‰æ‹©',
                  question: 'æ‚¨å¸Œæœ›å¦‚ä½•å¤„ç†ç¿»è¯‘çŠ¶æ€ï¼Ÿ',
                  currentPageBtn: 'ä»…æ¢å¤å½“å‰é¡µé¢',
                  currentPageDesc: 'ä¿ç•™å…¶ä»–é¡µé¢çš„ç¿»è¯‘è®¾ç½®',
                  clearAllBtn: 'æ¸…é™¤æ‰€æœ‰ç¿»è¯‘è®¾ç½®',
                  clearAllDesc: 'æ‰€æœ‰é¡µé¢éƒ½å°†æ¢å¤ä¸­æ–‡',
                  tip: 'ğŸ’¡ æç¤ºï¼šæ‚¨å¯ä»¥éšæ—¶é‡æ–°è®¾ç½®ç¿»è¯‘åå¥½',
                  globalPref: 'å½“å‰å…¨å±€ç¿»è¯‘åå¥½',
                  pagesCount: 'ä¸ªé¡µé¢ä¿å­˜äº†ç¿»è¯‘çŠ¶æ€',
                  hasPages: 'æœ‰',
                  and: 'ï¼Œè¿˜æœ‰'
                },
                'english': {
                  title: 'Translation Settings',
                  question: 'How would you like to handle the translation state?',
                  currentPageBtn: 'Restore Current Page Only',
                  currentPageDesc: 'Keep translation settings for other pages',
                  clearAllBtn: 'Clear All Translation Settings',
                  clearAllDesc: 'All pages will be restored to Chinese',
                  tip: 'ğŸ’¡ Tip: You can reset translation preferences anytime',
                  globalPref: 'Current global translation preference',
                  pagesCount: 'pages have saved translation states',
                  hasPages: '',
                  and: ', and '
                },
                'korean': {
                  title: 'ë²ˆì—­ ì„¤ì •',
                  question: 'ë²ˆì—­ ìƒíƒœë¥¼ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
                  currentPageBtn: 'í˜„ì¬ í˜ì´ì§€ë§Œ ë³µì›',
                  currentPageDesc: 'ë‹¤ë¥¸ í˜ì´ì§€ì˜ ë²ˆì—­ ì„¤ì • ìœ ì§€',
                  clearAllBtn: 'ëª¨ë“  ë²ˆì—­ ì„¤ì • ì§€ìš°ê¸°',
                  clearAllDesc: 'ëª¨ë“  í˜ì´ì§€ê°€ ì¤‘êµ­ì–´ë¡œ ë³µì›ë©ë‹ˆë‹¤',
                  tip: 'ğŸ’¡ íŒ: ì–¸ì œë“ ì§€ ë²ˆì—­ ê¸°ë³¸ ì„¤ì •ì„ ì¬ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤',
                  globalPref: 'í˜„ì¬ ì „ì—­ ë²ˆì—­ ê¸°ë³¸ ì„¤ì •',
                  pagesCount: 'ê°œ í˜ì´ì§€ì— ë²ˆì—­ ìƒíƒœê°€ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤',
                  hasPages: '',
                  and: ', ê·¸ë¦¬ê³  '
                },
                'japanese': {
                  title: 'ç¿»è¨³è¨­å®š',
                  question: 'ç¿»è¨³çŠ¶æ…‹ã‚’ã©ã®ã‚ˆã†ã«å‡¦ç†ã—ã¾ã™ã‹ï¼Ÿ',
                  currentPageBtn: 'ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã®ã¿å¾©å…ƒ',
                  currentPageDesc: 'ä»–ã®ãƒšãƒ¼ã‚¸ã®ç¿»è¨³è¨­å®šã‚’ä¿æŒ',
                  clearAllBtn: 'ã™ã¹ã¦ã®ç¿»è¨³è¨­å®šã‚’ã‚¯ãƒªã‚¢',
                  clearAllDesc: 'ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ãŒä¸­å›½èªã«å¾©å…ƒã•ã‚Œã¾ã™',
                  tip: 'ğŸ’¡ ãƒ’ãƒ³ãƒˆï¼šã„ã¤ã§ã‚‚ç¿»è¨³è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆã§ãã¾ã™',
                  globalPref: 'ç¾åœ¨ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ç¿»è¨³è¨­å®š',
                  pagesCount: 'ãƒšãƒ¼ã‚¸ã«ç¿»è¨³çŠ¶æ…‹ãŒä¿å­˜ã•ã‚Œã¦ã„ã¾ã™',
                  hasPages: '',
                  and: 'ã€ãŠã‚ˆã³'
                }
              };
              return texts[lang] || texts['chinese_simplified'];
            };
            
            // ä½¿ç”¨å½“å‰è¯­è¨€æ˜¾ç¤ºå¼¹çª— - å…³é”®ä¿®å¤
            const dialogTexts = getDialogTexts(currentLanguage);
            
            // æ™ºèƒ½ç”Ÿæˆæç¤ºä¿¡æ¯
            let statusInfo = '';
            if (hasGlobalPreference && otherPageCount > 0) {
              statusInfo = `${dialogTexts.globalPref}ï¼š${LANGUAGE_MAP[globalTranslationPreference]}${dialogTexts.and}${otherPageCount} ${dialogTexts.pagesCount}`;
            } else if (hasGlobalPreference) {
              statusInfo = `${dialogTexts.globalPref}ï¼š${LANGUAGE_MAP[globalTranslationPreference]}`;
            } else if (otherPageCount > 0) {
              statusInfo = `${dialogTexts.hasPages} ${otherPageCount} ${dialogTexts.pagesCount}`;
            }
            
            content.innerHTML = `
              <div style="margin-bottom: 24px;">
                <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
                  <span style="font-size: 28px; color: white;">ğŸŒ</span>
                </div>
                <h3 style="margin: 0 0 12px 0; color: #2d3748; font-size: 20px; font-weight: 700;">${dialogTexts.title}</h3>
                ${statusInfo ? `<div style="margin: 0 0 20px 0; padding: 12px 16px; background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%); border-radius: 8px; border-left: 4px solid #4299e1;"><p style="margin: 0; color: #2d3748; font-size: 13px; font-weight: 500;">${statusInfo}</p></div>` : ''}
                <p style="margin: 0 0 28px 0; color: #4a5568; line-height: 1.6; font-size: 15px;">${dialogTexts.question}</p>
              </div>
              <div style="display: flex; flex-direction: column; gap: 16px;">
                <button id="currentPageOnly" class="dialog-button" style="
                  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
                  border: 2px solid #e2e8f0;
                  border-radius: 12px;
                  padding: 16px 24px;
                  cursor: pointer;
                  font-size: 14px;
                  color: #2d3748;
                  font-weight: 600;
                  text-align: left;
                ">
                  <div style="font-weight: 700; margin-bottom: 6px; color: #1a202c;">${dialogTexts.currentPageBtn}</div>
                  <div style="font-size: 12px; color: #718096; font-weight: 500;">${dialogTexts.currentPageDesc}</div>
                </button>
                <button id="clearGlobalPreference" class="dialog-button" style="
                  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                  border: none;
                  border-radius: 12px;
                  padding: 16px 24px;
                  cursor: pointer;
                  font-size: 14px;
                  color: white;
                  font-weight: 600;
                  text-align: left;
                  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
                ">
                  <div style="font-weight: 700; margin-bottom: 6px;">${dialogTexts.clearAllBtn}</div>
                  <div style="font-size: 12px; opacity: 0.9; font-weight: 500;">${dialogTexts.clearAllDesc}</div>
                </button>
              </div>
              <p style="margin: 24px 0 0 0; font-size: 12px; color: #a0aec0; line-height: 1.5; font-weight: 500;">${dialogTexts.tip}</p>
            `;
            
            dialog.appendChild(content);
            document.body.appendChild(dialog);
            
            // æ·»åŠ æŒ‰é’®äº‹ä»¶
            const currentPageBtn = content.querySelector('#currentPageOnly');
            const clearGlobalBtn = content.querySelector('#clearGlobalPreference');
            
            // å¢å¼ºçš„æŒ‰é’®äº¤äº’æ•ˆæœ
            currentPageBtn.addEventListener('mouseenter', () => {
              currentPageBtn.style.background = 'linear-gradient(135deg, #edf2f7 0%, #e2e8f0 100%)';
              currentPageBtn.style.borderColor = '#cbd5e0';
            });
            currentPageBtn.addEventListener('mouseleave', () => {
              currentPageBtn.style.background = 'linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%)';
              currentPageBtn.style.borderColor = '#e2e8f0';
            });
            
            clearGlobalBtn.addEventListener('mouseenter', () => {
              clearGlobalBtn.style.background = 'linear-gradient(135deg, #5a67d8 0%, #667eea 100%)';
            });
            clearGlobalBtn.addEventListener('mouseleave', () => {
              clearGlobalBtn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            });
            
            // å®‰å…¨çš„å¼¹çª—å…³é—­å‡½æ•°
            const closeDialog = (choice) => {
              try {
                dialog.style.animation = 'dialogBackdropFadeOut 0.2s ease-in forwards';
                content.style.animation = 'dialogContentFadeOut 0.2s ease-in forwards';
                
                // æ·»åŠ é€€å‡ºåŠ¨ç”»
                const exitStyle = document.createElement('style');
                exitStyle.textContent = `
                  @keyframes dialogBackdropFadeOut {
                    from { opacity: 1; }
                    to { opacity: 0; }
                  }
                  @keyframes dialogContentFadeOut {
                    from {
                      opacity: 1;
                      transform: scale(1) translateY(0);
                    }
                    to {
                      opacity: 0;
                      transform: scale(0.9) translateY(-20px);
                    }
                  }
                `;
                document.head.appendChild(exitStyle);
                
                setTimeout(() => {
                  if (document.body.contains(dialog)) {
                    document.body.removeChild(dialog);
                  }
                  if (document.head.contains(style)) {
                    document.head.removeChild(style);
                  }
                  if (document.head.contains(exitStyle)) {
                    document.head.removeChild(exitStyle);
                  }
                  resolve(choice);
                }, 200);
              } catch (error) {
                console.warn('âš ï¸ å…³é—­å¼¹çª—æ—¶å‡ºé”™:', error);
                resolve(choice);
              }
            };
            
            // ç‚¹å‡»äº‹ä»¶ï¼ˆå¢åŠ é˜²æŠ–å¤„ç†ï¼‰
            let isClosing = false;
            
            currentPageBtn.addEventListener('click', () => {
              if (!isClosing) {
                isClosing = true;
                closeDialog('currentPageOnly');
              }
            });
            
            clearGlobalBtn.addEventListener('click', () => {
              if (!isClosing) {
                isClosing = true;
                closeDialog('clearGlobalPreference');
              }
            });
            
            // ç‚¹å‡»èƒŒæ™¯å…³é—­ï¼ˆé»˜è®¤é€‰æ‹©ä»…æ¢å¤å½“å‰é¡µé¢ï¼‰
            dialog.addEventListener('click', (e) => {
              if (e.target === dialog && !isClosing) {
                isClosing = true;
                closeDialog('currentPageOnly');
              }
            });
            
            // ESCé”®å…³é—­
            const handleKeyDown = (e) => {
              if (e.key === 'Escape' && !isClosing) {
                isClosing = true;
                document.removeEventListener('keydown', handleKeyDown);
                closeDialog('currentPageOnly');
              }
            };
            document.addEventListener('keydown', handleKeyDown);
          });
        }
        
        // åˆ›å»ºé¡µé¢å¯¼èˆªé€‰æ‹©å¼¹çª— - å½“åˆ‡æ¢åˆ°ä¸­æ–‡é¡µé¢ä½†å­˜åœ¨å…¨å±€ç¿»è¯‘åå¥½æ—¶ä½¿ç”¨
        function createNavigationChoiceDialog(globalLanguage) {
          return new Promise((resolve) => {
            // åˆ›å»ºå¼¹çª—å®¹å™¨
            const dialog = document.createElement('div');
            dialog.style.cssText = `
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: rgba(0, 0, 0, 0.5);
              display: flex;
              justify-content: center;
              align-items: center;
              z-index: 10000;
              font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
              backdrop-filter: blur(2px);
            `;
            
            // åˆ›å»ºå¼¹çª—å†…å®¹
            const content = document.createElement('div');
            content.style.cssText = `
              background: white;
              border-radius: 12px;
              padding: 24px;
              max-width: 420px;
              width: 90%;
              box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
              text-align: center;
              animation: dialogFadeIn 0.3s ease-out;
            `;
            
            // æ·»åŠ åŠ¨ç”»æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
              @keyframes dialogFadeIn {
                from {
                  opacity: 0;
                  transform: scale(0.9) translateY(-20px);
                }
                to {
                  opacity: 1;
                  transform: scale(1) translateY(0);
                }
              }
            `;
            document.head.appendChild(style);
            
            // æ ¹æ®å…¨å±€ç¿»è¯‘è¯­è¨€è·å–å¼¹çª—æ–‡æœ¬
            const getNavigationDialogTexts = (lang) => {
              const texts = {
                'chinese_simplified': {
                  title: 'é¡µé¢ç¿»è¯‘é€‰æ‹©',
                  question: 'æ£€æµ‹åˆ°å½“å‰é¡µé¢ä¸ºä¸­æ–‡ï¼Œæ‚¨å¸Œæœ›å¦‚ä½•å¤„ç†ï¼Ÿ',
                  keepChineseBtn: 'ä¿æŒå½“å‰é¡µé¢ä¸ºä¸­æ–‡',
                  keepChineseDesc: 'æ­¤é¡µé¢å°†ä¿æŒä¸­æ–‡çŠ¶æ€',
                  applyGlobalBtn: 'åº”ç”¨å…¨å±€ç¿»è¯‘è®¾ç½®',
                  applyGlobalDesc: 'ç¿»è¯‘æ­¤é¡µé¢ä¸º{language}',
                  tip: 'ğŸ’¡ æç¤ºï¼šæ‚¨çš„é€‰æ‹©å°†è¢«è®°ä½ï¼Œä¸‹æ¬¡è®¿é—®æ­¤é¡µé¢æ—¶ä¼šè‡ªåŠ¨åº”ç”¨'
                },
                'english': {
                  title: 'Page Translation Choice',
                  question: 'This page is in Chinese. How would you like to proceed?',
                  keepChineseBtn: 'Keep Page in Chinese',
                  keepChineseDesc: 'This page will remain in Chinese',
                  applyGlobalBtn: 'Apply Global Translation',
                  applyGlobalDesc: 'Translate this page to {language}',
                  tip: 'ğŸ’¡ Tip: Your choice will be remembered for future visits to this page'
                },
                'korean': {
                  title: 'í˜ì´ì§€ ë²ˆì—­ ì„ íƒ',
                  question: 'í˜„ì¬ í˜ì´ì§€ê°€ ì¤‘êµ­ì–´ì…ë‹ˆë‹¤. ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
                  keepChineseBtn: 'ì¤‘êµ­ì–´ë¡œ ìœ ì§€',
                  keepChineseDesc: 'ì´ í˜ì´ì§€ëŠ” ì¤‘êµ­ì–´ë¡œ ìœ ì§€ë©ë‹ˆë‹¤',
                  applyGlobalBtn: 'ì „ì—­ ë²ˆì—­ ì ìš©',
                  applyGlobalDesc: 'ì´ í˜ì´ì§€ë¥¼ {language}ë¡œ ë²ˆì—­',
                  tip: 'ğŸ’¡ íŒ: ì„ íƒì‚¬í•­ì´ ê¸°ì–µë˜ì–´ ë‹¤ìŒì— ì´ í˜ì´ì§€ë¥¼ ë°©ë¬¸í•  ë•Œ ìë™ ì ìš©ë©ë‹ˆë‹¤'
                },
                'japanese': {
                  title: 'ãƒšãƒ¼ã‚¸ç¿»è¨³ã®é¸æŠ',
                  question: 'ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã¯ä¸­å›½èªã§ã™ã€‚ã©ã®ã‚ˆã†ã«å‡¦ç†ã—ã¾ã™ã‹ï¼Ÿ',
                  keepChineseBtn: 'ä¸­å›½èªã®ã¾ã¾ä¿æŒ',
                  keepChineseDesc: 'ã“ã®ãƒšãƒ¼ã‚¸ã¯ä¸­å›½èªã®ã¾ã¾ã«ãªã‚Šã¾ã™',
                  applyGlobalBtn: 'ã‚°ãƒ­ãƒ¼ãƒãƒ«ç¿»è¨³ã‚’é©ç”¨',
                  applyGlobalDesc: 'ã“ã®ãƒšãƒ¼ã‚¸ã‚’{language}ã«ç¿»è¨³',
                  tip: 'ğŸ’¡ ãƒ’ãƒ³ãƒˆ: é¸æŠå†…å®¹ãŒè¨˜æ†¶ã•ã‚Œã€æ¬¡å›ã“ã®ãƒšãƒ¼ã‚¸ã‚’è¨ªå•æ™‚ã«è‡ªå‹•é©ç”¨ã•ã‚Œã¾ã™'
                }
              };
              return texts[lang] || texts['chinese_simplified'];
            };
            
            const dialogTexts = getNavigationDialogTexts(globalLanguage);
            const targetLanguageName = LANGUAGE_MAP[globalLanguage] || globalLanguage;
            
            content.innerHTML = `
              <div style="margin-bottom: 20px;">
                <div style="width: 48px; height: 48px; background: #e8f4f8; border-radius: 50%; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center;">
                  <span style="font-size: 24px;">ğŸŒ</span>
                </div>
                <h3 style="margin: 0 0 8px 0; color: #333; font-size: 18px; font-weight: 600;">${dialogTexts.title}</h3>
                <p style="margin: 0 0 16px 0; color: #666; font-size: 13px; background: #f0f8ff; padding: 8px 12px; border-radius: 6px; border-left: 3px solid #3498db;">
                  å½“å‰å…¨å±€ç¿»è¯‘è®¾ç½®ï¼š${targetLanguageName}
                </p>
                <p style="margin: 0 0 24px 0; color: #666; line-height: 1.5; font-size: 14px;">${dialogTexts.question}</p>
              </div>
              <div style="display: flex; flex-direction: column; gap: 12px;">
                <button id="keepChinese" style="
                  background: #f8f9fa;
                  border: 1px solid #dee2e6;
                  border-radius: 8px;
                  padding: 14px 20px;
                  cursor: pointer;
                  font-size: 14px;
                  color: #495057;
                  transition: all 0.2s;
                  font-weight: 500;
                ">
                  <div style="font-weight: 600; margin-bottom: 4px;">${dialogTexts.keepChineseBtn}</div>
                  <div style="font-size: 12px; color: #6c757d;">${dialogTexts.keepChineseDesc}</div>
                </button>
                <button id="applyGlobal" style="
                  background: #3498db;
                  border: none;
                  border-radius: 8px;
                  padding: 14px 20px;
                  cursor: pointer;
                  font-size: 14px;
                  color: white;
                  transition: all 0.2s;
                  font-weight: 500;
                ">
                  <div style="font-weight: 600; margin-bottom: 4px;">${dialogTexts.applyGlobalBtn}</div>
                  <div style="font-size: 12px; opacity: 0.9;">${dialogTexts.applyGlobalDesc.replace('{language}', targetLanguageName)}</div>
                </button>
              </div>
              <p style="margin: 20px 0 0 0; font-size: 12px; color: #999; line-height: 1.4;">${dialogTexts.tip}</p>
            `;
            
            dialog.appendChild(content);
            document.body.appendChild(dialog);
            
            // æ·»åŠ æŒ‰é’®äº‹ä»¶
            const keepChineseBtn = content.querySelector('#keepChinese');
            const applyGlobalBtn = content.querySelector('#applyGlobal');
            
            // å¢å¼ºçš„æŒ‰é’®æ‚¬åœæ•ˆæœ
            keepChineseBtn.addEventListener('mouseenter', () => {
              keepChineseBtn.style.background = '#e9ecef';
              keepChineseBtn.style.borderColor = '#adb5bd';
              keepChineseBtn.style.transform = 'translateY(-1px)';
            });
            keepChineseBtn.addEventListener('mouseleave', () => {
              keepChineseBtn.style.background = '#f8f9fa';
              keepChineseBtn.style.borderColor = '#dee2e6';
              keepChineseBtn.style.transform = 'translateY(0)';
            });
            
            applyGlobalBtn.addEventListener('mouseenter', () => {
              applyGlobalBtn.style.background = '#2980b9';
              applyGlobalBtn.style.transform = 'translateY(-1px)';
            });
            applyGlobalBtn.addEventListener('mouseleave', () => {
              applyGlobalBtn.style.background = '#3498db';
              applyGlobalBtn.style.transform = 'translateY(0)';
            });
            
            // å®‰å…¨çš„å¼¹çª—å…³é—­å‡½æ•°
            const closeDialog = (choice) => {
              try {
                if (document.body.contains(dialog)) {
                  document.body.removeChild(dialog);
                }
                if (document.head.contains(style)) {
                  document.head.removeChild(style);
                }
                resolve(choice);
              } catch (error) {
                console.warn('âš ï¸ å…³é—­å¯¼èˆªé€‰æ‹©å¼¹çª—æ—¶å‡ºé”™:', error);
                resolve(choice);
              }
            };
            
            // ç‚¹å‡»äº‹ä»¶ï¼ˆå¢åŠ é˜²æŠ–å¤„ç†ï¼‰
            let isClosing = false;
            
            keepChineseBtn.addEventListener('click', () => {
              if (!isClosing) {
                isClosing = true;
                closeDialog('keepChinese');
              }
            });
            
            applyGlobalBtn.addEventListener('click', () => {
              if (!isClosing) {
                isClosing = true;
                closeDialog('applyGlobal');
              }
            });
            
            // ç‚¹å‡»èƒŒæ™¯å…³é—­ï¼ˆé»˜è®¤ä¿æŒä¸­æ–‡ï¼‰
            dialog.addEventListener('click', (e) => {
              if (e.target === dialog && !isClosing) {
                isClosing = true;
                closeDialog('keepChinese');
              }
            });
            
            // ESCé”®å…³é—­
            const handleKeyDown = (e) => {
              if (e.key === 'Escape' && !isClosing) {
                isClosing = true;
                document.removeEventListener('keydown', handleKeyDown);
                closeDialog('keepChinese');
              }
            };
            document.addEventListener('keydown', handleKeyDown);
          });
        }
        
        // å¤„ç†å¯¼èˆªé€‰æ‹©çš„ç»“æœ
        async function handleNavigationChoice(choice, globalLanguage, pageKey) {
          try {
            if (choice === 'keepChinese') {
              // ç”¨æˆ·é€‰æ‹©ä¿æŒä¸­æ–‡
              console.log('ğŸ“ ç”¨æˆ·é€‰æ‹©ä¿æŒå½“å‰é¡µé¢ä¸ºä¸­æ–‡');
              
              // è®¾ç½®é¡µé¢æ˜ç¡®çš„ä¸­æ–‡çŠ¶æ€
              pageTranslationStates.set(pageKey, {
                language: 'chinese_simplified',
                timestamp: Date.now(),
                url: window.location.href,
                explicit: true // æ ‡è®°ä¸ºç”¨æˆ·æ˜ç¡®é€‰æ‹©
              });
              
              currentLanguage = 'chinese_simplified';
              savePersistentCache();
              
              // ä½¿ç”¨å½“å‰è¯­è¨€æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯
              const statusMessages = {
                'english': 'Page kept in Chinese',
                'korean': 'í˜ì´ì§€ë¥¼ ì¤‘êµ­ì–´ë¡œ ìœ ì§€',
                'japanese': 'ãƒšãƒ¼ã‚¸ã¯ä¸­å›½èªã®ã¾ã¾',
                'chinese_simplified': 'é¡µé¢ä¿æŒä¸­æ–‡'
              };
              const message = statusMessages[globalLanguage] || statusMessages['chinese_simplified'];
              showTranslateStatus(message, 2000);
              
            } else if (choice === 'applyGlobal') {
              // ç”¨æˆ·é€‰æ‹©åº”ç”¨å…¨å±€ç¿»è¯‘
              console.log(`ğŸŒ ç”¨æˆ·é€‰æ‹©åº”ç”¨å…¨å±€ç¿»è¯‘: ${LANGUAGE_MAP[globalLanguage]}`);
              
              // æ‰§è¡Œç¿»è¯‘
              await translatePage(globalLanguage, true);
              
              // éªŒè¯ç¿»è¯‘æ˜¯å¦æˆåŠŸ
              if (currentLanguage === globalLanguage) {
                // ä¿å­˜ç¿»è¯‘çŠ¶æ€
                saveCurrentPageState();
                
                // ä½¿ç”¨ç›®æ ‡è¯­è¨€æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯
                const statusMessages = {
                  'english': `Translated to English`,
                  'korean': `í•œêµ­ì–´ë¡œ ë²ˆì—­ë¨`,
                  'japanese': `æ—¥æœ¬èªã«ç¿»è¨³ã•ã‚Œã¾ã—ãŸ`,
                  'chinese_simplified': `å·²ç¿»è¯‘ä¸º${LANGUAGE_MAP[globalLanguage]}`
                };
                const message = statusMessages[globalLanguage] || `å·²ç¿»è¯‘ä¸º${LANGUAGE_MAP[globalLanguage]}`;
                showTranslateStatus(message, 2000);
                
                console.log('âœ… é¡µé¢å¯¼èˆªç¿»è¯‘å®Œæˆ');
              } else {
                throw new Error('ç¿»è¯‘éªŒè¯å¤±è´¥');
              }
            }
          } catch (error) {
            console.error('ğŸ’¥ å¤„ç†å¯¼èˆªé€‰æ‹©å¤±è´¥:', error);
            // å‡ºé”™æ—¶ä¿æŒä¸­æ–‡çŠ¶æ€
            currentLanguage = 'chinese_simplified';
            showTranslateStatus('å¤„ç†å¤±è´¥ï¼Œä¿æŒä¸­æ–‡çŠ¶æ€', 2000);
          }
        }
        
        // å¢å¼ºç‰ˆç¿»è¯‘å‡½æ•° - ä¿®å¤æ¢å¤é€»è¾‘å’Œè¯­è¨€ä¸€è‡´æ€§ï¼Œæ”¯æŒä¸­æ–­
        window.translateTo = async (language) => {
          if (!LANGUAGE_MAP[language]) {
            console.warn(`âŒ ä¸æ”¯æŒçš„è¯­è¨€: ${language}`);
            showTranslateStatus('ä¸æ”¯æŒçš„è¯­è¨€', 2000);
            return false;
          }
          
          // ä¼˜åŒ–çš„ä¸­æ–­å¤„ç†é€»è¾‘
          if (isTranslating) {
            if (language === 'chinese_simplified') {
              // ç”¨æˆ·åˆ‡æ¢åˆ°ä¸­æ–‡ï¼Œç«‹å³ä¸­æ–­å¹¶æ¢å¤
              console.log('ğŸ›‘ ç”¨æˆ·åˆ‡æ¢åˆ°ä¸­æ–‡ï¼Œä¸­æ–­å½“å‰ç¿»è¯‘å¹¶ç«‹å³æ¢å¤');
              await cancelCurrentTranslation('ç”¨æˆ·åˆ‡æ¢åˆ°ä¸­æ–‡');
              
              // ç¡®ä¿è¯­è¨€çŠ¶æ€æ­£ç¡®è®¾ç½®
              currentLanguage = 'chinese_simplified';
              
              // ä¿å­˜å½“å‰é¡µé¢çŠ¶æ€
              const pageKey = getCurrentPageKey();
              pageTranslationStates.set(pageKey, {
                language: 'chinese_simplified',
                timestamp: Date.now(),
                url: window.location.href,
                explicit: true // æ ‡è®°ä¸ºç”¨æˆ·æ˜ç¡®é€‰æ‹©çš„çŠ¶æ€
              });
              
              try {
                savePersistentCache();
              } catch (error) {
                console.warn('âš ï¸ ä¿å­˜çŠ¶æ€å¤±è´¥:', error);
              }
              
              showTranslateStatus('å·²æ¢å¤ä¸­æ–‡', 2000);
              console.log('âœ… ç¿»è¯‘ä¸­æ–­å¹¶æ¢å¤ä¸­æ–‡å®Œæˆ');
              return true;
              
            } else if (language !== currentLanguage) {
              // ç”¨æˆ·åˆ‡æ¢åˆ°å…¶ä»–è¯­è¨€ï¼Œä¸­æ–­å½“å‰ç¿»è¯‘å¹¶åˆ‡æ¢
              console.log('ğŸ”„ ç”¨æˆ·åˆ‡æ¢ç¿»è¯‘è¯­è¨€ï¼Œä¸­æ–­å½“å‰ç¿»è¯‘');
              await cancelCurrentTranslation('åˆ‡æ¢ç¿»è¯‘è¯­è¨€');
            } else {
              console.log('ğŸ¯ ç›®æ ‡è¯­è¨€ä¸å½“å‰è¯­è¨€ç›¸åŒï¼Œè·³è¿‡å¤„ç†');
              showTranslateStatus(`å½“å‰å·²æ˜¯${LANGUAGE_MAP[language]}`, 2000);
              return true;
            }
          }
          
          try {
            console.log(`ğŸ¯ å¼€å§‹ç¿»è¯‘: ${LANGUAGE_MAP[currentLanguage]} -> ${LANGUAGE_MAP[language]}`);
            
            // å¦‚æœç›®æ ‡è¯­è¨€ä¸å½“å‰è¯­è¨€ç›¸åŒï¼Œè·³è¿‡å¤„ç†
            if (language === currentLanguage) {
              console.log('ğŸ¯ ç›®æ ‡è¯­è¨€ä¸å½“å‰è¯­è¨€ç›¸åŒï¼Œè·³è¿‡å¤„ç†');
              showTranslateStatus(`å½“å‰å·²æ˜¯${LANGUAGE_MAP[language]}`, 2000);
              return true;
            }
            
            if (language === 'chinese_simplified') {
              // æ¢å¤ä¸­æ–‡ - ä¿®å¤å¼¹çª—é€»è¾‘
              console.log('ğŸ”„ æ¢å¤ä¸­æ–‡çŠ¶æ€ï¼Œæ£€æŸ¥æ˜¯å¦éœ€è¦ç”¨æˆ·é€‰æ‹©');
              
              // å…³é”®ä¿®å¤ï¼šæ£€æŸ¥å½“å‰è¯­è¨€æ˜¯å¦ä¸ºä¸­æ–‡ï¼Œå¦‚æœå·²ç»æ˜¯ä¸­æ–‡åˆ™æ— éœ€å¼¹çª—
              if (currentLanguage === 'chinese_simplified') {
                console.log('ğŸ¯ å½“å‰å·²æ˜¯ä¸­æ–‡ï¼Œæ— éœ€å¤„ç†');
                showTranslateStatus('å½“å‰å·²æ˜¯ä¸­æ–‡', 2000);
                return true;
              }
              
              const hasGlobalPreference = globalTranslationPreference && 
                                        globalTranslationPreference !== 'chinese_simplified' &&
                                        LANGUAGE_MAP[globalTranslationPreference];
              
              const otherPagesCount = Array.from(pageTranslationStates.values()).filter(state => 
                state.language && 
                state.language !== 'chinese_simplified' &&
                LANGUAGE_MAP[state.language] &&
                state.timestamp &&
                (Date.now() - state.timestamp < CACHE_MAX_AGE)
              ).length;
              
              let userChoice = 'currentPageOnly';
              
              // ä¿®å¤å¼¹çª—æ˜¾ç¤ºé€»è¾‘ï¼šåªæœ‰åœ¨æœ‰å…¶ä»–ç¿»è¯‘çŠ¶æ€æ—¶æ‰æ˜¾ç¤ºå¼¹çª—
              if (hasGlobalPreference || otherPagesCount > 0) {
                console.log('ğŸ”„ æ˜¾ç¤ºç”¨æˆ·é€‰æ‹©å¼¹çª—');
                try {
                  userChoice = await createTranslationChoiceDialog();
                  console.log(`ğŸ‘¤ ç”¨æˆ·é€‰æ‹©: ${userChoice}`);
                } catch (error) {
                  console.warn('âš ï¸ ç”¨æˆ·é€‰æ‹©å¼¹çª—å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é€‰æ‹©:', error);
                  userChoice = 'currentPageOnly';
                }
              }
              
              // æ¢å¤å½“å‰é¡µé¢ä¸ºä¸­æ–‡
              await translatePage(language, false);
              
              if (userChoice === 'clearGlobalPreference') {
                // æ¸…é™¤æ‰€æœ‰ç¿»è¯‘è®¾ç½®
                console.log('ğŸ§¹ æ¸…é™¤æ‰€æœ‰ç¿»è¯‘è®¾ç½®');
                globalTranslationPreference = null;
                pageTranslationStates.clear();
                
                showTranslateStatus('å·²æ¸…é™¤æ‰€æœ‰ç¿»è¯‘è®¾ç½®', 2500);
              } else {
                // ä»…æ¢å¤å½“å‰é¡µé¢ï¼Œä¿ç•™å…¶ä»–è®¾ç½®
                console.log('ğŸ“ ä»…æ¢å¤å½“å‰é¡µé¢ï¼Œä¿ç•™å…¶ä»–ç¿»è¯‘è®¾ç½®');
                
                // æ˜ç¡®ä¿å­˜å½“å‰é¡µé¢çš„ä¸­æ–‡çŠ¶æ€ï¼Œç¡®ä¿ä¸å—å…¨å±€åå¥½å½±å“
                const pageKey = getCurrentPageKey();
                pageTranslationStates.set(pageKey, {
                  language: 'chinese_simplified',
                  timestamp: Date.now(),
                  url: window.location.href,
                  explicit: true // æ ‡è®°ä¸ºç”¨æˆ·æ˜ç¡®é€‰æ‹©çš„çŠ¶æ€
                });
                
                console.log(`ğŸ“„ å·²æ˜ç¡®è®¾ç½®é¡µé¢ ${pageKey} ä¸ºä¸­æ–‡çŠ¶æ€ï¼Œä¸å—å…¨å±€åå¥½å½±å“`);
                showTranslateStatus('å·²æ¢å¤å½“å‰é¡µé¢ï¼Œå…¶ä»–é¡µé¢ä¿æŒç¿»è¯‘çŠ¶æ€', 2500);
              }
              
              currentLanguage = 'chinese_simplified';
              
            } else {
              // ç¿»è¯‘åˆ°å…¶ä»–è¯­è¨€
              console.log(`ğŸŒ ç¿»è¯‘åˆ°: ${LANGUAGE_MAP[language]}`);
              
              await translatePage(language, false);
              
              // éªŒè¯ç¿»è¯‘æ˜¯å¦æˆåŠŸ
              if (currentLanguage === language && originalTexts.size > 0) {
                // è®¾ç½®å…¨å±€ç¿»è¯‘åå¥½
                globalTranslationPreference = language;
                console.log(`ğŸŒ å…¨å±€ç¿»è¯‘åå¥½å·²è®¾ç½®ä¸º: ${LANGUAGE_MAP[language]}`);
                
                // ä¿å­˜å½“å‰é¡µé¢çŠ¶æ€
                saveCurrentPageState();
                
                // ä½¿ç”¨ç›®æ ‡è¯­è¨€æ˜¾ç¤ºé€šçŸ¥
                const successMessages = {
                  'english': `å·²ç¿»è¯‘ä¸ºEnglish`,
                  'korean': `ì´ë¯¸ í•œêµ­ì–´ë¡œ ë²ˆì—­ë¨`,
                  'japanese': `æ—¥æœ¬èªã«ç¿»è¨³ã•ã‚Œã¾ã—ãŸ`
                };
                const message = successMessages[language] || `å·²ç¿»è¯‘ä¸º${LANGUAGE_MAP[language]}`;
                showTranslateStatus(message, 2000, language);
              } else {
                throw new Error('ç¿»è¯‘éªŒè¯å¤±è´¥ - çŠ¶æ€ä¸åŒ¹é…');
              }
            }
            
            // ä¿å­˜æŒä¹…åŒ–ç¼“å­˜
            try {
              savePersistentCache();
            } catch (error) {
              console.warn('âš ï¸ ä¿å­˜çŠ¶æ€å¤±è´¥:', error);
            }
            
            console.log(`âœ… ç¿»è¯‘å®Œæˆ: ${LANGUAGE_MAP[currentLanguage]}`);
            return true;
            
          } catch (error) {
            console.error('ğŸ’¥ ç¿»è¯‘å¤±è´¥:', error);
            showTranslateStatus('ç¿»è¯‘å¤±è´¥ï¼Œè¯·é‡è¯•', 3000);
            
            // é”™è¯¯æ¢å¤ - é‡ç½®ä¸ºå®‰å…¨çŠ¶æ€
            try {
              if (originalTexts.size > 0) {
                originalTexts.forEach((originalText, node) => {
                  if (node.parentNode) {
                    node.textContent = originalText;
                  }
                });
              }
              
              // æ¸…ç†ç¿»è¯‘æ ‡è®°
              const translatedElements = document.querySelectorAll('[data-translated]');
              translatedElements.forEach(element => {
                const originalText = element.getAttribute('data-original-text');
                if (originalText) {
                  element.textContent = originalText;
                }
                element.removeAttribute('data-translated');
                element.removeAttribute('data-original-text');
              });
              
              currentLanguage = 'chinese_simplified';
              console.log('ğŸ”„ å·²æ¢å¤ä¸ºä¸­æ–‡çŠ¶æ€');
            } catch (recoveryError) {
              console.error('ğŸ’¥ é”™è¯¯æ¢å¤å¤±è´¥:', recoveryError);
            }
            
            return false;
          } finally {
            // ç¡®ä¿æ€»æ˜¯é‡ç½®ä¸­æ–­æ§åˆ¶çŠ¶æ€
            shouldCancelTranslation = false;
            if (translationAbortController) {
              translationAbortController = null;
            }
          }
        };
        
        // é¡µé¢å¯¼èˆªå¤„ç†
        async function handlePageNavigation() {
          if (isTranslating) {
            console.log('â¸ï¸ ç¿»è¯‘è¿›è¡Œä¸­ï¼Œè·³è¿‡é¡µé¢å¯¼èˆªå¤„ç†');
            return;
          }
          
          // é‡ç½®å¯¼èˆªå¼¹çª—æ ‡å¿—ï¼Œå…è®¸æ–°é¡µé¢æ˜¾ç¤ºé€‰æ‹©å¼¹çª—
          navigationDialogShown = false;
          
          console.log('ğŸš€ å¼€å§‹å¤„ç†é¡µé¢å¯¼èˆª...');
          
          try {
            if (originalTexts.size > 0) {
              saveCurrentPageState();
            }
            
            originalTexts.clear();
            
            const pageKey = getCurrentPageKey();
            const savedState = pageTranslationStates.get(pageKey);
            
            let targetLanguage = 'chinese_simplified';
            let shouldTranslate = false;
            
            const isValidGlobalPreference = globalTranslationPreference && 
                                          globalTranslationPreference !== 'chinese_simplified' && 
                                          LANGUAGE_MAP[globalTranslationPreference];
            
            const isValidPageState = savedState && 
                                    savedState.language && 
                                    LANGUAGE_MAP[savedState.language] &&
                                    savedState.timestamp && 
                                    (Date.now() - savedState.timestamp < CACHE_MAX_AGE);
            
            // ä¿®å¤ï¼šæ­£ç¡®å¤„ç†é¡µé¢ç‹¬ç«‹çŠ¶æ€ï¼Œé¿å…"ä»…æ¢å¤å½“å‰é¡µé¢"å½±å“å…¶ä»–é¡µé¢
            if (isValidPageState) {
              if (savedState.language === 'chinese_simplified') {
                // è¯¥é¡µé¢è¢«æ˜ç¡®è®¾ç½®ä¸ºä¸­æ–‡çŠ¶æ€ï¼Œä¸åº”ç”¨å…¨å±€ç¿»è¯‘åå¥½
                targetLanguage = 'chinese_simplified';
                currentLanguage = 'chinese_simplified';
                shouldTranslate = false;
                
                const translatedElements = document.querySelectorAll('[data-translated]');
                if (translatedElements.length > 0) {
                  translatedElements.forEach(element => {
                    const originalText = element.getAttribute('data-original-text');
                    if (originalText) {
                      element.textContent = originalText;
                      element.removeAttribute('data-translated');
                      element.removeAttribute('data-original-text');
                    }
                  });
                }
                
                const isExplicit = savedState.explicit ? 'ï¼ˆç”¨æˆ·æ˜ç¡®è®¾ç½®ï¼‰' : '';
                console.log(`ğŸ“ é¡µé¢å¯¼èˆªå¤„ç†å®Œæˆï¼Œä¿æŒä¸­æ–‡çŠ¶æ€${isExplicit}`);
                return;
              } else {
                // è¯¥é¡µé¢æœ‰æœ‰æ•ˆçš„ç¿»è¯‘çŠ¶æ€
                targetLanguage = savedState.language;
                shouldTranslate = true;
                console.log(`ğŸ“„ ä½¿ç”¨é¡µé¢ä¿å­˜çš„ç¿»è¯‘çŠ¶æ€: ${LANGUAGE_MAP[targetLanguage]}`);
              }
            } else {
              // é¡µé¢æ²¡æœ‰ä¿å­˜çŠ¶æ€ï¼Œæ£€æŸ¥æ˜¯å¦åº”ç”¨å…¨å±€åå¥½
              if (isValidGlobalPreference) {
                // æ£€æµ‹æ˜¯å¦éœ€è¦å¼¹å‡ºç”¨æˆ·é€‰æ‹©æ¡†
                // æ¡ä»¶ï¼šå­˜åœ¨å…¨å±€ç¿»è¯‘åå¥½ï¼Œä¸”å½“å‰é¡µé¢ä¸ºä¸­æ–‡çŠ¶æ€ï¼ˆæ— ç¿»è¯‘å†…å®¹ï¼‰
                const hasTranslatedContent = document.querySelectorAll('[data-translated]').length > 0;
                
                if (!hasTranslatedContent && !navigationDialogShown) {
                  // é¡µé¢ä¸ºä¸­æ–‡çŠ¶æ€ï¼Œä½†æœ‰å…¨å±€ç¿»è¯‘åå¥½ï¼Œå¼¹å‡ºé€‰æ‹©æ¡†
                  console.log(`ğŸ¤” é¡µé¢ä¸ºä¸­æ–‡ä½†å­˜åœ¨å…¨å±€ç¿»è¯‘åå¥½${LANGUAGE_MAP[globalTranslationPreference]}ï¼Œå¼¹å‡ºç”¨æˆ·é€‰æ‹©æ¡†`);
                  
                  navigationDialogShown = true; // è®¾ç½®æ ‡å¿—é˜²æ­¢é‡å¤æ˜¾ç¤º
                  
                  setTimeout(async () => {
                    try {
                      const userChoice = await createNavigationChoiceDialog(globalTranslationPreference);
                      await handleNavigationChoice(userChoice, globalTranslationPreference, pageKey);
                    } catch (error) {
                      console.warn('âš ï¸ å¤„ç†å¯¼èˆªé€‰æ‹©å¤±è´¥:', error);
                      // é»˜è®¤ä¿æŒä¸­æ–‡çŠ¶æ€
                      currentLanguage = 'chinese_simplified';
                    } finally {
                      // é‡ç½®æ ‡å¿—ï¼Œå…è®¸ä¸‹æ¬¡é¡µé¢å¯¼èˆªæ—¶å†æ¬¡æ˜¾ç¤º
                      setTimeout(() => {
                        navigationDialogShown = false;
                      }, 2000);
                    }
                  }, 300); // å»¶è¿Ÿä»¥ç¡®ä¿é¡µé¢å†…å®¹åŠ è½½å®Œæˆ
                  
                  return; // ç­‰å¾…ç”¨æˆ·é€‰æ‹©ï¼Œä¸æ‰§è¡Œåç»­é€»è¾‘
                } else {
                  // é¡µé¢å·²æœ‰ç¿»è¯‘å†…å®¹ï¼Œç›´æ¥åº”ç”¨å…¨å±€åå¥½
                  targetLanguage = globalTranslationPreference;
                  shouldTranslate = true;
                  console.log(`ğŸŒ åº”ç”¨å…¨å±€ç¿»è¯‘åå¥½: ${LANGUAGE_MAP[targetLanguage]} (é¡µé¢æ— æ˜ç¡®çŠ¶æ€)`);
                }
              } else {
                // æ²¡æœ‰å…¨å±€åå¥½ï¼Œä¿æŒä¸­æ–‡
                targetLanguage = 'chinese_simplified';
                shouldTranslate = false;
                console.log('ğŸ“ é¡µé¢æ— çŠ¶æ€ä¸”æ— å…¨å±€åå¥½ï¼Œä¿æŒä¸­æ–‡');
              }
            }
            
            currentLanguage = targetLanguage;
            
            if (shouldTranslate) {
              console.log(`ğŸ”„ å¼€å§‹è‡ªåŠ¨ç¿»è¯‘åˆ°: ${LANGUAGE_MAP[targetLanguage]}`);
              
              setTimeout(async () => {
                try {
                  await translatePage(targetLanguage, true);
                  console.log('âœ… ç¿»è¯‘çŠ¶æ€è‡ªåŠ¨æ¢å¤æˆåŠŸ');
                } catch (error) {
                  console.warn('âš ï¸ è‡ªåŠ¨æ¢å¤ç¿»è¯‘å¤±è´¥:', error);
                  currentLanguage = 'chinese_simplified';
                }
              }, 500);
            }
            
            try {
              savePersistentCache();
            } catch (error) {
              console.warn('âš ï¸ ä¿å­˜çŠ¶æ€å¤±è´¥:', error);
            }
            
            console.log('ğŸ‰ é¡µé¢å¯¼èˆªå¤„ç†å®Œæˆï¼Œå½“å‰è¯­è¨€:', LANGUAGE_MAP[currentLanguage]);
            
          } catch (error) {
            console.error('ğŸ’¥ é¡µé¢å¯¼èˆªå¤„ç†å¤±è´¥:', error);
            currentLanguage = 'chinese_simplified';
            globalTranslationPreference = null;
            originalTexts.clear();
            
            try {
              savePersistentCache();
            } catch (saveError) {
              console.warn('âš ï¸ ä¿å­˜é‡ç½®çŠ¶æ€å¤±è´¥:', saveError);
            }
          }
        }
        
        // é¡µé¢å¯¼èˆªç›‘å¬å™¨
        function setupNavigationObserver() {
          let navigationTimeout = null;
          let isNavigating = false;
          
          const handlePageChange = async () => {
            if (isNavigating) return;
            isNavigating = true;
            
            try {
              const currentUrl = window.location.href;
              if (currentUrl !== lastUrl) {
                console.log('ğŸ”„ é¡µé¢å¯¼èˆªæ£€æµ‹:', lastUrl, '->', currentUrl);
                lastUrl = currentUrl;
                
                await new Promise(resolve => {
                  if (document.readyState === 'complete') {
                    resolve();
                  } else {
                    const onReady = () => {
                      if (document.readyState === 'complete') {
                        document.removeEventListener('readystatechange', onReady);
                        resolve();
                      }
                    };
                    document.addEventListener('readystatechange', onReady);
                  }
                });
                
                await new Promise(resolve => setTimeout(resolve, 200));
                await handlePageNavigation();
              }
            } catch (error) {
              console.error('é¡µé¢å˜åŒ–å¤„ç†å¤±è´¥:', error);
            } finally {
              isNavigating = false;
            }
          };
          
          const debouncedPageChange = () => {
            if (navigationTimeout) {
              clearTimeout(navigationTimeout);
            }
            navigationTimeout = setTimeout(handlePageChange, 100);
          };
          
          window.addEventListener('popstate', debouncedPageChange);
          
          const originalPushState = history.pushState;
          const originalReplaceState = history.replaceState;
          
          history.pushState = function(...args) {
            originalPushState.apply(this, args);
            setTimeout(debouncedPageChange, 50);
          };
          
          history.replaceState = function(...args) {
            originalReplaceState.apply(this, args);
            setTimeout(debouncedPageChange, 50);
          };
          
          if (window.document$ && typeof window.document$.subscribe === 'function') {
            window.document$.subscribe(() => {
              console.log('ğŸ“„ Material for MkDocs é¡µé¢å˜åŒ–äº‹ä»¶');
              setTimeout(debouncedPageChange, 150);
            });
          }
          
          window.addEventListener('beforeunload', () => {
            if (navigationTimeout) clearTimeout(navigationTimeout);
          });
        }
        
        // å·¥å…·æ–¹æ³•
        window.getCurrentLanguage = () => {
          if (!currentLanguage || !LANGUAGE_MAP[currentLanguage]) {
            currentLanguage = 'chinese_simplified';
          }
          return currentLanguage;
        };
        
        window.getCurrentLanguageName = () => LANGUAGE_MAP[window.getCurrentLanguage()] || 'ä¸­æ–‡';
        
        window.clearTranslateCache = () => {
          try {
            translationCache.clear();
            pageTranslationStates.clear();
            originalTexts.clear();
            globalTranslationPreference = null;
            currentLanguage = 'chinese_simplified';
            
            [STORAGE_PREFIX + 'cache', STORAGE_PREFIX + 'preference', STORAGE_PREFIX + 'states'].forEach(key => {
              try { localStorage.removeItem(key); } catch (e) {}
            });
            
            console.log('âœ… æ‰€æœ‰ç¿»è¯‘ç¼“å­˜å’ŒçŠ¶æ€å·²æ¸…é™¤');
            showTranslateStatus('ç¼“å­˜å·²æ¸…é™¤ï¼Œé‡ç½®ä¸ºä¸­æ–‡', 2000);
            
          } catch (error) {
            console.error('ğŸ’¥ æ¸…é™¤ç¼“å­˜æ—¶å‘ç”Ÿé”™è¯¯:', error);
            showTranslateStatus('æ¸…é™¤ç¼“å­˜å¤±è´¥', 2000);
          }
        };
        
        // åˆå§‹åŒ–å‡½æ•°
        function initGLMTranslate() {
          try {
            console.log('ğŸš€ å¼€å§‹åˆå§‹åŒ–GLMç¿»è¯‘åŠŸèƒ½...');
            
            initPersistentCache();
            console.log('ğŸ’¾ ç¼“å­˜åˆå§‹åŒ–å®Œæˆ');
            
            // åˆå§‹åŒ–æ€§èƒ½ä¼˜åŒ–ç»„ä»¶
            try {
              TranslationWorkerManager.init();
              console.log('ğŸ‘¨â€ğŸ’» Web Workers åˆå§‹åŒ–å®Œæˆ');
            } catch (workerError) {
              console.warn('âš ï¸ Web Workers åˆå§‹åŒ–å¤±è´¥ï¼Œå°†ä½¿ç”¨ä¸»çº¿ç¨‹ç¿»è¯‘:', workerError);
            }
            
            try {
              VirtualScrollOptimizer.init();
              console.log('ğŸ“± è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–å™¨åˆå§‹åŒ–å®Œæˆ');
            } catch (scrollError) {
              console.warn('âš ï¸ è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–å™¨åˆå§‹åŒ–å¤±è´¥:', scrollError);
            }
            
            // åˆå§‹åŒ–å¿«æ·é”®æ”¯æŒ
            try {
              ShortcutManager.init();
              console.log('âŒ¨ï¸ å¿«æ·é”®ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ');
            } catch (shortcutError) {
              console.warn('âš ï¸ å¿«æ·é”®ç®¡ç†å™¨åˆå§‹åŒ–å¤±è´¥:', shortcutError);
            }
            
            setupNavigationObserver();
            console.log('ğŸ‘ï¸ å¯¼èˆªç›‘å¬å™¨è®¾ç½®å®Œæˆ');
            
            const pageKey = getCurrentPageKey();
            const savedState = pageTranslationStates.get(pageKey);
            
            const isValidPageState = savedState && 
                                    savedState.language && 
                                    LANGUAGE_MAP[savedState.language] &&
                                    savedState.timestamp && 
                                    (Date.now() - savedState.timestamp < CACHE_MAX_AGE);
            
            const isValidGlobalPreference = globalTranslationPreference && 
                                          globalTranslationPreference !== 'chinese_simplified' && 
                                          LANGUAGE_MAP[globalTranslationPreference];
            
            let shouldAutoTranslate = false;
            let targetLanguage = 'chinese_simplified';
            
            if (isValidPageState) {
              if (savedState.language === 'chinese_simplified') {
                const isExplicit = savedState.explicit ? 'ï¼ˆç”¨æˆ·æ˜ç¡®è®¾ç½®ï¼‰' : '';
                console.log(`ğŸ“ æ£€æµ‹åˆ°é¡µé¢æ˜ç¡®è®¾ç½®ä¸ºä¸­æ–‡çŠ¶æ€${isExplicit}`);
                targetLanguage = 'chinese_simplified';
                currentLanguage = 'chinese_simplified';
                shouldAutoTranslate = false;
                
                originalTexts.clear();
                
                const translatedElements = document.querySelectorAll('[data-translated]');
                if (translatedElements.length > 0) {
                  console.log('ğŸ”„ åˆå§‹åŒ–æ—¶æ£€æµ‹åˆ°ç¿»è¯‘å†…å®¹ï¼Œæ¢å¤ä¸ºä¸­æ–‡');
                  translatedElements.forEach(element => {
                    const originalText = element.getAttribute('data-original-text');
                    if (originalText) {
                      element.textContent = originalText;
                      element.removeAttribute('data-translated');
                      element.removeAttribute('data-original-text');
                    }
                  });
                }
                
                window.glmTranslateInitialized = true;
                console.log(`âœ… GLMç¿»è¯‘åŠŸèƒ½åˆå§‹åŒ–å®Œæˆï¼ˆä¸­æ–‡çŠ¶æ€${isExplicit}ï¼‰`);
                return;
              } else {
                console.log(`ğŸ”„ æ£€æµ‹åˆ°æœ‰æ•ˆé¡µé¢ç¿»è¯‘çŠ¶æ€: ${LANGUAGE_MAP[savedState.language]}`);
                targetLanguage = savedState.language;
                currentLanguage = savedState.language;
                shouldAutoTranslate = true;
              }
            } else if (isValidGlobalPreference) {
              console.log(`ğŸŒ æ£€æµ‹åˆ°æœ‰æ•ˆå…¨å±€ç¿»è¯‘åå¥½: ${LANGUAGE_MAP[globalTranslationPreference]}`);
              targetLanguage = globalTranslationPreference;
              currentLanguage = globalTranslationPreference;
              shouldAutoTranslate = true;
            } else {
              console.log('ğŸ“ æ— æœ‰æ•ˆç¿»è¯‘çŠ¶æ€æˆ–å…¨å±€åå¥½ï¼Œä¿æŒä¸­æ–‡çŠ¶æ€');
              currentLanguage = 'chinese_simplified';
              
              if (globalTranslationPreference && !LANGUAGE_MAP[globalTranslationPreference]) {
                globalTranslationPreference = null;
                savePersistentCache();
              }
            }
            
            if (shouldAutoTranslate) {
              setTimeout(async () => {
                try {
                  console.log(`ğŸ”„ é™é»˜æ¢å¤ç¿»è¯‘çŠ¶æ€: ${LANGUAGE_MAP[targetLanguage]}`);
                  await translatePage(targetLanguage, true);
                  console.log('âœ… ç¿»è¯‘çŠ¶æ€è‡ªåŠ¨æ¢å¤æˆåŠŸ');
                } catch (error) {
                  console.warn('âš ï¸ è‡ªåŠ¨æ¢å¤ç¿»è¯‘å¤±è´¥:', error);
                  currentLanguage = 'chinese_simplified';
                }
              }, 500);
            }
            
            window.glmTranslateInitialized = true;
            console.log('âœ… GLMç¿»è¯‘åŠŸèƒ½åˆå§‹åŒ–å®Œæˆ');
            console.log('ğŸ¯ ä¼˜åŒ–åŠŸèƒ½çŠ¶æ€:');
            console.log(`  - Web Workers: ${TranslationWorkerManager.workers.length > 0 ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}`);
            console.log(`  - è™šæ‹Ÿæ»šåŠ¨: ${VirtualScrollOptimizer.observer ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}`);
            console.log(`  - å¿«æ·é”®æ”¯æŒ: ${ShortcutManager.isInitialized ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}`);
            console.log(`  - è¯­ä¹‰ç¼“å­˜: ${semanticCache ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}`);
            console.log(`  - ä¸“ä¸šæœ¯è¯­: ${Object.keys(TECHNICAL_TERMS).length > 0 ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}`);
            
          } catch (error) {
            console.error('ğŸ’¥ GLMç¿»è¯‘åŠŸèƒ½åˆå§‹åŒ–å¤±è´¥:', error);
            currentLanguage = 'chinese_simplified';
            globalTranslationPreference = null;
          }
        }
        
        if (document.readyState === 'complete') {
          initGLMTranslate();
        } else {
          document.addEventListener('DOMContentLoaded', initGLMTranslate);
        }
        
        // é¡µé¢å¸è½½æ—¶æ¸…ç†èµ„æº
        window.addEventListener('beforeunload', () => {
          try {
            if (TranslationWorkerManager && TranslationWorkerManager.destroy) {
              TranslationWorkerManager.destroy();
            }
            if (VirtualScrollOptimizer && VirtualScrollOptimizer.destroy) {
              VirtualScrollOptimizer.destroy();
            }
            console.log('ğŸ§¹ ç¿»è¯‘åŠŸèƒ½èµ„æºå·²æ¸…ç†');
          } catch (error) {
            console.warn('âš ï¸ æ¸…ç†ç¿»è¯‘åŠŸèƒ½èµ„æºæ—¶å‡ºé”™:', error);
          }
        });
        
      })();
      </script>

      <!-- é¡µè„šåŠŸèƒ½è„šæœ¬ - å·²ä¼˜åŒ– -->
      <script>
        (() => {
          'use strict';
          
          if (window.footerInitialized) return;
          
          const START_DATE = new Date('2022-10-20T00:00:00').getTime();
          let timeUpdateInterval;
          let visitCountObserver;
          
          // ä¼˜åŒ–çš„æ—¶é—´è®¡ç®—
          const calculateRuntime = () => {
            const diff = Math.floor((Date.now() - START_DATE) / 1000);
            const days = Math.floor(diff / 86400);
            const hours = Math.floor((diff % 86400) / 3600);
            const minutes = Math.floor((diff % 3600) / 60);
            const seconds = diff % 60;
            return `${days}å¤©${hours}æ—¶${minutes}åˆ†${seconds}ç§’`;
          };
          
          const updateTime = () => {
            const time = calculateRuntime();
            const desktop = document.getElementById('box1');
            const mobile = document.getElementById('box1_mobile');
            
            if (desktop) desktop.textContent = time;
            if (mobile) mobile.textContent = time;
          };
          
          const loadVisitCounter = () => {
            if (document.querySelector('script[src*="finicounter.eu.org"]')) return;
            
            const script = document.createElement('script');
            script.src = '//finicounter.eu.org/finicounter.js';
            script.async = true;
            script.onerror = () => {
              const desktop = document.getElementById('finicount_views');
              const mobile = document.getElementById('finicount_views_mobile');
              if (desktop) desktop.textContent = 'ç»Ÿè®¡ä¸­...';
              if (mobile) mobile.textContent = 'ç»Ÿè®¡ä¸­...';
            };
            document.head.appendChild(script);
          };
          
          const syncVisitCount = () => {
            const desktop = document.getElementById('finicount_views');
            const mobile = document.getElementById('finicount_views_mobile');
            if (desktop?.textContent && mobile && !desktop.textContent.includes('åŠ è½½ä¸­')) {
              mobile.textContent = desktop.textContent;
            }
          };
          
          const setupVisitCountObserver = () => {
            const desktop = document.getElementById('finicount_views');
            if (!desktop) return;
            if (visitCountObserver) visitCountObserver.disconnect();
            visitCountObserver = new MutationObserver(syncVisitCount);
            visitCountObserver.observe(desktop, { childList: true, characterData: true });
          };
          
          const cleanup = () => {
            if (timeUpdateInterval) {
              clearInterval(timeUpdateInterval);
              timeUpdateInterval = null;
            }
            if (visitCountObserver) {
              visitCountObserver.disconnect();
              visitCountObserver = null;
            }
          };
          
          const init = () => {
            cleanup();
            updateTime();
            timeUpdateInterval = setInterval(updateTime, 1000);
            loadVisitCounter();
            setupVisitCountObserver();
          };
          
          if (window.document$ && !window.document$.isStopped) {
            window.document$.subscribe(() => setTimeout(init, 200));
          } else {
            if (document.readyState === 'loading') {
              document.addEventListener('DOMContentLoaded', init);
            } else {
              setTimeout(init, 100);
            }
          }
          
          window.addEventListener('beforeunload', cleanup);
          window.footerInitialized = true;
        })();
      </script>

      <!-- ä¼˜åŒ–çš„æ ·å¼ -->
      <style>
        /* Footer backgrounds */
        .md-footer {
          background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        }
        .md-footer-meta {
          background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        /* Layout containers */
        .footer-wrapper {
          width: 100%;
          padding: 0.2rem 0;
          text-align: center;
        }
        .footer-content {
          max-width: 900px;
          margin: 0 auto;
          padding: 0.4rem 0 0;
          display: flex;
          justify-content: center;
        }
        .footer-bottom-section {
          max-width: 900px;
          margin: 0.4rem auto 0;
          padding: 0.4rem 1rem;
          border-top: 1px solid rgba(255, 255, 255, 0.15);
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        /* Visit count styles */
        .footer-visit-count {
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 0.3rem;
          font-size: 0.75rem;
          color: var(--md-footer-fg-color--light);
          width: 100%;
        }
        .footer-item {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0.4rem 0.8rem;
          border-radius: 16px;
          background: rgba(255, 255, 255, 0.1);
          border: 1px solid rgba(255, 255, 255, 0.15);
          -webkit-backdrop-filter: blur(10px);
          backdrop-filter: blur(10px);
          min-width: 160px;
          font-size: 0.8rem;
          transition: all 0.2s ease;
        }
        .footer-item:hover {
          background: rgba(255, 255, 255, 0.15);
          border-color: rgba(81, 143, 193, 0.4);
          transform: translateY(-1px);
        }
        .footer-highlight {
          color: #C2C4C9;
          font-weight: 600;
          margin-left: 0.3rem;
        }

        /* Copyright and social styles */
        .md-footer-copyright {
          text-align: left;
          font-size: 0.75rem;
          opacity: 0.8;
          line-height: 1.2;
        }
        .footer-social {
          display: flex;
          gap: 0.3rem;
          align-items: center;
        }
        .icp-link {
          color: inherit;
          text-decoration: none;
        }
        .icp-link:hover {
          color: #518FC1;
        }

        /* Mobile responsive design */
        @media (max-width: 76.1875em) {
          .footer-visit-count { display: none; }
          .footer-visit-count-mobile {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 0.4em 0.8em;
            padding: 0.2em 0;
            font-size: 0.75rem;
            color: var(--md-footer-fg-color--light);
            text-align: center;
          }
          .footer-bottom-section {
            flex-direction: column;
            gap: 0.6rem;
            text-align: center;
          }
          .md-footer-copyright { text-align: center; }
        }

        /* Desktop specific styles */
        @media (min-width: 76.1875em) {
          .footer-visit-count-mobile { display: none; }
          .footer-visit-count { 
            flex-direction: row; 
            gap: 2rem;
            justify-content: center;
          }
        }
      </style>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "navigation.prune", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "toc.follow", "navigation.expand", "navigation.indexes", "content.tabs.link", "content.tooltips", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/javascripts/unified-instant-handler.js"></script>
      
        <script src="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/javascripts/extra.js"></script>
      
        <script src="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/javascripts/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/javascripts/view.js"></script>
      
    
  </body>
</html>