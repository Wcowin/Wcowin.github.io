.search-highlight {
    /* Base style for all highlights, can be overridden by specific color classes */
    color: #000000;
    padding: 2px 0;
    border-radius: 2px;
    text-shadow: none !important;
    transition: all 0.3s ease;
}

/* Default highlight color if no specific color class is applied */
.search-highlight:not([class*="search-highlight-color-"]) {
    background-color: #ffff00; /* Default yellow */
    box-shadow: 0 0 0 2px rgba(255, 255, 0, 0.3);
    animation: highlight-pulse 1.5s ease-in-out 3;
}

/* Color classes for multi-keyword highlighting */
.search-highlight-color-0 {
    background-color: #ffff00; /* Yellow */
    box-shadow: 0 0 0 2px rgba(255, 255, 0, 0.3);
}

.search-highlight-color-1 {
    background-color: #a0e8ff; /* Light Blue */
    box-shadow: 0 0 0 2px rgba(160, 232, 255, 0.3);
}

.search-highlight-color-2 {
    background-color: #90ee90; /* Light Green */
    box-shadow: 0 0 0 2px rgba(144, 238, 144, 0.3);
}

.search-highlight-color-3 {
    background-color: #ffb6c1; /* Light Pink */
    box-shadow: 0 0 0 2px rgba(255, 182, 193, 0.3);
}

.search-highlight-color-4 {
    background-color: #ffdead; /* Navajo White */
    box-shadow: 0 0 0 2px rgba(255, 222, 173, 0.3);
}

/* Apply pulse animation to all colored highlights */
.search-highlight-color-0 {
    animation: highlight-pulse-color-0 1.5s ease-in-out 3;
}
.search-highlight-color-1 {
    animation: highlight-pulse-color-1 1.5s ease-in-out 3;
}
.search-highlight-color-2 {
    animation: highlight-pulse-color-2 1.5s ease-in-out 3;
}
.search-highlight-color-3 {
    animation: highlight-pulse-color-3 1.5s ease-in-out 3;
}
.search-highlight-color-4 {
    animation: highlight-pulse-color-4 1.5s ease-in-out 3;
}

/* Removed duplicate .search-highlight rule */

/* Default pulse animation for non-colored highlights */
@keyframes highlight-pulse {
    0% { background-color: #ffff00; }
    50% { background-color: #ffeb3b; } /* Slightly darker yellow */
    100% { background-color: #ffff00; }
}

/* Pulse animations for specific colors */
@keyframes highlight-pulse-color-0 {
    0% { background-color: #ffff00; } /* Yellow */
    50% { background-color: #ffeb3b; }
    100% { background-color: #ffff00; }
}

@keyframes highlight-pulse-color-1 {
    0% { background-color: #a0e8ff; } /* Light Blue */
    50% { background-color: #79d7ff; }
    100% { background-color: #a0e8ff; }
}

@keyframes highlight-pulse-color-2 {
    0% { background-color: #90ee90; } /* Light Green */
    50% { background-color: #77dd77; }
    100% { background-color: #90ee90; }
}

@keyframes highlight-pulse-color-3 {
    0% { background-color: #ffb6c1; } /* Light Pink */
    50% { background-color: #ff99aa; }
    100% { background-color: #ffb6c1; }
}

@keyframes highlight-pulse-color-4 {
    0% { background-color: #ffdead; } /* Navajo White */
    50% { background-color: #ffd3a1; }
    100% { background-color: #ffdead; }
}

/* 闪烁动画提示用户 */
.search-highlight-flash {
    background-color: #ff3366 !important;
    color: white !important;
    box-shadow: 0 0 0 3px rgba(255, 51, 102, 0.5), 0 0 20px rgba(255, 51, 102, 0.8) !important;
    animation: flash-pulse 0.8s ease-in-out 3 !important;
}

@keyframes flash-pulse {
    0%, 100% { background-color: #ff3366; }
    50% { background-color: #ff0066; }
}

/* 当前活动高亮 */
.search-highlight-active {
    background-color: #ff9900;
    box-shadow: 0 0 0 3px rgba(255, 153, 0, 0.5), 0 0 8px rgba(255, 153, 0, 0.7);
    animation: active-highlight-pulse 1.5s ease-in-out infinite;
}

@keyframes active-highlight-pulse {
    0% { background-color: #ff9900; box-shadow: 0 0 0 3px rgba(255, 153, 0, 0.5); }
    50% { background-color: #ff6600; box-shadow: 0 0 0 3px rgba(255, 102, 0, 0.7), 0 0 12px rgba(255, 102, 0, 0.5); }
    100% { background-color: #ff9900; box-shadow: 0 0 0 3px rgba(255, 153, 0, 0.5); }
}

/* 设置搜索结果项的交互效果 */
.search-result-item {
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.search-result-item:hover {
    background-color: rgba(0, 0, 0, 0.05);
}

/* 高亮导航容器 */
.highlight-nav-container {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
    padding: 10px 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 15px;
    z-index: 1000;
    font-size: 14px;
    transition: all 0.3s ease;
    max-width: 95%;
}

/* 高亮导航信息 */
.highlight-nav-info {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.highlight-count, .highlight-position {
    font-weight: bold;
    color: #ff6600;
}

/* 高亮导航控件 */
.highlight-nav-controls {
    display: flex;
    gap: 5px;
}

.highlight-nav-controls button {
    background-color: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 4px;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: 16px;
    padding: 0;
}

.highlight-nav-controls button:hover {
    background-color: #e9e9e9;
    border-color: #ccc;
}

.highlight-close {
    font-size: 18px !important;
}

/* 控制台交互相关样式 */
.console-highlight {
    background-color: #ff3366 !important;
    color: white !important;
    box-shadow: 0 0 0 3px rgba(255, 51, 102, 0.4), 0 0 15px rgba(255, 51, 102, 0.6) !important;
    animation: console-highlight-pulse 2s ease-in-out infinite !important;
}

@keyframes console-highlight-pulse {
    0% { background-color: #ff3366; box-shadow: 0 0 0 3px rgba(255, 51, 102, 0.4); }
    50% { background-color: #ff0066; box-shadow: 0 0 0 5px rgba(255, 51, 102, 0.6), 0 0 20px rgba(255, 51, 102, 0.4); }
    100% { background-color: #ff3366; box-shadow: 0 0 0 3px rgba(255, 51, 102, 0.4); }
}

/* 适配深色模式 */
@media (prefers-color-scheme: dark) {
    .highlight-nav-container {
        background-color: #2d2d2d;
        color: #e0e0e0;
    }
    
    .highlight-nav-controls button {
        background-color: #3d3d3d;
        border-color: #555;
        color: #e0e0e0;
    }
    
    .highlight-nav-controls button:hover {
        background-color: #4d4d4d;
        border-color: #666;
    }
    
    /* 在深色主题中保持高亮的可见性 */
    [data-md-color-scheme="slate"] .search-highlight {
        color: #111111; /* Darker text for better contrast on light highlights in dark mode */
    }

    [data-md-color-scheme="slate"] .search-highlight:not([class*="search-highlight-color-"]) {
        background-color: #ffd700; /* Gold - slightly more vibrant than default yellow */
        box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.5);
        animation-name: highlight-pulse; /* Ensure default pulse is used */
    }

    [data-md-color-scheme="slate"] .search-highlight-color-0 {
        background-color: #ffd700; /* Gold */
        box-shadow: 0 0 0 2px rgba(255, 215, 0, 0.5);
        animation-name: highlight-pulse-color-0;
    }

    [data-md-color-scheme="slate"] .search-highlight-color-1 {
        background-color: #87cefa; /* LightSkyBlue */
        box-shadow: 0 0 0 2px rgba(135, 206, 250, 0.5);
        animation-name: highlight-pulse-color-1;
    }

    [data-md-color-scheme="slate"] .search-highlight-color-2 {
        background-color: #98fb98; /* PaleGreen */
        box-shadow: 0 0 0 2px rgba(152, 251, 152, 0.5);
        animation-name: highlight-pulse-color-2;
    }

    [data-md-color-scheme="slate"] .search-highlight-color-3 {
        background-color: #ffc0cb; /* Pink */
        box-shadow: 0 0 0 2px rgba(255, 192, 203, 0.5);
        animation-name: highlight-pulse-color-3;
    }

    [data-md-color-scheme="slate"] .search-highlight-color-4 {
        background-color: #ffe4b5; /* Moccasin */
        box-shadow: 0 0 0 2px rgba(255, 228, 181, 0.5);
        animation-name: highlight-pulse-color-4;
    }

    /* Update dark mode pulse animations to use the new dark mode colors */
    @media (prefers-color-scheme: dark) {
        @keyframes highlight-pulse {
            0%, 100% { background-color: #ffd700; }
            50% { background-color: #e6c300; } 
        }
        @keyframes highlight-pulse-color-0 {
            0%, 100% { background-color: #ffd700; }
            50% { background-color: #e6c300; } 
        }
        @keyframes highlight-pulse-color-1 {
            0%, 100% { background-color: #87cefa; }
            50% { background-color: #6cbbe6; }
        }
        @keyframes highlight-pulse-color-2 {
            0%, 100% { background-color: #98fb98; }
            50% { background-color: #7fef7f; }
        }
        @keyframes highlight-pulse-color-3 {
            0%, 100% { background-color: #ffc0cb; }
            50% { background-color: #ffaab5; }
        }
        @keyframes highlight-pulse-color-4 {
            0%, 100% { background-color: #ffe4b5; }
            50% { background-color: #ffdca0; }
        }
    }

    [data-md-color-scheme="slate"] .search-highlight-active {
        background-color: #ff8c00; /* DarkOrange */
        color: #ffffff; /* Keep text white for active highlight */
        box-shadow: 0 0 0 3px rgba(255, 140, 0, 0.6), 0 0 10px rgba(255, 140, 0, 0.8);
        /* animation-name will be active-highlight-pulse, defined globally */
    }

    /* Ensure active highlight pulse uses appropriate dark mode colors */
    @media (prefers-color-scheme: dark) {
        @keyframes active-highlight-pulse {
            0%, 100% { background-color: #ff8c00; box-shadow: 0 0 0 3px rgba(255, 140, 0, 0.6); }
            50% { background-color: #e67e00; box-shadow: 0 0 0 4px rgba(255, 140, 0, 0.8), 0 0 15px rgba(255, 140, 0, 0.6); }
        }
    }
}
