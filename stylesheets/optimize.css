/* 性能优化CSS */

/* 使用CSS变量减少重复代码 */
:root {
  /* 主题颜色 */
  --primary-color: #518FC1;
  --accent-color: #518FC1;
  --text-color: #333;
  --text-color-light: #666;
  --background-color: #fff;
  --background-color-alt: #f5f5f5;
  --border-color: rgba(0, 0, 0, 0.1);
  
  /* 动画持续时间 */
  --transition-fast: 0.2s;
  --transition-normal: 0.3s;
  --transition-slow: 0.5s;
  
  /* 布局尺寸 */
  --content-width: 900px;
  --sidebar-width: 250px;
  --border-radius: 4px;
  --border-radius-large: 8px;
}

/* 减少重绘和重排的优化 */
* {
  box-sizing: border-box;
}

/* 使用will-change提示浏览器哪些元素将会变化 */
.md-header,
.md-sidebar,
.md-content__inner,
.md-nav__item--nested .md-nav__toggle:checked ~ .md-nav {
  will-change: transform, opacity;
}

/* 使用transform而不是top/left/bottom/right属性进行动画 */
.md-header[data-md-state="shadow"] {
  transform: translateZ(0);
  box-shadow: 0 0 0.2rem rgba(0, 0, 0, 0.1), 0 0.2rem 0.4rem rgba(0, 0, 0, 0.2);
}

/* 优化图片加载 */
img {
  max-width: 100%;
  height: auto;
  transition: opacity var(--transition-normal) ease;
}

img[loading="lazy"],
img[data-src] {
  opacity: 0;
}

img.loaded {
  opacity: 1;
}

/* 优化字体渲染 */
body {
  text-rendering: optimizeSpeed;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 减少不必要的动画 */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* 优化移动端性能 */
@media (max-width: 76.1875em) {
  /* 移动端减少阴影复杂度 */
  .md-header[data-md-state="shadow"],
  .md-nav__title[data-md-state="shadow"] {
    box-shadow: 0 0 0.2rem rgba(0, 0, 0, 0.1);
  }
  
  /* 移动端减少动画效果 */
  .md-nav__toggle:checked ~ .md-nav {
    transition: max-height var(--transition-fast) ease;
  }
}

/* 优化打印样式 */
@media print {
  /* 打印时隐藏不必要的元素 */
  .md-header,
  .md-tabs,
  .md-sidebar,
  .md-footer,
  .md-top,
  .md-dialog {
    display: none !important;
  }
  
  /* 打印时优化内容区域 */
  .md-main__inner {
    margin: 0;
    padding: 0;
  }
  
  .md-content {
    max-width: 100%;
    margin: 0;
  }
  
  /* 确保链接URL在打印时可见 */
  a[href]:after {
    content: " (" attr(href) ")";
    font-size: 0.8em;
    font-weight: normal;
  }
  
  /* 但内部链接不显示URL */
  a[href^="#"]:after,
  a[href^="javascript:"]:after {
    content: "";
  }
}